{
  "version": 3,
  "sources": ["../../thirdweb/src/react/web/ui/ConnectWallet/Modal/ConnectEmbed.tsx", "../../thirdweb/src/react/core/hooks/wallets/useIsAutoConnecting.ts", "../../thirdweb/src/react/core/hooks/transaction/transaction-button-utils.ts", "../../thirdweb/src/react/web/hooks/transaction/useSendTransaction.tsx", "../../thirdweb/src/react/core/hooks/transaction/useSendTransaction.ts", "../../thirdweb/src/react/web/ui/TransactionButton/TransactionModal.tsx", "../../thirdweb/src/react/web/ui/TransactionButton/ExecutingScreen.tsx", "../../thirdweb/src/react/web/ui/TransactionButton/index.tsx", "../../thirdweb/src/react/web/providers/thirdweb-provider.tsx", "../../thirdweb/src/react/core/providers/thirdweb-provider.tsx", "../../thirdweb/src/react/core/utils/structuralSharing.ts", "../../thirdweb/src/wallets/eip5792/get-capabilities.ts", "../../thirdweb/src/react/core/hooks/wallets/useCapabilities.ts", "../../thirdweb/src/wallets/eip5792/send-calls.ts", "../../thirdweb/src/wallets/eip5792/get-calls-status.ts", "../../thirdweb/src/wallets/eip5792/wait-for-bundle.ts", "../../thirdweb/src/react/core/hooks/wallets/useSendCalls.ts", "../../thirdweb/src/react/core/hooks/wallets/useCallsStatus.ts", "../../thirdweb/src/react/web/hooks/wallets/useLinkProfile.ts", "../../thirdweb/src/utils/function-id.ts", "../../thirdweb/src/react/core/hooks/contract/useReadContract.ts", "../../thirdweb/src/react/core/hooks/contract/useContractEvents.ts", "../../thirdweb/src/react/core/hooks/transaction/useSimulateTransaction.ts", "../../thirdweb/src/react/core/hooks/transaction/useSendBatchTransaction.ts", "../../thirdweb/src/react/core/hooks/transaction/useSendAndConfirmTransaction.ts", "../../thirdweb/src/react/core/hooks/transaction/useEstimateGas.ts", "../../thirdweb/src/react/core/hooks/transaction/useEstimateGasCost.ts", "../../thirdweb/src/react/core/hooks/rpc/useBlockNumber.ts", "../../thirdweb/src/react/core/utils/createQuery.ts", "../../thirdweb/src/react/core/hooks/others/useInvalidateQueries.ts", "../../thirdweb/src/react/core/hooks/pay/useBuyWithCryptoHistory.ts", "../../thirdweb/src/pay/buyWithFiat/getHistory.ts", "../../thirdweb/src/react/core/hooks/pay/useBuyWithFiatHistory.ts", "../../thirdweb/src/react/core/hooks/pay/usePostOnrampQuote.ts", "../../thirdweb/src/react/web/ui/PayEmbed.tsx", "../../thirdweb/src/react/web/ui/ConnectWallet/useConnectModal.tsx", "../../thirdweb/src/react/web/ui/prebuilt/thirdweb/ClaimButton/index.tsx", "../../thirdweb/src/react/web/ui/prebuilt/thirdweb/BuyDirectListingButton/index.tsx", "../../thirdweb/src/react/web/ui/prebuilt/thirdweb/CreateDirectListingButton/index.tsx", "../../thirdweb/src/extensions/marketplace/__generated__/IDirectListings/write/createListing.ts", "../../thirdweb/src/extensions/marketplace/direct-listings/write/createListing.ts", "../../thirdweb/src/react/web/ui/prebuilt/NFT/NFT.tsx"],
  "sourcesContent": ["\"use client\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport type { Chain } from \"../../../../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../../../../client/client.js\";\r\nimport type { Wallet } from \"../../../../../wallets/interfaces/wallet.js\";\r\nimport type { SmartWalletOptions } from \"../../../../../wallets/smart/types.js\";\r\nimport {\r\n  CustomThemeProvider,\r\n  useCustomTheme,\r\n} from \"../../../../core/design-system/CustomThemeProvider.js\";\r\nimport { radius } from \"../../../../core/design-system/index.js\";\r\nimport {\r\n  type SiweAuthOptions,\r\n  useSiweAuth,\r\n} from \"../../../../core/hooks/auth/useSiweAuth.js\";\r\nimport type { ConnectEmbedProps } from \"../../../../core/hooks/connection/ConnectEmbedProps.js\";\r\nimport { useActiveAccount } from \"../../../../core/hooks/wallets/useActiveAccount.js\";\r\nimport { useActiveWallet } from \"../../../../core/hooks/wallets/useActiveWallet.js\";\r\nimport { useIsAutoConnecting } from \"../../../../core/hooks/wallets/useIsAutoConnecting.js\";\r\nimport { useConnectionManager } from \"../../../../core/providers/connection-manager.js\";\r\nimport { WalletUIStatesProvider } from \"../../../providers/wallet-ui-states-provider.js\";\r\nimport { canFitWideModal } from \"../../../utils/canFitWideModal.js\";\r\nimport { usePreloadWalletProviders } from \"../../../utils/usePreloadWalletProviders.js\";\r\nimport { getDefaultWallets } from \"../../../wallets/defaultWallets.js\";\r\nimport { LoadingScreen } from \"../../../wallets/shared/LoadingScreen.js\";\r\nimport { AutoConnect } from \"../../AutoConnect/AutoConnect.js\";\r\nimport { DynamicHeight } from \"../../components/DynamicHeight.js\";\r\nimport { StyledDiv } from \"../../design-system/elements.js\";\r\nimport type { LocaleId } from \"../../types.js\";\r\nimport {\r\n  modalMaxWidthCompact,\r\n  modalMaxWidthWide,\r\n  reservedScreens,\r\n  wideModalMaxHeight,\r\n} from \"../constants.js\";\r\nimport { useConnectLocale } from \"../locale/getConnectLocale.js\";\r\nimport type { ConnectLocale } from \"../locale/types.js\";\r\nimport type { WelcomeScreen } from \"../screens/types.js\";\r\nimport { ConnectModalContent } from \"./ConnectModalContent.js\";\r\nimport { useSetupScreen } from \"./screen.js\";\r\n\r\n/**\r\n * An inline wallet connection component that allows to:\r\n *\r\n * - Connect to 350+ external wallets\r\n * - Connect with email, phone, passkey or socials\r\n * - Convert any wallet to a ERC4337 smart wallet for gasless transactions\r\n * - Sign in with ethereum (Auth)\r\n *\r\n * It renders the same UI as the [`ConnectButton`](https://portal.thirdweb.com/react/v5/ConnectButton) component's modal - but directly inline in the page instead of being in a modal.\r\n *\r\n * Once connected, the component does not render any UI. It only renders UI if wallet is not connected.\r\n *\r\n * @example\r\n *\r\n * ## Default setup\r\n *\r\n * ```tsx\r\n * import { createThirdwebClient } from \"thirdweb\";\r\n * import { ConnectEmbed } from \"thirdweb/react\";\r\n *\r\n * const client = createThirdwebClient({ clientId: \"YOUR_CLIENT_ID\" });\r\n *\r\n * <ConnectEmbed\r\n *    client={client}\r\n * />\r\n * ```\r\n *\r\n * [View all available config options](https://portal.thirdweb.com/references/typescript/v5/ConnectEmbedProps)\r\n *\r\n *  ## Customization options\r\n *\r\n * ### Customizing wallet options\r\n *\r\n * ```tsx\r\n * <ConnectEmbed\r\n *    client={client}\r\n *    wallets={[\r\n *      createWallet(\"io.metamask\"),\r\n *      createWallet(\"com.coinbase.wallet\"),\r\n *      createWallet(\"me.rainbow\"),\r\n *    ]}\r\n * />\r\n * ```\r\n *\r\n * [View all available wallets](https://portal.thirdweb.com/typescript/v5/supported-wallets)\r\n *\r\n *  ### Customizing the default chain to connect to\r\n *\r\n * ```tsx\r\n * import { base } from \"thirdweb/chains\";\r\n *\r\n * <ConnectEmbed\r\n *   client={client}\r\n *   chain={base}\r\n * />\r\n * ```\r\n *\r\n * ### Enabling Account Abstraction\r\n *\r\n * By passing the `accountAbstraction` prop, ALL connected wallets will be converted to smart accounts.\r\n * And by setting `sponsorGas` to `true`, all transactions done with those smart accounts will be sponsored.\r\n *\r\n * ```tsx\r\n * <ConnectEmbed\r\n * client={client}\r\n * accountAbstraction={{\r\n *   chain: sepolia,\r\n *   sponsorGas: true,\r\n * }}\r\n * />;\r\n * ```\r\n *\r\n * ### Enabling sign in with ethereum (Auth)\r\n *\r\n * ```tsx\r\n * <ConnectEmbed\r\n * client={client}\r\n * auth={{\r\n *   isLoggedIn: async (address) => {\r\n *     console.log(\"checking if logged in!\", { address });\r\n *     return await isLoggedIn();\r\n *   },\r\n *   doLogin: async (params) => {\r\n *     console.log(\"logging in!\");\r\n *     await login(params);\r\n *   },\r\n *   getLoginPayload: async ({ address }) =>\r\n *     generatePayload({ address }),\r\n *   doLogout: async () => {\r\n *     console.log(\"logging out!\");\r\n *     await logout();\r\n *   },\r\n * }}\r\n * />;\r\n * ```\r\n *\r\n * ### Customizing the theme\r\n *\r\n * ```tsx\r\n * <ConnectEmbed\r\n *    client={client}\r\n *    theme=\"light\"\r\n * />\r\n * ```\r\n *\r\n * For more granular control, you can also pass a custom theme object:\r\n *\r\n * ```tsx\r\n * <ConnectEmbed\r\n *    client={client}\r\n *    theme={lightTheme({\r\n *      colors: {\r\n *        modalBg: \"red\",\r\n *      },\r\n *    })}\r\n * />\r\n * ```\r\n *\r\n * [View all available themes properties](https://portal.thirdweb.com/references/typescript/v5/Theme)\r\n *\r\n * ### Changing the display language\r\n *\r\n * ```tsx\r\n * <ConnectEmbed\r\n *    client={client}\r\n *    locale=\"ja_JP\"\r\n * />\r\n * ```\r\n *\r\n * [View all available locales](https://portal.thirdweb.com/references/typescript/v5/LocaleId)\r\n *\r\n * @param props -\r\n * The props for the `ConnectEmbed` component.\r\n *\r\n * Refer to the [`ConnectEmbedProps`](https://portal.thirdweb.com/references/typescript/v5/ConnectEmbedProps) type for more details\r\n *\r\n * @returns A JSX element that renders the <ConnectEmbed> component.\r\n * @component\r\n */\r\nexport function ConnectEmbed(props: ConnectEmbedProps) {\r\n  const activeWallet = useActiveWallet();\r\n  const activeAccount = useActiveAccount();\r\n  const siweAuth = useSiweAuth(activeWallet, activeAccount, props.auth);\r\n  const show =\r\n    !activeAccount || (siweAuth.requiresAuth && !siweAuth.isLoggedIn);\r\n  const connectionManager = useConnectionManager();\r\n\r\n  // Add props.chain and props.chains to defined chains store\r\n  useEffect(() => {\r\n    if (props.chain) {\r\n      connectionManager.defineChains([props.chain]);\r\n    }\r\n  }, [props.chain, connectionManager]);\r\n\r\n  useEffect(() => {\r\n    if (props.chains) {\r\n      connectionManager.defineChains(props.chains);\r\n    }\r\n  }, [props.chains, connectionManager]);\r\n\r\n  const wallets = useMemo(\r\n    () =>\r\n      props.wallets ||\r\n      getDefaultWallets({\r\n        appMetadata: props.appMetadata,\r\n        chains: props.chains,\r\n      }),\r\n    [props.wallets, props.appMetadata, props.chains],\r\n  );\r\n  const localeId = props.locale || \"en_US\";\r\n  const localeQuery = useConnectLocale(localeId);\r\n\r\n  usePreloadWalletProviders({\r\n    wallets,\r\n    client: props.client,\r\n  });\r\n\r\n  const modalSize = useMemo(() => {\r\n    return !canFitWideModal() || wallets.length === 1\r\n      ? \"compact\"\r\n      : props.modalSize || (\"compact\" as const);\r\n  }, [wallets.length, props.modalSize]);\r\n\r\n  const meta = useMemo(() => {\r\n    return {\r\n      privacyPolicyUrl: props.privacyPolicyUrl,\r\n      showThirdwebBranding: props.showThirdwebBranding !== false,\r\n      termsOfServiceUrl: props.termsOfServiceUrl,\r\n      title: undefined,\r\n      titleIconUrl: undefined,\r\n      requireApproval: props.requireApproval,\r\n    };\r\n  }, [\r\n    props.privacyPolicyUrl,\r\n    props.showThirdwebBranding,\r\n    props.termsOfServiceUrl,\r\n    props.requireApproval,\r\n  ]);\r\n\r\n  const preferredChain =\r\n    props.accountAbstraction?.chain || props.chain || props.chains?.[0];\r\n\r\n  const autoConnectComp = props.autoConnect !== false && (\r\n    <AutoConnect\r\n      chain={preferredChain}\r\n      appMetadata={props.appMetadata}\r\n      client={props.client}\r\n      wallets={wallets}\r\n      accountAbstraction={props.accountAbstraction}\r\n      timeout={\r\n        typeof props.autoConnect === \"boolean\"\r\n          ? undefined\r\n          : props.autoConnect?.timeout\r\n      }\r\n      onConnect={props.onConnect}\r\n    />\r\n  );\r\n\r\n  if (show) {\r\n    if (!localeQuery.data) {\r\n      return (\r\n        <>\r\n          {autoConnectComp}\r\n          <CustomThemeProvider theme={props.theme}>\r\n            <EmbedContainer modalSize={modalSize}>\r\n              <LoadingScreen />\r\n            </EmbedContainer>\r\n          </CustomThemeProvider>\r\n        </>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <WalletUIStatesProvider theme={props.theme} isOpen={true}>\r\n        <ConnectEmbedContent\r\n          auth={props.auth}\r\n          accountAbstraction={props.accountAbstraction}\r\n          chain={preferredChain}\r\n          chains={props.chains}\r\n          client={props.client}\r\n          connectLocale={localeQuery.data}\r\n          size={modalSize}\r\n          meta={meta}\r\n          header={props.header}\r\n          localeId={props.locale || \"en_US\"}\r\n          onConnect={props.onConnect}\r\n          recommendedWallets={props.recommendedWallets}\r\n          showAllWallets={props.showAllWallets}\r\n          walletConnect={props.walletConnect}\r\n          wallets={wallets}\r\n          className={props.className}\r\n          modalSize={modalSize}\r\n          style={props.style}\r\n          welcomeScreen={props.welcomeScreen}\r\n        />\r\n        {autoConnectComp}\r\n      </WalletUIStatesProvider>\r\n    );\r\n  }\r\n\r\n  return <div>{autoConnectComp}</div>;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nconst ConnectEmbedContent = (props: {\r\n  modalSize?: \"compact\" | \"wide\";\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  // ---\r\n  accountAbstraction: SmartWalletOptions | undefined;\r\n  auth: SiweAuthOptions | undefined;\r\n  chain: Chain | undefined;\r\n  chains: Chain[] | undefined;\r\n  client: ThirdwebClient;\r\n  connectLocale: ConnectLocale;\r\n  meta: {\r\n    title?: string;\r\n    titleIconUrl?: string;\r\n    showThirdwebBranding?: boolean;\r\n    termsOfServiceUrl?: string;\r\n    privacyPolicyUrl?: string;\r\n  };\r\n  size: \"compact\" | \"wide\";\r\n  header:\r\n    | {\r\n        title?: string;\r\n        titleIcon?: string;\r\n      }\r\n    | true\r\n    | undefined;\r\n  localeId: LocaleId;\r\n  onConnect: ((wallet: Wallet) => void) | undefined;\r\n  recommendedWallets: Wallet[] | undefined;\r\n  showAllWallets: boolean | undefined;\r\n  walletConnect:\r\n    | {\r\n        projectId?: string;\r\n      }\r\n    | undefined;\r\n  wallets: Wallet[];\r\n  welcomeScreen: WelcomeScreen | undefined;\r\n}) => {\r\n  // const requiresSignIn = false;\r\n  const screenSetup = useSetupScreen({\r\n    size: props.size,\r\n    welcomeScreen: undefined,\r\n    wallets: props.wallets,\r\n  });\r\n  const { setScreen, initialScreen, screen } = screenSetup;\r\n  const activeWallet = useActiveWallet();\r\n  const activeAccount = useActiveAccount();\r\n  const siweAuth = useSiweAuth(activeWallet, activeAccount, props.auth);\r\n\r\n  const isAutoConnecting = useIsAutoConnecting();\r\n\r\n  let content = null;\r\n\r\n  // if sign in is required but connect embed is showing the initial screen - change to sign in screen\r\n  useEffect(() => {\r\n    if (\r\n      siweAuth.requiresAuth &&\r\n      !siweAuth.isLoggedIn &&\r\n      activeAccount &&\r\n      screen === initialScreen\r\n    ) {\r\n      setScreen(reservedScreens.signIn);\r\n    }\r\n  }, [siweAuth, setScreen, activeAccount, screen, initialScreen]);\r\n\r\n  const modalSize = !canFitWideModal()\r\n    ? \"compact\"\r\n    : props.modalSize || (\"compact\" as const);\r\n\r\n  // show spinner on page load and during auto connecting a wallet\r\n  if (isAutoConnecting) {\r\n    content = <LoadingScreen />;\r\n  } else {\r\n    content = (\r\n      <ConnectModalContent\r\n        shouldSetActive={true}\r\n        screenSetup={screenSetup}\r\n        isOpen={true}\r\n        onClose={() => {\r\n          setScreen(initialScreen);\r\n        }}\r\n        setModalVisibility={() => {\r\n          // no op\r\n        }}\r\n        accountAbstraction={props.accountAbstraction}\r\n        auth={props.auth}\r\n        chain={props.chain}\r\n        chains={props.chains}\r\n        client={props.client}\r\n        connectLocale={props.connectLocale}\r\n        meta={{\r\n          ...props.meta,\r\n          title:\r\n            typeof props.header === \"object\" ? props.header.title : undefined,\r\n          titleIconUrl:\r\n            typeof props.header === \"object\"\r\n              ? props.header.titleIcon\r\n              : undefined,\r\n        }}\r\n        size={props.size}\r\n        welcomeScreen={props.welcomeScreen}\r\n        hideHeader={!props.header}\r\n        onConnect={props.onConnect}\r\n        recommendedWallets={props.recommendedWallets}\r\n        showAllWallets={props.showAllWallets}\r\n        walletConnect={props.walletConnect}\r\n        wallets={props.wallets}\r\n        modalHeader={undefined}\r\n        walletIdsToHide={undefined}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <EmbedContainer\r\n      modalSize={modalSize}\r\n      className={props.className}\r\n      style={props.style}\r\n    >\r\n      {modalSize === \"wide\" ? (\r\n        content\r\n      ) : (\r\n        <DynamicHeight> {content} </DynamicHeight>\r\n      )}\r\n    </EmbedContainer>\r\n  );\r\n};\r\n\r\nexport const EmbedContainer = /* @__PURE__ */ StyledDiv<{\r\n  modalSize: \"compact\" | \"wide\";\r\n}>((props) => {\r\n  const { modalSize } = props;\r\n  const theme = useCustomTheme();\r\n  return {\r\n    color: theme.colors.primaryText,\r\n    background: theme.colors.modalBg,\r\n    height: modalSize === \"compact\" ? \"auto\" : wideModalMaxHeight,\r\n    width: modalSize === \"compact\" ? modalMaxWidthCompact : modalMaxWidthWide,\r\n    boxSizing: \"border-box\",\r\n    position: \"relative\",\r\n    lineHeight: \"normal\",\r\n    borderRadius: radius.xl,\r\n    border: `1px solid ${theme.colors.borderColor}`,\r\n    overflow: \"hidden\",\r\n    fontFamily: theme.fontFamily,\r\n    \"& *::selection\": {\r\n      backgroundColor: theme.colors.selectedTextBg,\r\n      color: theme.colors.selectedTextColor,\r\n    },\r\n    \"& *\": {\r\n      boxSizing: \"border-box\",\r\n    },\r\n  };\r\n});\r\n", "\"use client\";\r\n\r\nimport { useSyncExternalStore } from \"react\";\r\nimport { useConnectionManagerCtx } from \"../../providers/connection-manager.js\";\r\n\r\n/**\r\n * A hook to check if the auto connect is in progress.\r\n * @example\r\n * ```jsx\r\n * function Example() {\r\n *   const isAutoConnecting = useIsAutoConnecting();\r\n *\r\n *   return <div> ... </div>;\r\n * }\r\n * ```\r\n * @returns A boolean indicating if the auto connect is in progress.\r\n * @walletConnection\r\n */\r\nexport function useIsAutoConnecting() {\r\n  const manager = useConnectionManagerCtx(\"useIsAutoConnecting\");\r\n  const store = manager.isAutoConnecting;\r\n  return useSyncExternalStore(store.subscribe, store.getValue, store.getValue);\r\n}\r\n", "import { useMutation } from \"@tanstack/react-query\";\r\nimport type { TransactionReceipt } from \"viem\";\r\nimport type { GaslessOptions } from \"../../../../transaction/actions/gasless/types.js\";\r\nimport {\r\n  type WaitForReceiptOptions,\r\n  waitForReceipt,\r\n} from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport { stringify } from \"../../../../utils/json.js\";\r\nimport type { Theme } from \"../../design-system/index.js\";\r\nimport type {\r\n  SendTransactionPayModalConfig,\r\n  useSendTransactionCore,\r\n} from \"./useSendTransaction.js\";\r\n\r\n/**\r\n * Props for the [`TransactionButton`](https://portal.thirdweb.com/references/typescript/v5/TransactionButton) component.\r\n * @transaction\r\n */\r\nexport type TransactionButtonProps = {\r\n  /**\r\n   * The a function returning a prepared transaction of type [`PreparedTransaction`](https://portal.thirdweb.com/references/typescript/v5/PreparedTransaction) to be sent when the button is clicked\r\n   */\r\n  transaction: () => // biome-ignore lint/suspicious/noExplicitAny: TODO: fix any\r\n    | PreparedTransaction<any>\r\n    // biome-ignore lint/suspicious/noExplicitAny: TODO: fix any\r\n    | Promise<PreparedTransaction<any>>;\r\n\r\n  /**\r\n   * Callback that will be called when the transaction is submitted onchain\r\n   * @param transactionResult - The object of type [`WaitForReceiptOptions`](https://portal.thirdweb.com/references/typescript/v5/WaitForReceiptOptions)\r\n   */\r\n  onTransactionSent?: (transactionResult: WaitForReceiptOptions) => void;\r\n  /**\r\n   *\r\n   * Callback that will be called when the transaction is confirmed onchain.\r\n   * If this callback is set, the component will wait for the transaction to be confirmed.\r\n   * @param receipt - The transaction receipt object of type [`TransactionReceipt`](https://portal.thirdweb.com/references/typescript/v5/TransactionReceipt)\r\n   */\r\n  onTransactionConfirmed?: (receipt: TransactionReceipt) => void;\r\n  /**\r\n   * The Error thrown when trying to send the transaction\r\n   * @param error - The `Error` object thrown\r\n   */\r\n  onError?: (error: Error) => void;\r\n  /**\r\n   * Callback to be called when the button is clicked\r\n   * This function is provoked before the transaction is sent\r\n   */\r\n  onClick?: () => void;\r\n  /**\r\n   * The className to apply to the button element for custom styling\r\n   */\r\n  className?: string;\r\n  /**\r\n   * The style to apply to the button element for custom styling\r\n   */\r\n  style?: React.CSSProperties;\r\n  /**\r\n   * Remove all default styling from the button\r\n   */\r\n  unstyled?: boolean;\r\n  /**\r\n   * The `React.ReactNode` to be rendered inside the button\r\n   */\r\n  children: React.ReactNode;\r\n\r\n  /**\r\n   * Configuration for gasless transactions.\r\n   * Refer to [`GaslessOptions`](https://portal.thirdweb.com/references/typescript/v5/GaslessOptions) for more details.\r\n   */\r\n  gasless?: GaslessOptions;\r\n\r\n  /**\r\n   * The button's disabled state\r\n   */\r\n  disabled?: boolean;\r\n\r\n  /**\r\n   * Configuration for the \"Pay Modal\" that opens when the user doesn't have enough funds to send a transaction.\r\n   * Set `payModal: false` to disable the \"Pay Modal\" popup\r\n   *\r\n   * This configuration object includes the following properties to configure the \"Pay Modal\" UI:\r\n   *\r\n   * ### `locale`\r\n   * The language to use for the \"Pay Modal\" UI. Defaults to `\"en_US\"`.\r\n   *\r\n   * ### `supportedTokens`\r\n   * An object of type [`SupportedTokens`](https://portal.thirdweb.com/references/typescript/v5/SupportedTokens) to configure the tokens to show for a chain.\r\n   *\r\n   * ### `theme`\r\n   * The theme to use for the \"Pay Modal\" UI. Defaults to `\"dark\"`.\r\n   *\r\n   * It can be set to `\"light\"` or `\"dark\"` or an object of type [`Theme`](https://portal.thirdweb.com/references/typescript/v5/Theme) for a custom theme.\r\n   *\r\n   * Refer to [`lightTheme`](https://portal.thirdweb.com/references/typescript/v5/lightTheme)\r\n   * or [`darkTheme`](https://portal.thirdweb.com/references/typescript/v5/darkTheme) helper functions to use the default light or dark theme and customize it.\r\n   */\r\n  payModal?: SendTransactionPayModalConfig;\r\n\r\n  /**\r\n   * The theme to use for the button\r\n   */\r\n  theme?: \"dark\" | \"light\" | Theme;\r\n\r\n  /**\r\n   * Set the type attribute of the button element.\r\n   *\r\n   * [MDN Reference](https://developer.mozilla.org/docs/Web/API/HTMLButtonElement/type)\r\n   */\r\n  type?: HTMLButtonElement[\"type\"];\r\n};\r\n\r\nexport const useTransactionButtonMutation = (\r\n  props: TransactionButtonProps,\r\n  sendTransactionFn: ReturnType<typeof useSendTransactionCore>[\"mutateAsync\"],\r\n) => {\r\n  const {\r\n    transaction,\r\n    onTransactionSent,\r\n    onTransactionConfirmed,\r\n    onError,\r\n    onClick,\r\n  } = props;\r\n  return useMutation({\r\n    mutationFn: async () => {\r\n      if (onClick) {\r\n        onClick();\r\n      }\r\n      try {\r\n        const resolvedTx = await transaction();\r\n        const result = await sendTransactionFn(resolvedTx);\r\n\r\n        if (onTransactionSent) {\r\n          onTransactionSent(result);\r\n        }\r\n\r\n        if (onTransactionConfirmed) {\r\n          const receipt = await waitForReceipt(result);\r\n          if (receipt.status === \"reverted\") {\r\n            throw new Error(\r\n              `Execution reverted: ${stringify(receipt, null, 2)}`,\r\n            );\r\n          }\r\n          onTransactionConfirmed(receipt);\r\n        }\r\n      } catch (error) {\r\n        if (onError) {\r\n          onError(error as Error);\r\n        }\r\n      } finally {\r\n      }\r\n    },\r\n  });\r\n};\r\n", "import { useContext } from \"react\";\r\nimport {\r\n  type SendTransactionConfig,\r\n  type ShowModalData,\r\n  useSendTransactionCore,\r\n} from \"../../../core/hooks/transaction/useSendTransaction.js\";\r\nimport { useActiveWallet } from \"../../../core/hooks/wallets/useActiveWallet.js\";\r\nimport { useSwitchActiveWalletChain } from \"../../../core/hooks/wallets/useSwitchActiveWalletChain.js\";\r\nimport { SetRootElementContext } from \"../../../core/providers/RootElementContext.js\";\r\nimport { TransactionModal } from \"../../ui/TransactionButton/TransactionModal.js\";\r\n\r\n/**\r\n * A hook to send a transaction with from the user's connected wallet.\r\n *\r\n * You can send a transaction with a [prepared contract call](https://portal.thirdweb.com/references/typescript/v5/prepareContractCall), a [prepared transaction](https://portal.thirdweb.com/references/typescript/v5/prepareTransaction), or using a write [Extension](https://portal.thirdweb.com/react/v5/extensions).\r\n *\r\n * @returns A UseMutationResult object to send a transaction.\r\n * @param config Configuration for the `useSendTransaction` hook.\r\n * Refer to [`SendTransactionConfig`](https://portal.thirdweb.com/references/typescript/v5/SendTransactionConfig) for more details.\r\n * @example\r\n *\r\n * ### Sending a prepared contract call\r\n *\r\n * ```tsx\r\n * import { useSendTransaction } from \"thirdweb/react\";\r\n * import { getContract, prepareContractCall } from \"thirdweb\";\r\n * import { sepolia } from \"thirdweb/chains\";\r\n *\r\n * const contract = getContract({\r\n *   address: \"0x...\",\r\n *   chain: sepolia,\r\n *   client,\r\n * });\r\n *\r\n * const { mutate: sendTx, data: transactionResult } = useSendTransaction();\r\n *\r\n * const onClick = () => {\r\n *   const transaction = prepareContractCall({\r\n *       contract,\r\n *       method: \"function transfer(address to, uint256 value)\",\r\n *       params: [to, value],\r\n *     }),\r\n *   });\r\n *   sendTx(transaction);\r\n * };\r\n * ```\r\n *\r\n * ### Using a write extension\r\n *\r\n * ```tsx\r\n * import { useSendTransaction } from \"thirdweb/react\";\r\n * import { mintTo } from \"thirdweb/extensions/erc721\";\r\n *\r\n * const { mutate: sendTx, data: transactionResult } = useSendTransaction();\r\n *\r\n * const onClick = () => {\r\n *   const transaction = mintTo({\r\n *     contract,\r\n *     to: \"0x...\",\r\n *     nft: {\r\n *       name: \"NFT Name\",\r\n *       description: \"NFT Description\",\r\n *       image: \"https://example.com/image.png\",\r\n *     },\r\n *   });\r\n *   sendTx(transaction);\r\n * };\r\n * ```\r\n *\r\n * ### Sending a prepared transaction\r\n *\r\n * ```tsx\r\n * import { useSendTransaction } from \"thirdweb/react\";\r\n * import { prepareTransaction } from \"thirdweb\";\r\n * import { sepolia } from \"thirdweb/chains\";\r\n *\r\n * const { mutate: sendTx, data: transactionResult } = useSendTransaction();\r\n *\r\n * const onClick = () => {\r\n *   // Send 0.1 SepoliaETH to an address\r\n *   const transaction = prepareTransaction({\r\n *     to: \"0x...\",\r\n *     value: toWei(\"0.1\"),\r\n *     chain: sepolia,\r\n *     client: thirdwebClient,\r\n *   });\r\n *   sendTx(transaction);\r\n * };\r\n * ```\r\n *\r\n * @transaction\r\n */\r\nexport function useSendTransaction(config: SendTransactionConfig = {}) {\r\n  const switchChain = useSwitchActiveWalletChain();\r\n  const wallet = useActiveWallet();\r\n  const setRootEl = useContext(SetRootElementContext);\r\n  const payModal = config.payModal;\r\n\r\n  let payModalEnabled = true;\r\n\r\n  if (payModal === false || config.gasless) {\r\n    payModalEnabled = false;\r\n  }\r\n\r\n  const showPayModal = (data: ShowModalData) => {\r\n    if (payModal === false) return;\r\n    setRootEl(\r\n      <TransactionModal\r\n        title={payModal?.metadata?.name || \"Transaction\"}\r\n        tx={data.tx}\r\n        onComplete={data.sendTx}\r\n        onClose={() => {\r\n          setRootEl(null);\r\n          data.rejectTx(\r\n            new Error(\"User rejected transaction by closing modal\"),\r\n          );\r\n        }}\r\n        onTxSent={data.resolveTx}\r\n        client={data.tx.client}\r\n        localeId={payModal?.locale || \"en_US\"}\r\n        supportedTokens={payModal?.supportedTokens}\r\n        theme={payModal?.theme || \"dark\"}\r\n        payOptions={{\r\n          buyWithCrypto: payModal?.buyWithCrypto,\r\n          buyWithFiat: payModal?.buyWithFiat,\r\n          purchaseData: payModal?.purchaseData,\r\n          mode: \"transaction\",\r\n          transaction: data.tx,\r\n          metadata: payModal?.metadata,\r\n          onPurchaseSuccess: payModal?.onPurchaseSuccess,\r\n        }}\r\n      />,\r\n    );\r\n  };\r\n\r\n  return useSendTransactionCore({\r\n    showPayModal:\r\n      !payModalEnabled || payModal === false ? undefined : showPayModal,\r\n    gasless: config.gasless,\r\n    switchChain,\r\n    wallet,\r\n  });\r\n}\r\n", "import { type UseMutationResult, useMutation } from \"@tanstack/react-query\";\r\nimport type { Chain } from \"../../../../chains/types.js\";\r\nimport { getGasPrice } from \"../../../../gas/get-gas-price.js\";\r\nimport type { BuyWithCryptoStatus } from \"../../../../pay/buyWithCrypto/getStatus.js\";\r\nimport type { BuyWithFiatStatus } from \"../../../../pay/buyWithFiat/getStatus.js\";\r\nimport type { FiatProvider } from \"../../../../pay/utils/commonTypes.js\";\r\nimport { estimateGasCost } from \"../../../../transaction/actions/estimate-gas-cost.js\";\r\nimport type { GaslessOptions } from \"../../../../transaction/actions/gasless/types.js\";\r\nimport { sendTransaction } from \"../../../../transaction/actions/send-transaction.js\";\r\nimport type { WaitForReceiptOptions } from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport { resolvePromisedValue } from \"../../../../utils/promise/resolve-promised-value.js\";\r\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\r\nimport { getTokenBalance } from \"../../../../wallets/utils/getTokenBalance.js\";\r\nimport { getWalletBalance } from \"../../../../wallets/utils/getWalletBalance.js\";\r\nimport type { LocaleId } from \"../../../web/ui/types.js\";\r\nimport type { Theme } from \"../../design-system/index.js\";\r\nimport type { SupportedTokens } from \"../../utils/defaultTokens.js\";\r\nimport { hasSponsoredTransactionsEnabled } from \"../../utils/wallet.js\";\r\n\r\n/**\r\n * Configuration for the \"Pay Modal\" that opens when the user doesn't have enough funds to send a transaction.\r\n * Set `payModal: false` to disable the \"Pay Modal\" popup\r\n *\r\n * This configuration object includes the following properties to configure the \"Pay Modal\" UI:\r\n *\r\n * ### `locale`\r\n * The language to use for the \"Pay Modal\" UI. Defaults to `\"en_US\"`.\r\n *\r\n * ### `supportedTokens`\r\n * An object of type [`SupportedTokens`](https://portal.thirdweb.com/references/typescript/v5/SupportedTokens) to configure the tokens to show for a chain.\r\n *\r\n * ### `theme`\r\n * The theme to use for the \"Pay Modal\" UI. Defaults to `\"dark\"`.\r\n *\r\n * It can be set to `\"light\"` or `\"dark\"` or an object of type [`Theme`](https://portal.thirdweb.com/references/typescript/v5/Theme) for a custom theme.\r\n *\r\n * Refer to [`lightTheme`](https://portal.thirdweb.com/references/typescript/v5/lightTheme)\r\n * or [`darkTheme`](https://portal.thirdweb.com/references/typescript/v5/darkTheme) helper functions to use the default light or dark theme and customize it.\r\n */\r\nexport type SendTransactionPayModalConfig =\r\n  | {\r\n      metadata?: {\r\n        name?: string;\r\n        image?: string;\r\n      };\r\n      locale?: LocaleId;\r\n      supportedTokens?: SupportedTokens;\r\n      theme?: Theme | \"light\" | \"dark\";\r\n      buyWithCrypto?:\r\n        | false\r\n        | {\r\n            testMode?: boolean;\r\n          };\r\n      buyWithFiat?:\r\n        | false\r\n        | {\r\n            prefillSource?: {\r\n              currency?: \"USD\" | \"CAD\" | \"GBP\" | \"EUR\" | \"JPY\";\r\n            };\r\n            testMode?: boolean;\r\n            preferredProvider?: FiatProvider;\r\n          };\r\n      purchaseData?: object;\r\n      /**\r\n       * Callback to be called when the user successfully completes the purchase.\r\n       */\r\n      onPurchaseSuccess?: (\r\n        info:\r\n          | {\r\n              type: \"crypto\";\r\n              status: BuyWithCryptoStatus;\r\n            }\r\n          | {\r\n              type: \"fiat\";\r\n              status: BuyWithFiatStatus;\r\n            },\r\n      ) => void;\r\n    }\r\n  | false;\r\n\r\n/**\r\n * Configuration for the `useSendTransaction` hook.\r\n */\r\nexport type SendTransactionConfig = {\r\n  /**\r\n   * Refer to [`SendTransactionPayModalConfig`](https://portal.thirdweb.com/references/typescript/v5/SendTransactionPayModalConfig) for more details.\r\n   */\r\n  payModal?: SendTransactionPayModalConfig;\r\n\r\n  /**\r\n   * Configuration for gasless transactions.\r\n   * Refer to [`GaslessOptions`](https://portal.thirdweb.com/references/typescript/v5/GaslessOptions) for more details.\r\n   */\r\n  gasless?: GaslessOptions;\r\n};\r\n\r\nexport type ShowModalData = {\r\n  tx: PreparedTransaction;\r\n  sendTx: () => void;\r\n  rejectTx: (reason: Error) => void;\r\n  resolveTx: (data: WaitForReceiptOptions) => void;\r\n};\r\n\r\n/**\r\n * A hook to send a transaction.\r\n * @returns A mutation object to send a transaction.\r\n * @example\r\n * ```jsx\r\n * import { useSendTransaction } from \"thirdweb/react\";\r\n * const { mutate: sendTx, data: transactionResult } = useSendTransaction();\r\n *\r\n * // later\r\n * sendTx(tx);\r\n * ```\r\n * @internal\r\n */\r\nexport function useSendTransactionCore(args: {\r\n  showPayModal?: (data: ShowModalData) => void;\r\n  gasless?: GaslessOptions;\r\n  wallet: Wallet | undefined;\r\n  switchChain: (chain: Chain) => Promise<void>;\r\n}): UseMutationResult<WaitForReceiptOptions, Error, PreparedTransaction> {\r\n  const { showPayModal, gasless, wallet, switchChain } = args;\r\n  let _account = wallet?.getAccount();\r\n\r\n  return useMutation({\r\n    mutationFn: async (tx) => {\r\n      // switch chain if needed\r\n      if (wallet && tx.chain.id !== wallet.getChain()?.id) {\r\n        await switchChain(tx.chain);\r\n        // in smart wallet case, account may change after chain switch\r\n        _account = wallet.getAccount();\r\n      }\r\n\r\n      const account = _account;\r\n\r\n      if (!account) {\r\n        throw new Error(\"No active account\");\r\n      }\r\n\r\n      if (!showPayModal) {\r\n        return sendTransaction({\r\n          transaction: tx,\r\n          account,\r\n          gasless,\r\n        });\r\n      }\r\n\r\n      return new Promise<WaitForReceiptOptions>((resolve, reject) => {\r\n        const sendTx = async () => {\r\n          try {\r\n            const res = await sendTransaction({\r\n              transaction: tx,\r\n              account,\r\n              gasless,\r\n            });\r\n\r\n            resolve(res);\r\n          } catch (e) {\r\n            reject(e);\r\n          }\r\n        };\r\n\r\n        (async () => {\r\n          try {\r\n            const [_nativeValue, _erc20Value] = await Promise.all([\r\n              resolvePromisedValue(tx.value),\r\n              resolvePromisedValue(tx.erc20Value),\r\n            ]);\r\n            const nativeValue = _nativeValue || 0n;\r\n            const erc20Value = _erc20Value?.amountWei || 0n;\r\n\r\n            const [nativeBalance, erc20Balance, gasCost] = await Promise.all([\r\n              getWalletBalance({\r\n                client: tx.client,\r\n                address: account.address,\r\n                chain: tx.chain,\r\n              }),\r\n              _erc20Value?.tokenAddress\r\n                ? getTokenBalance({\r\n                    client: tx.client,\r\n                    account,\r\n                    chain: tx.chain,\r\n                    tokenAddress: _erc20Value.tokenAddress,\r\n                  })\r\n                : undefined,\r\n              getTotalTxCostForBuy(tx, account.address),\r\n            ]);\r\n\r\n            const gasSponsored = hasSponsoredTransactionsEnabled(wallet);\r\n            const txGasCost = gasSponsored ? 0n : gasCost;\r\n            const nativeCost = nativeValue + txGasCost;\r\n\r\n            const shouldShowModal =\r\n              (erc20Value > 0n &&\r\n                erc20Balance &&\r\n                erc20Balance.value < erc20Value) ||\r\n              (nativeCost > 0n && nativeBalance.value < nativeCost);\r\n\r\n            if (shouldShowModal) {\r\n              showPayModal({\r\n                tx,\r\n                sendTx,\r\n                rejectTx: reject,\r\n                resolveTx: resolve,\r\n              });\r\n            } else {\r\n              sendTx();\r\n            }\r\n          } catch (e) {\r\n            console.error(\"Failed to estimate cost\", e);\r\n            // send it anyway?\r\n            sendTx();\r\n          }\r\n        })();\r\n      });\r\n    },\r\n  });\r\n}\r\n\r\nasync function getTotalTxCostForBuy(tx: PreparedTransaction, from?: string) {\r\n  try {\r\n    const gasCost = await estimateGasCost({\r\n      transaction: tx,\r\n      from,\r\n    });\r\n\r\n    const bufferCost = gasCost.wei / 10n;\r\n\r\n    // Note: get tx.value AFTER estimateGasCost\r\n    const txValue = await resolvePromisedValue(tx.value);\r\n\r\n    // add 10% extra gas cost to the estimate to ensure user buys enough to cover the tx cost\r\n    return gasCost.wei + bufferCost + (txValue || 0n);\r\n  } catch {\r\n    if (from) {\r\n      // try again without passing from\r\n      return await getTotalTxCostForBuy(tx);\r\n    }\r\n    // fallback if both fail, use the tx value + 2M * gas price\r\n    const value = await resolvePromisedValue(tx.value);\r\n\r\n    const gasPrice = await getGasPrice({\r\n      client: tx.client,\r\n      chain: tx.chain,\r\n    });\r\n\r\n    const buffer = 2_000_000n * gasPrice;\r\n\r\n    if (!value) {\r\n      return 0n + buffer;\r\n    }\r\n    return value + buffer;\r\n  }\r\n}\r\n", "import { useQuery } from \"@tanstack/react-query\";\r\nimport { useState } from \"react\";\r\nimport { trackPayEvent } from \"../../../../analytics/track.js\";\r\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\r\nimport type { WaitForReceiptOptions } from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport { CustomThemeProvider } from \"../../../core/design-system/CustomThemeProvider.js\";\r\nimport type { Theme } from \"../../../core/design-system/index.js\";\r\nimport type { PayUIOptions } from \"../../../core/hooks/connection/ConnectButtonProps.js\";\r\nimport { useActiveAccount } from \"../../../core/hooks/wallets/useActiveAccount.js\";\r\nimport { useActiveWallet } from \"../../../core/hooks/wallets/useActiveWallet.js\";\r\nimport type { SupportedTokens } from \"../../../core/utils/defaultTokens.js\";\r\nimport { LoadingScreen } from \"../../wallets/shared/LoadingScreen.js\";\r\nimport { useConnectLocale } from \"../ConnectWallet/locale/getConnectLocale.js\";\r\nimport { LazyBuyScreen } from \"../ConnectWallet/screens/Buy/LazyBuyScreen.js\";\r\nimport { Modal } from \"../components/Modal.js\";\r\nimport type { LocaleId } from \"../types.js\";\r\nimport { ExecutingTxScreen } from \"./ExecutingScreen.js\";\r\n\r\ntype ModalProps = {\r\n  title: string;\r\n  onComplete: () => void;\r\n  onClose: () => void;\r\n  client: ThirdwebClient;\r\n  localeId: LocaleId;\r\n  supportedTokens?: SupportedTokens;\r\n  theme: Theme | \"light\" | \"dark\";\r\n  tx: PreparedTransaction;\r\n  payOptions: PayUIOptions;\r\n  onTxSent: (data: WaitForReceiptOptions) => void;\r\n};\r\n\r\nexport function TransactionModal(props: ModalProps) {\r\n  const account = useActiveAccount();\r\n  const wallet = useActiveWallet();\r\n\r\n  useQuery({\r\n    queryKey: [\"transaction-modal-event\"],\r\n    queryFn: () => {\r\n      if (!account || !wallet) return;\r\n      trackPayEvent({\r\n        client: props.client,\r\n        walletAddress: account.address,\r\n        walletType: wallet.id,\r\n        event: \"open_pay_transaction_modal\",\r\n      });\r\n    },\r\n    enabled: !!wallet,\r\n  });\r\n\r\n  return (\r\n    <CustomThemeProvider theme={props.theme}>\r\n      <Modal\r\n        open={true}\r\n        size=\"compact\"\r\n        setOpen={(_open) => {\r\n          if (!_open) {\r\n            props.onClose();\r\n          }\r\n        }}\r\n      >\r\n        <TransactionModalContent {...props} />\r\n      </Modal>\r\n    </CustomThemeProvider>\r\n  );\r\n}\r\n\r\nfunction TransactionModalContent(props: ModalProps & { onBack?: () => void }) {\r\n  const localeQuery = useConnectLocale(props.localeId);\r\n  const [screen, setScreen] = useState<\"buy\" | \"execute-tx\">(\"buy\");\r\n\r\n  if (!localeQuery.data) {\r\n    return <LoadingScreen />;\r\n  }\r\n\r\n  if (screen === \"execute-tx\") {\r\n    return (\r\n      <ExecutingTxScreen\r\n        tx={props.tx}\r\n        closeModal={props.onClose}\r\n        onTxSent={props.onTxSent}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <LazyBuyScreen\r\n      title={props.title}\r\n      isEmbed={false}\r\n      client={props.client}\r\n      onBack={props.onBack}\r\n      supportedTokens={props.supportedTokens}\r\n      connectLocale={localeQuery.data}\r\n      theme={typeof props.theme === \"string\" ? props.theme : props.theme.type}\r\n      payOptions={props.payOptions}\r\n      onDone={() => {\r\n        setScreen(\"execute-tx\");\r\n      }}\r\n      connectOptions={undefined}\r\n    />\r\n  );\r\n}\r\n", "import { CheckCircledIcon, ExternalLinkIcon } from \"@radix-ui/react-icons\";\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport type { Hex } from \"viem\";\r\nimport type { WaitForReceiptOptions } from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport { iconSize } from \"../../../core/design-system/index.js\";\r\nimport { useChainExplorers } from \"../../../core/hooks/others/useChainQuery.js\";\r\nimport { useSendTransaction } from \"../../hooks/transaction/useSendTransaction.js\";\r\nimport { AccentFailIcon } from \"../ConnectWallet/icons/AccentFailIcon.js\";\r\nimport { Spacer } from \"../components/Spacer.js\";\r\nimport { Spinner } from \"../components/Spinner.js\";\r\nimport { Container, ModalHeader } from \"../components/basic.js\";\r\nimport { Button, ButtonLink } from \"../components/buttons.js\";\r\nimport { Text } from \"../components/text.js\";\r\n\r\nexport function ExecutingTxScreen(props: {\r\n  tx: PreparedTransaction;\r\n  closeModal: () => void;\r\n  onTxSent: (data: WaitForReceiptOptions) => void;\r\n  onBack?: () => void;\r\n}) {\r\n  const sendTxCore = useSendTransaction({\r\n    payModal: false,\r\n  });\r\n  const [txHash, setTxHash] = useState<Hex | undefined>();\r\n  const chainExplorers = useChainExplorers(props.tx.chain);\r\n  const [status, setStatus] = useState<\"loading\" | \"failed\" | \"sent\">(\r\n    \"loading\",\r\n  );\r\n\r\n  const sendTx = useCallback(async () => {\r\n    setStatus(\"loading\");\r\n    try {\r\n      const txData = await sendTxCore.mutateAsync(props.tx);\r\n      setTxHash(txData.transactionHash);\r\n      props.onTxSent(txData);\r\n      setStatus(\"sent\");\r\n    } catch (e) {\r\n      // Do not reject the transaction here, because the user may want to try again\r\n      // we only reject on modal close\r\n      console.error(e);\r\n      setStatus(\"failed\");\r\n    }\r\n  }, [sendTxCore, props.tx, props.onTxSent]);\r\n\r\n  const done = useRef(false);\r\n  useEffect(() => {\r\n    if (done.current) {\r\n      return;\r\n    }\r\n\r\n    done.current = true;\r\n    sendTx();\r\n  }, [sendTx]);\r\n\r\n  return (\r\n    <Container p=\"lg\">\r\n      <ModalHeader title=\"Transaction\" onBack={props.onBack} />\r\n\r\n      <Spacer y=\"xxl\" />\r\n      <Spacer y=\"xxl\" />\r\n\r\n      <Container flex=\"row\" center=\"x\">\r\n        {status === \"loading\" && <Spinner size=\"xxl\" color=\"accentText\" />}\r\n        {status === \"failed\" && <AccentFailIcon size={iconSize[\"3xl\"]} />}\r\n        {status === \"sent\" && (\r\n          <Container color=\"success\" flex=\"row\" center=\"both\">\r\n            <CheckCircledIcon\r\n              width={iconSize[\"3xl\"]}\r\n              height={iconSize[\"3xl\"]}\r\n            />\r\n          </Container>\r\n        )}\r\n      </Container>\r\n      <Spacer y=\"lg\" />\r\n\r\n      <Text color=\"primaryText\" center size=\"lg\">\r\n        {status === \"loading\" && \"Sending transaction\"}\r\n        {status === \"failed\" && \"Transaction failed\"}\r\n        {status === \"sent\" && \"Transaction sent\"}\r\n      </Text>\r\n      <Spacer y=\"sm\" />\r\n      <Text color=\"danger\" center size=\"sm\">\r\n        {status === \"failed\" && sendTxCore.error\r\n          ? sendTxCore.error.message\r\n          : \"\"}\r\n      </Text>\r\n\r\n      <Spacer y=\"xxl\" />\r\n      <Spacer y=\"xxl\" />\r\n\r\n      {status === \"failed\" && (\r\n        <Button variant=\"accent\" fullWidth onClick={sendTx}>\r\n          Try Again\r\n        </Button>\r\n      )}\r\n\r\n      {status === \"sent\" && (\r\n        <>\r\n          <Button variant=\"accent\" fullWidth onClick={props.closeModal}>\r\n            Done\r\n          </Button>\r\n          {txHash && (\r\n            <>\r\n              <Spacer y=\"sm\" />\r\n              <ButtonLink\r\n                fullWidth\r\n                variant=\"outline\"\r\n                href={`${chainExplorers.explorers[0]?.url}/tx/${txHash}`}\r\n                target=\"_blank\"\r\n                as=\"a\"\r\n                gap=\"xs\"\r\n                style={{\r\n                  textDecoration: \"none\",\r\n                  color: \"inherit\",\r\n                }}\r\n              >\r\n                View on Explorer\r\n                <ExternalLinkIcon width={iconSize.sm} height={iconSize.sm} />\r\n              </ButtonLink>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n", "\"use client\";\r\nimport { CustomThemeProvider } from \"../../../core/design-system/CustomThemeProvider.js\";\r\nimport {\r\n  type TransactionButtonProps,\r\n  useTransactionButtonMutation,\r\n} from \"../../../core/hooks/transaction/transaction-button-utils.js\";\r\nimport { useActiveAccount } from \"../../../core/hooks/wallets/useActiveAccount.js\";\r\nimport { useSendTransaction } from \"../../hooks/transaction/useSendTransaction.js\";\r\nimport { Spinner } from \"../components/Spinner.js\";\r\nimport { Button } from \"../components/buttons.js\";\r\n\r\n/**\r\n * TransactionButton component is used to render a button that triggers a transaction.\r\n * It shows a \"Switch Network\" button if the connected wallet is on a different chain than the transaction.\r\n * @param props - The props for this component.\r\n * Refer to [TransactionButtonProps](https://portal.thirdweb.com/references/typescript/v5/TransactionButtonProps) for details.\r\n * @example\r\n *\r\n * ### Basic usage\r\n * ```tsx\r\n * <TransactionButton\r\n *   transaction={() => {}}\r\n *   onTransactionConfirmed={handleSuccess}\r\n *   onError={handleError}\r\n * >\r\n *   Confirm Transaction\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### Customize the styling by passing the `unstyled` prop and your inline styles and/or classes:\r\n * ```tsx\r\n * <TransactionButton\r\n *   transaction={() => {}}\r\n *   unstyled\r\n *   className=\"bg-white text-black rounded-md p-4 flex items-center justify-center\"\r\n * >\r\n *   Confirm Transaction\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### Handle errors\r\n * ```tsx\r\n * <TransactionButton\r\n *   transaction={() => ...}\r\n *   onError={(err) => {\r\n *     alert(err.message);\r\n *     // Add your own logic here\r\n *   }}\r\n * >\r\n *   Confirm Transaction\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### Alert when a transaction is sent\r\n * ```tsx\r\n * <TransactionButton\r\n *   transaction={() => ...}\r\n *   onTransactionSent={(tx) => {\r\n *     alert(\"transaction sent!\");\r\n *     // Add your own logic here. For example, a toast\r\n *   }}\r\n * >\r\n *   Confirm Transaction\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### Alert when a transaction is completed\r\n * ```tsx\r\n * <TransactionButton\r\n *   transaction={() => ...}\r\n *   onTransactionConfirmed={(tx) => {\r\n *     alert(\"transaction sent!\");\r\n *     console.log(tx);\r\n *     // Add your own logic here. For example, a toast\r\n *   }}\r\n * >\r\n *   Confirm Transaction\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### The onClick prop, if provided, will be called before the transaction is sent.\r\n * ```tsx\r\n * <TransactionButton\r\n *   onClick={() => alert(\"Transaction is about to be sent\")}\r\n *   transaction={...}\r\n * >\r\n *   ...\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### Attach custom Pay metadata\r\n * ```tsx\r\n * <TransactionButton\r\n *   payModal={{\r\n *     // This image & title will show up in the Pay modal\r\n *     metadata: {\r\n *       name: \"Van Gogh Starry Night\",\r\n *       image: \"https://unsplash.com/starry-night.png\"\r\n *     }\r\n *   }}\r\n * >\r\n *   ...\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### Gasless usage with [thirdweb Engine](https://portal.thirdweb.com/engine)\r\n * ```tsx\r\n * <TransactionButton\r\n *   gasless={{\r\n *     provider: \"engine\",\r\n *     relayerUrl: \"https://thirdweb.engine-***.thirdweb.com/relayer/***\",\r\n *     relayerForwarderAddress: \"0x...\",\r\n *   }}\r\n * >\r\n *   ...\r\n * </TransactionButton>\r\n * ```\r\n *\r\n * ### Gasless usage with OpenZeppelin\r\n * ```tsx\r\n * <TransactionButton\r\n *   gasless={{\r\n *     provider: \"openzeppelin\",\r\n *     relayerUrl: \"https://...\",\r\n *     relayerForwarderAddress: \"0x...\",\r\n *   }}\r\n * >\r\n *   ...\r\n * </TransactionButton>\r\n * ```\r\n * @component\r\n */\r\nexport function TransactionButton(props: TransactionButtonProps) {\r\n  const {\r\n    children,\r\n    transaction,\r\n    onTransactionSent,\r\n    onTransactionConfirmed,\r\n    onError,\r\n    onClick,\r\n    gasless,\r\n    payModal,\r\n    disabled,\r\n    unstyled,\r\n    ...buttonProps\r\n  } = props;\r\n  const account = useActiveAccount();\r\n  const sendTransaction = useSendTransaction({ gasless, payModal });\r\n  const { mutate: handleClick, isPending } = useTransactionButtonMutation(\r\n    props,\r\n    sendTransaction.mutateAsync,\r\n  );\r\n\r\n  return (\r\n    <CustomThemeProvider theme={props.theme}>\r\n      <Button\r\n        gap=\"xs\"\r\n        disabled={!account || disabled || isPending}\r\n        variant=\"primary\"\r\n        unstyled={unstyled}\r\n        data-is-loading={isPending}\r\n        onClick={() => handleClick()}\r\n        {...buttonProps}\r\n        style={\r\n          !unstyled\r\n            ? {\r\n                opacity: !account || disabled ? 0.5 : 1,\r\n                minWidth: \"165px\",\r\n                position: \"relative\",\r\n                ...buttonProps.style,\r\n              }\r\n            : {\r\n                position: \"relative\",\r\n                ...buttonProps.style,\r\n              }\r\n        }\r\n      >\r\n        <span style={{ visibility: isPending ? \"hidden\" : \"visible\" }}>\r\n          {children}\r\n        </span>\r\n        {isPending && (\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              height: \"100%\",\r\n              top: 0,\r\n              bottom: 0,\r\n              margin: \"auto\",\r\n            }}\r\n          >\r\n            <Spinner size=\"md\" color=\"primaryButtonText\" />\r\n          </div>\r\n        )}\r\n      </Button>\r\n    </CustomThemeProvider>\r\n  );\r\n}\r\n", "\"use client\";\r\nimport { useMemo } from \"react\";\r\nimport { webLocalStorage } from \"../../../utils/storage/webStorage.js\";\r\nimport {\r\n  type ConnectionManager,\r\n  createConnectionManager,\r\n} from \"../../../wallets/manager/index.js\";\r\nimport { ThirdwebProviderCore } from \"../../core/providers/thirdweb-provider.js\";\r\n\r\n/**\r\n * The ThirdwebProvider is component is a provider component that sets up the React Query client.\r\n * @param props - The props for the ThirdwebProvider\r\n * @example\r\n * ```jsx\r\n * import { ThirdwebProvider } from \"thirdweb/react\";\r\n *\r\n * function Example() {\r\n *  return (\r\n *    <ThirdwebProvider>\r\n *      <App />\r\n *    </ThirdwebProvider>\r\n *   )\r\n * }\r\n * ```\r\n * @component\r\n */\r\nexport function ThirdwebProvider(\r\n  props: React.PropsWithChildren<{\r\n    connectionManager?: ConnectionManager;\r\n  }>,\r\n) {\r\n  const connectionManager = useMemo(\r\n    () => props.connectionManager || createConnectionManager(webLocalStorage),\r\n    [props.connectionManager],\r\n  );\r\n\r\n  return (\r\n    <ThirdwebProviderCore manager={connectionManager}>\r\n      {props.children}\r\n    </ThirdwebProviderCore>\r\n  );\r\n}\r\n", "\"use client\";\r\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\r\nimport { useState } from \"react\";\r\nimport { waitForReceipt } from \"../../../transaction/actions/wait-for-tx-receipt.js\";\r\nimport { isBaseTransactionOptions } from \"../../../transaction/types.js\";\r\nimport type { Hex } from \"../../../utils/encoding/hex.js\";\r\nimport { isObjectWithKeys } from \"../../../utils/type-guards.js\";\r\nimport type { ConnectionManager } from \"../../../wallets/manager/index.js\";\r\nimport { structuralSharing } from \"../utils/structuralSharing.js\";\r\nimport { SetRootElementContext } from \"./RootElementContext.js\";\r\nimport { ConnectionManagerCtx } from \"./connection-manager.js\";\r\nimport { invalidateWalletBalance } from \"./invalidateWalletBalance.js\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function ThirdwebProviderCore(props: {\r\n  manager: ConnectionManager;\r\n  children: React.ReactNode;\r\n}) {\r\n  const [el, setEl] = useState<React.ReactNode>(null);\r\n  const [queryClient] = useState(\r\n    () =>\r\n      new QueryClient({\r\n        defaultOptions: {\r\n          mutations: {\r\n            onSettled: (data, _error, variables) => {\r\n              if (isBaseTransactionOptions(variables)) {\r\n                if (\r\n                  isObjectWithKeys(data, [\"transactionHash\"]) &&\r\n                  isObjectWithKeys(variables, [\"client\", \"chain\"])\r\n                ) {\r\n                  waitForReceipt({\r\n                    transactionHash: data.transactionHash as Hex, // We know it exists from the if\r\n                    client: variables.client,\r\n                    chain: variables.chain,\r\n                  })\r\n                    .catch((e) => {\r\n                      // swallow errors for receipts, but log\r\n                      console.error(\"[Transaction Error]\", e);\r\n                    })\r\n                    .then(() => {\r\n                      return Promise.all([\r\n                        queryClient.invalidateQueries({\r\n                          queryKey:\r\n                            // invalidate any readContract queries for this chainId:contractAddress\r\n                            [\r\n                              \"readContract\",\r\n                              variables.__contract?.chain.id,\r\n                              variables.__contract?.address,\r\n                            ] as const,\r\n                        }),\r\n                        invalidateWalletBalance(\r\n                          queryClient,\r\n                          variables.__contract?.chain.id,\r\n                        ),\r\n                      ]);\r\n                    });\r\n                }\r\n              }\r\n            },\r\n          },\r\n          queries: {\r\n            // With SSR, we usually want to set some default staleTime\r\n            // above 0 to avoid refetching immediately on the client\r\n            staleTime: 60 * 1000,\r\n            structuralSharing,\r\n          },\r\n        },\r\n      }),\r\n  );\r\n\r\n  return (\r\n    <ConnectionManagerCtx.Provider value={props.manager}>\r\n      <QueryClientProvider client={queryClient}>\r\n        <SetRootElementContext.Provider value={setEl}>\r\n          {props.children}\r\n        </SetRootElementContext.Provider>\r\n        {el}\r\n      </QueryClientProvider>\r\n    </ConnectionManagerCtx.Provider>\r\n  );\r\n}\r\n", "import { replaceEqualDeep } from \"@tanstack/react-query\";\r\n\r\n/** Forked from https://github.com/epoberezkin/fast-deep-equal */\r\n// biome-ignore lint/suspicious/noExplicitAny: This function by nature takes any object\r\nfunction deepEqual(a: any, b: any) {\r\n  if (a === b) return true;\r\n\r\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\r\n    if (a.constructor !== b.constructor) return false;\r\n\r\n    let length: number;\r\n    let i: number;\r\n\r\n    if (Array.isArray(a) && Array.isArray(b)) {\r\n      length = a.length;\r\n      if (length !== b.length) return false;\r\n      for (i = length; i-- !== 0; ) if (!deepEqual(a[i], b[i])) return false;\r\n      return true;\r\n    }\r\n\r\n    if (a.valueOf !== Object.prototype.valueOf)\r\n      return a.valueOf() === b.valueOf();\r\n    if (a.toString !== Object.prototype.toString)\r\n      return a.toString() === b.toString();\r\n\r\n    const keys = Object.keys(a);\r\n    length = keys.length;\r\n    if (length !== Object.keys(b).length) return false;\r\n\r\n    for (i = length; i-- !== 0; )\r\n      // biome-ignore lint/style/noNonNullAssertion: We know its there\r\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i]!)) return false;\r\n\r\n    for (i = length; i-- !== 0; ) {\r\n      const key = keys[i];\r\n\r\n      if (key && !deepEqual(a[key], b[key])) return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  // true if both NaN, false otherwise\r\n  // biome-ignore lint/suspicious/noSelfCompare: <explanation>\r\n  return a !== a && b !== b;\r\n}\r\n\r\nexport function structuralSharing<T>(oldData: T | undefined, newData: T) {\r\n  if (deepEqual(oldData, newData)) {\r\n    return oldData as T;\r\n  }\r\n  return replaceEqualDeep(oldData, newData) as T;\r\n}\r\n", "import type { Prettify } from \"../../utils/type-utils.js\";\r\nimport { isCoinbaseSDKWallet } from \"../coinbase/coinbaseWebSDK.js\";\r\nimport { isInAppWallet } from \"../in-app/core/wallet/index.js\";\r\nimport { getInjectedProvider } from \"../injected/index.js\";\r\nimport type { Wallet } from \"../interfaces/wallet.js\";\r\nimport { isSmartWallet } from \"../smart/index.js\";\r\nimport { isWalletConnect } from \"../wallet-connect/controller.js\";\r\nimport type { WalletId } from \"../wallet-types.js\";\r\nimport type { WalletCapabilities, WalletCapabilitiesRecord } from \"./types.js\";\r\n\r\nexport type GetCapabilitiesOptions<ID extends WalletId = WalletId> = {\r\n  wallet: Wallet<ID>;\r\n};\r\n\r\nexport type GetCapabilitiesResult = Prettify<\r\n  WalletCapabilitiesRecord<WalletCapabilities, number>\r\n>;\r\n\r\n/**\r\n * Get the capabilities of a wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) specification.\r\n *\r\n * @note This function is dependent on the wallet's support for EIP-5792, but will not throw.\r\n * **The returned object contains a `message` field detailing any issues with the wallet's support for EIP-5792.**\r\n *\r\n * @param {GetCapabilitiesOptions} options\r\n * @param {Wallet} options.wallet - The wallet to get the capabilities of.\r\n * @returns {Promise<GetCapabilitiesResult>} - A promise that resolves to the capabilities of the wallet based on the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) spec.\r\n * @beta\r\n * @example\r\n * ```ts\r\n * import { getCapabilities } from \"thirdweb/wallets/eip5792\";\r\n *\r\n * const wallet = createWallet(\"com.coinbase.wallet\");\r\n * const capabilities = await getCapabilities({ wallet });\r\n * ```\r\n *\r\n * @extension EIP5792\r\n */\r\nexport async function getCapabilities<const ID extends WalletId = WalletId>({\r\n  wallet,\r\n}: GetCapabilitiesOptions<ID>): Promise<GetCapabilitiesResult> {\r\n  const account = wallet.getAccount();\r\n  if (!account) {\r\n    return {\r\n      message: `Can't get capabilities, no account connected for wallet: ${wallet.id}`,\r\n    };\r\n  }\r\n\r\n  if (isSmartWallet(wallet)) {\r\n    const { smartWalletGetCapabilities } = await import(\r\n      \"../smart/lib/smart-wallet-capabilities.js\"\r\n    );\r\n    return smartWalletGetCapabilities({ wallet });\r\n  }\r\n\r\n  if (isInAppWallet(wallet)) {\r\n    const { inAppWalletGetCapabilities } = await import(\r\n      \"../in-app/core/eip5972/in-app-wallet-capabilities.js\"\r\n    );\r\n    return inAppWalletGetCapabilities({ wallet });\r\n  }\r\n\r\n  if (isCoinbaseSDKWallet(wallet)) {\r\n    const { coinbaseSDKWalletGetCapabilities } = await import(\r\n      \"../coinbase/coinbaseWebSDK.js\"\r\n    );\r\n    return coinbaseSDKWalletGetCapabilities({ wallet });\r\n  }\r\n\r\n  // TODO: Add Wallet Connect support\r\n  if (isWalletConnect(wallet)) {\r\n    return {\r\n      message: \"getCapabilities is not yet supported with Wallet Connect\",\r\n    };\r\n  }\r\n\r\n  // Default to injected wallet\r\n  const provider = getInjectedProvider(wallet.id);\r\n\r\n  try {\r\n    return await provider.request({\r\n      method: \"wallet_getCapabilities\",\r\n      params: [account.address],\r\n    });\r\n  } catch (error: unknown) {\r\n    if (/unsupport|not support|not available/i.test((error as Error).message)) {\r\n      return {\r\n        message: `${wallet.id} does not support wallet_getCapabilities, reach out to them directly to request EIP-5792 support.`,\r\n      };\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n", "import { type UseQueryResult, useQuery } from \"@tanstack/react-query\";\r\nimport {\r\n  type GetCapabilitiesResult,\r\n  getCapabilities,\r\n} from \"../../../../wallets/eip5792/get-capabilities.js\";\r\nimport { useActiveWallet } from \"./useActiveWallet.js\";\r\n\r\n/**\r\n * A hook to get the current wallet's capabilities according to [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792).\r\n *\r\n * @note This function is dependent on the wallet's support for EIP-5792, but will not throw.\r\n * **The returned object contains a `message` field detailing any issues with the wallet's support for EIP-5792.**\r\n *\r\n * @returns a React Query object.\r\n * @beta\r\n * @example\r\n * ```tsx\r\n * import { useCapabilities } from \"thirdweb/react\";\r\n * const { data: capabilities, isLoading } = useCapabilities();\r\n * ```\r\n * @extension EIP5792\r\n */\r\nexport function useCapabilities(options?: {\r\n  queryOptions?: {\r\n    enabled?: boolean;\r\n    retry?: number;\r\n  };\r\n}): UseQueryResult<GetCapabilitiesResult> {\r\n  const wallet = useActiveWallet();\r\n  return useQuery({\r\n    queryKey: [\r\n      \"getCapabilities\",\r\n      wallet?.getChain()?.id || -1,\r\n      wallet?.id,\r\n    ] as const,\r\n    queryFn: async () => {\r\n      if (!wallet) {\r\n        return {\r\n          message: \"Can't get capabilities, no wallet connected\",\r\n        } as const;\r\n      }\r\n      return getCapabilities({ wallet });\r\n    },\r\n    retry: false,\r\n    ...options?.queryOptions,\r\n  });\r\n}\r\n", "import type { Abi, AbiFunction } from \"abitype\";\r\nimport type { WalletSendCallsParameters as ViemWalletSendCallsParameters } from \"viem\";\r\nimport type { Chain } from \"../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../client/client.js\";\r\nimport { encode } from \"../../transaction/actions/encode.js\";\r\nimport type { PreparedTransaction } from \"../../transaction/prepare-transaction.js\";\r\nimport { type Address, getAddress } from \"../../utils/address.js\";\r\nimport { type Hex, numberToHex } from \"../../utils/encoding/hex.js\";\r\nimport {\r\n  type PromisedObject,\r\n  resolvePromisedValue,\r\n} from \"../../utils/promise/resolve-promised-value.js\";\r\nimport type { OneOf } from \"../../utils/type-utils.js\";\r\nimport { isCoinbaseSDKWallet } from \"../coinbase/coinbaseWebSDK.js\";\r\nimport { isInAppWallet } from \"../in-app/core/wallet/index.js\";\r\nimport { getInjectedProvider } from \"../injected/index.js\";\r\nimport type { Wallet } from \"../interfaces/wallet.js\";\r\nimport { isSmartWallet } from \"../smart/index.js\";\r\nimport { isWalletConnect } from \"../wallet-connect/controller.js\";\r\nimport type { WalletId } from \"../wallet-types.js\";\r\nimport type {\r\n  EIP5792Call,\r\n  WalletSendCallsId,\r\n  WalletSendCallsParameters,\r\n} from \"./types.js\";\r\n\r\ntype WalletCall = OneOf<{\r\n  to?: string | undefined; // TODO: Make this required but compatible with StaticPrepareTransactionOptions to prevent runtime error\r\n  data?: Hex | undefined;\r\n  value?: bigint | undefined;\r\n}>;\r\n\r\nexport type PreparedSendCall<\r\n  abi extends Abi = [],\r\n  abiFunction extends AbiFunction = AbiFunction,\r\n> = PreparedTransaction<abi, abiFunction, PrepareCallOptions>;\r\n\r\nexport type PrepareCallOptions = {\r\n  chain: Chain;\r\n  client: ThirdwebClient;\r\n} & PromisedObject<WalletCall>;\r\n\r\nexport type SendCallsOptions<\r\n  ID extends WalletId = WalletId,\r\n  abi extends Abi = [],\r\n  abiFunction extends AbiFunction = AbiFunction,\r\n> = {\r\n  wallet: Wallet<ID>;\r\n  calls: PreparedSendCall<abi, abiFunction>[];\r\n  capabilities?: WalletSendCallsParameters[number][\"capabilities\"];\r\n  version?: WalletSendCallsParameters[number][\"version\"];\r\n  chain?: Chain;\r\n};\r\n\r\nexport type SendCallsResult = WalletSendCallsId;\r\n\r\n/**\r\n * Send [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) calls to a wallet.\r\n * This function works with all Thirdweb wallets (in-app and smart) and certain injected wallets that already support EIP-5792.\r\n * Transactions will be bundled and sponsored when those capabilities are supported, otherwise they will be sent as individual transactions.\r\n *\r\n * @note This function is dependent on the wallet's support for EIP-5792 and could fail.\r\n *\r\n * @param {SendCallsOptions} options\r\n * @param {Wallet} options.wallet - The wallet to send the calls to.\r\n * @param {PreparedSendCall[]} options.calls - An array of prepared transactions to send.\r\n * @param {WalletSendCallsParameters[number][\"capabilities\"]} [options.capabilities] - Capabilities objects to use, see the [EIP-5792 spec](https://eips.ethereum.org/EIPS/eip-5792) for details.\r\n * @param {string} [options.version=\"1.0\"] - The `wallet_sendCalls` version to use, defaults to \"1.0\".\r\n * @param {Chain} [options.chain] - A {@link Chain} instance to override the wallet's current chain.\r\n * @throws an error if the wallet does not support EIP-5792.\r\n * @returns The ID of the bundle of the calls.\r\n *\r\n * @see getCallsStatus for how to retrieve the status of the bundle.\r\n * @see getCapabilities for how to retrieve the capabilities of the wallet.\r\n * @beta\r\n * @example\r\n * ```ts\r\n * import { createThirdwebClient } from \"thirdweb\";\r\n * import { sendCalls } from \"thirdweb/wallets/eip5792\";\r\n *\r\n * const client = createThirdwebClient({ clientId: ... });\r\n * const wallet = createWallet(\"com.coinbase.wallet\");\r\n *\r\n * const sendTx1 = approve({\r\n      contract: USDT_CONTRACT,\r\n      amount: 100,\r\n      spender: \"0x33d9B8BEfE81027E2C859EDc84F5636cbb202Ed6\",\r\n    });\r\n * const sendTx2 = approve({\r\n      contract: USDT_CONTRACT,\r\n      amount: 100,\r\n      spender: \"0x2a4f24F935Eb178e3e7BA9B53A5Ee6d8407C0709\",\r\n    });\r\n * const bundleId = await sendCalls({\r\n *   wallet,\r\n *   client,\r\n *   calls: [sendTx1, sendTx2],\r\n * });\r\n * ```\r\n * Sponsor transactions with a paymaster:\r\n * ```ts\r\n * const bundleId = await sendCalls({\r\n *   wallet,\r\n *   client,\r\n *   calls: [send1, send2],\r\n *   capabilities: {\r\n *     paymasterService: {\r\n *       url: `https://${CHAIN.id}.bundler.thirdweb.com/${client.clientId}`\r\n *     }\r\n *   }\r\n * });\r\n * @note We recommend proxying any paymaster calls via an API route you setup and control.\r\n * ```\r\n * @extension EIP5792\r\n */\r\nexport async function sendCalls<const ID extends WalletId>(\r\n  options: SendCallsOptions<ID>,\r\n): Promise<SendCallsResult> {\r\n  const {\r\n    wallet,\r\n    calls,\r\n    capabilities,\r\n    version = \"1.0\",\r\n    chain = wallet.getChain(),\r\n  } = options;\r\n\r\n  if (!chain) {\r\n    throw new Error(\r\n      `Cannot send calls, no active chain found for wallet: ${wallet.id}`,\r\n    );\r\n  }\r\n\r\n  const account = wallet.getAccount();\r\n  if (!account) {\r\n    throw new Error(\r\n      `Cannot send calls, no account connected for wallet: ${wallet.id}`,\r\n    );\r\n  }\r\n\r\n  // These conveniently operate the same\r\n  if (isSmartWallet(wallet) || isInAppWallet(wallet)) {\r\n    const { inAppWalletSendCalls } = await import(\r\n      \"../in-app/core/eip5972/in-app-wallet-calls.js\"\r\n    );\r\n    return inAppWalletSendCalls({ account, calls });\r\n  }\r\n\r\n  const preparedCalls: EIP5792Call[] = await Promise.all(\r\n    calls.map(async (call) => {\r\n      const { to, value } = call;\r\n      if (to === undefined && call.data === undefined) {\r\n        throw new Error(\"Cannot send call, `to` or `data` must be provided.\");\r\n      }\r\n\r\n      const [_to, _data, _value] = await Promise.all([\r\n        resolvePromisedValue(to),\r\n        encode(call),\r\n        resolvePromisedValue(value),\r\n      ]);\r\n\r\n      return {\r\n        to: _to as Address,\r\n        data: _data as Hex,\r\n        value:\r\n          typeof _value === \"bigint\" || typeof _value === \"number\"\r\n            ? numberToHex(_value)\r\n            : undefined,\r\n      };\r\n    }),\r\n  );\r\n\r\n  const injectedWalletCallParams: WalletSendCallsParameters = [\r\n    {\r\n      from: getAddress(account.address),\r\n      calls: preparedCalls,\r\n      capabilities,\r\n      version,\r\n      chainId: numberToHex(chain.id),\r\n    },\r\n  ];\r\n\r\n  if (isCoinbaseSDKWallet(wallet)) {\r\n    const { coinbaseSDKWalletSendCalls } = await import(\r\n      \"../coinbase/coinbaseWebSDK.js\"\r\n    );\r\n    return coinbaseSDKWalletSendCalls({\r\n      wallet,\r\n      params: injectedWalletCallParams,\r\n    });\r\n  }\r\n\r\n  if (isWalletConnect(wallet)) {\r\n    throw new Error(\"sendCalls is not yet supported for Wallet Connect\");\r\n  }\r\n\r\n  // Default to injected wallet\r\n  const provider = getInjectedProvider(wallet.id);\r\n  try {\r\n    return await provider.request({\r\n      method: \"wallet_sendCalls\",\r\n      params: injectedWalletCallParams as ViemWalletSendCallsParameters, // The viem type definition is slightly different\r\n    });\r\n  } catch (error) {\r\n    if (/unsupport|not support/i.test((error as Error).message)) {\r\n      throw new Error(\r\n        `${wallet.id} does not support wallet_sendCalls, reach out to them directly to request EIP-5792 support.`,\r\n      );\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n", "import type { ThirdwebClient } from \"../../client/client.js\";\r\nimport { isCoinbaseSDKWallet } from \"../coinbase/coinbaseWebSDK.js\";\r\nimport { isInAppWallet } from \"../in-app/core/wallet/index.js\";\r\nimport { getInjectedProvider } from \"../injected/index.js\";\r\nimport type { Wallet } from \"../interfaces/wallet.js\";\r\nimport { isSmartWallet } from \"../smart/index.js\";\r\nimport { isWalletConnect } from \"../wallet-connect/controller.js\";\r\nimport type { GetCallsStatusResponse, WalletSendCallsId } from \"./types.js\";\r\n\r\nexport type GetCallsStatusOptions = {\r\n  wallet: Wallet;\r\n  client: ThirdwebClient;\r\n  bundleId: WalletSendCallsId;\r\n};\r\n\r\n/**\r\n * Get the status of an [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) bundle.\r\n *\r\n * @note This function is dependent on the wallet's support for EIP-5792 and could fail.\r\n *\r\n * @param {GetCallsStatusOptions} options\r\n * @param {Wallet} options.wallet - The wallet that send the original calls.\r\n * @param {ThirdwebClient} options.client - A {@link ThirdwebClient} instance.\r\n * @param {WalletSendCallsId} options.bundleId - The ID of the bundle to get the status of.\r\n * @throws an error if the wallet does not support EIP-5792.\r\n * @returns {Promise<GetCallsStatusResponse>} - A promise that resolves to the bundle's status and receipts (if available). {@link GetCallsStatusResponse}\r\n * @beta\r\n * @example\r\n * ```ts\r\n *  import { createThirdwebClient } from \"thirdweb\";\r\n *  import { sendCalls, getCallsStatus } from \"thirdweb/wallets/eip5792\";\r\n *\r\n *  const client = createThirdwebClient({ clientId: ... });\r\n *\r\n *  const bundleId = await sendCalls({ wallet, client, calls });\r\n *\r\n *  let result;\r\n *  while (result.status !== \"CONFIRMED\") {\r\n *    result = await getCallsStatus({ wallet, client, bundleId });\r\n *  }\r\n * ```\r\n * @extension EIP5792\r\n * @extension EIP5792\r\n */\r\nexport async function getCallsStatus({\r\n  wallet,\r\n  client,\r\n  bundleId,\r\n}: GetCallsStatusOptions): Promise<GetCallsStatusResponse> {\r\n  const account = wallet.getAccount();\r\n  if (!account) {\r\n    throw new Error(\r\n      `Failed to get call status, no account found for wallet ${wallet.id}`,\r\n    );\r\n  }\r\n\r\n  // These conveniently operate the same\r\n  if (isSmartWallet(wallet) || isInAppWallet(wallet)) {\r\n    const { inAppWalletGetCallsStatus } = await import(\r\n      \"../in-app/core/eip5972/in-app-wallet-calls.js\"\r\n    );\r\n    return inAppWalletGetCallsStatus({ wallet, client, bundleId });\r\n  }\r\n\r\n  if (isCoinbaseSDKWallet(wallet)) {\r\n    const { coinbaseSDKWalletGetCallsStatus } = await import(\r\n      \"../coinbase/coinbaseWebSDK.js\"\r\n    );\r\n    return coinbaseSDKWalletGetCallsStatus({ wallet, bundleId });\r\n  }\r\n\r\n  if (isWalletConnect(wallet)) {\r\n    throw new Error(\"getCallsStatus is not yet supported for Wallet Connect\");\r\n  }\r\n\r\n  // Default to injected wallet\r\n  const provider = getInjectedProvider(wallet.id);\r\n  try {\r\n    return await provider.request({\r\n      method: \"wallet_getCallsStatus\",\r\n      params: [bundleId],\r\n    });\r\n  } catch (error) {\r\n    if (/unsupport|not support/i.test((error as Error).message)) {\r\n      throw new Error(\r\n        `${wallet.id} does not support wallet_getCallsStatus, reach out to them directly to request EIP-5792 support.`,\r\n      );\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n", "import type { Chain } from \"../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../client/client.js\";\r\nimport { watchBlockNumber } from \"../../rpc/watchBlockNumber.js\";\r\nimport type { Prettify } from \"../../utils/type-utils.js\";\r\nimport type { Wallet } from \"../interfaces/wallet.js\";\r\nimport { getCallsStatus } from \"./get-calls-status.js\";\r\nimport type { GetCallsStatusResponse, WalletSendCallsId } from \"./types.js\";\r\n\r\nconst DEFAULT_MAX_BLOCKS_WAIT_TIME = 100;\r\n\r\nconst map = new Map<string, Promise<GetCallsStatusResponse>>();\r\n\r\nexport type WaitForBundleOptions = Prettify<{\r\n  bundleId: WalletSendCallsId;\r\n  wallet: Wallet;\r\n  client: ThirdwebClient;\r\n  chain: Chain;\r\n  maxBlocksWaitTime?: number;\r\n}>;\r\n\r\n/**\r\n * Waits for the [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) bundle to be confirmed.\r\n *\r\n * @note This function is dependent on the wallet's support for EIP-5792 and could fail.\r\n *\r\n * @param options - The options for waiting for the bundle.\r\n * By default, the max wait time is 100 blocks.\r\n * @returns A promise that resolves with the final {@link getCallsStatus} result.\r\n * @throws an error if the wallet does not support EIP-5792.\r\n * @beta\r\n * @example\r\n * ```ts\r\n * import { waitForBundle } from \"thirdweb/wallets/eip5792\";\r\n * const result = await waitForBundle({\r\n *   client,\r\n *   chain,\r\n *   wallet,\r\n *   bundleId: \"0x123...\",\r\n * });\r\n * ```\r\n * @extension EIP5792\r\n */\r\nexport function waitForBundle(\r\n  options: WaitForBundleOptions,\r\n): Promise<GetCallsStatusResponse> {\r\n  const { bundleId, chain, wallet, client } = options;\r\n\r\n  const chainId = chain.id;\r\n  const key = `${chainId}:calls_${bundleId}`;\r\n  const maxBlocksWaitTime =\r\n    options.maxBlocksWaitTime ?? DEFAULT_MAX_BLOCKS_WAIT_TIME;\r\n\r\n  if (map.has(key)) {\r\n    // biome-ignore lint/style/noNonNullAssertion: the `has` above ensures that this will always be set\r\n    return map.get(key)!;\r\n  }\r\n  const promise = new Promise<GetCallsStatusResponse>((resolve, reject) => {\r\n    // start at -1 because the first block doesn't count\r\n    let blocksWaited = -1;\r\n\r\n    const unwatch = watchBlockNumber({\r\n      client: client,\r\n      chain: chain,\r\n      onNewBlockNumber: async () => {\r\n        blocksWaited++;\r\n        if (blocksWaited >= maxBlocksWaitTime) {\r\n          unwatch();\r\n          reject(\r\n            new Error(`Bundle not confirmed after ${maxBlocksWaitTime} blocks`),\r\n          );\r\n          return;\r\n        }\r\n        try {\r\n          const result = await getCallsStatus({\r\n            wallet,\r\n            client,\r\n            bundleId,\r\n          });\r\n\r\n          if (result.status === \"CONFIRMED\") {\r\n            // stop the polling\r\n            unwatch();\r\n            // resolve the top level promise with the result\r\n            resolve(result);\r\n          }\r\n        } catch {\r\n          // noop, we'll try again on the next blocks\r\n        }\r\n      },\r\n    });\r\n    // remove the promise from the map when it's done (one way or the other)\r\n  }).finally(() => {\r\n    map.delete(key);\r\n  });\r\n\r\n  map.set(key, promise);\r\n  return promise;\r\n}\r\n", "import {\r\n  type UseMutationResult,\r\n  useMutation,\r\n  useQueryClient,\r\n} from \"@tanstack/react-query\";\r\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\r\nimport {\r\n  type SendCallsOptions,\r\n  sendCalls,\r\n} from \"../../../../wallets/eip5792/send-calls.js\";\r\nimport type {\r\n  GetCallsStatusResponse,\r\n  WalletSendCallsId,\r\n} from \"../../../../wallets/eip5792/types.js\";\r\nimport { waitForBundle } from \"../../../../wallets/eip5792/wait-for-bundle.js\";\r\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\r\nimport { invalidateWalletBalance } from \"../../providers/invalidateWalletBalance.js\";\r\nimport { useActiveWallet } from \"./useActiveWallet.js\";\r\n\r\n/**\r\n * A hook to send [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792) calls to a wallet.\r\n * This hook works with all Thirdweb wallets (in-app and smart) and certain injected wallets that already support EIP-5792.\r\n * Transactions will be bundled and sponsored when those capabilities are supported, otherwise they will be sent as individual transactions.\r\n *\r\n * When calls are sent, all contracts that are interacted with will have their corresponding reads revalidated via React Query.\r\n *\r\n * @note This hook is dependent on the wallet's support for EIP-5792 and could fail.\r\n * @note The mutatuon function will use your currently connected wallet by default, but you can pass it a specific wallet to use if you'd like.\r\n *\r\n * @returns A React Query mutatuon object to interact with {@link sendCalls}\r\n * @throws an error if the wallet does not support EIP-5792.\r\n * @returns The ID of the bundle of the calls.\r\n *\r\n * @beta\r\n * @example\r\n * ```tsx\r\n * import { useSendCalls } from \"thirdweb/react\";\r\n *\r\n * const sendTx1 = approve({\r\n      contract: USDT_CONTRACT,\r\n      amount: 100,\r\n      spender: \"0x33d9B8BEfE81027E2C859EDc84F5636cbb202Ed6\",\r\n    });\r\n * const sendTx2 = approve({\r\n      contract: USDT_CONTRACT,\r\n      amount: 100,\r\n      spender: \"0x2a4f24F935Eb178e3e7BA9B53A5Ee6d8407C0709\",\r\n    });\r\n * const { mutate: sendCalls, data: bundleId } = useSendCalls({ client });\r\n * await sendCalls({\r\n *   wallet,\r\n *   client,\r\n *   calls: [sendTx1, sendTx2],\r\n * });\r\n * ```\r\n * Await the bundle's full confirmation:\r\n * ```tsx\r\n * const { mutate: sendCalls, data: bundleId } = useSendCalls({ client, waitForResult: true });\r\n * await sendCalls({\r\n *   wallet,\r\n *   client,\r\n *   calls: [sendTx1, sendTx2],\r\n * });\r\n * ```\r\n * Sponsor transactions with a paymaster:\r\n * ```ts\r\n * const { mutate: sendCalls, data: bundleId } = useSendCalls();\r\n * await sendCalls({\r\n *   client,\r\n *   calls: [sendTx1, sendTx2],\r\n *   capabilities: {\r\n *     paymasterService: {\r\n *       url: `https://${CHAIN.id}.bundler.thirdweb.com/${client.clientId}`\r\n *     }\r\n *   }\r\n * });\r\n * ```\r\n *\r\n * @note We recommend proxying any paymaster calls via an API route you setup and control.\r\n * @extension EIP5792\r\n */\r\nexport function useSendCalls({\r\n  client,\r\n  waitForResult = true,\r\n}: { client: ThirdwebClient; waitForResult?: boolean }): UseMutationResult<\r\n  GetCallsStatusResponse | WalletSendCallsId,\r\n  Error,\r\n  Omit<SendCallsOptions, \"chain\" | \"wallet\"> & { wallet?: Wallet } // Optional wallet override\r\n> {\r\n  const activeWallet = useActiveWallet();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (options) => {\r\n      const { wallet = activeWallet } = options;\r\n      const chain = wallet?.getChain();\r\n      if (!wallet || !chain) {\r\n        throw new Error(\r\n          \"Failed to send transactions, no connected wallet found.\",\r\n        );\r\n      }\r\n\r\n      const callsPromise = sendCalls({ ...options, wallet });\r\n      if (!waitForResult) {\r\n        return callsPromise;\r\n      }\r\n\r\n      const result = await waitForBundle({\r\n        bundleId: await callsPromise,\r\n        wallet,\r\n        client,\r\n        chain,\r\n      });\r\n      return result;\r\n    },\r\n    onSettled: async (_result, _error, variables) => {\r\n      // Attempt to invalidate any reads related to the sent transactions\r\n      const chain = activeWallet?.getChain();\r\n      if (!_result || !activeWallet || !chain) {\r\n        return;\r\n      }\r\n\r\n      if (typeof _result === \"string\") {\r\n        await waitForBundle({\r\n          bundleId: _result,\r\n          wallet: activeWallet,\r\n          client,\r\n          chain,\r\n        }).catch((error) => {\r\n          console.error(\r\n            \"Failed to confirm sent bundle and invalidate queries\",\r\n            _result,\r\n            error,\r\n          );\r\n          return undefined;\r\n        });\r\n      }\r\n\r\n      for (const call of variables.calls) {\r\n        queryClient.invalidateQueries({\r\n          queryKey: [\r\n            \"readContract\",\r\n            call.__contract?.chain.id,\r\n            call.__contract?.address,\r\n          ],\r\n        });\r\n      }\r\n      invalidateWalletBalance(queryClient, chain.id);\r\n    },\r\n  });\r\n}\r\n", "import { type UseQueryResult, useQuery } from \"@tanstack/react-query\";\r\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\r\nimport { getCallsStatus } from \"../../../../wallets/eip5792/get-calls-status.js\";\r\nimport type { GetCallsStatusResponse } from \"../../../../wallets/eip5792/types.js\";\r\nimport { useActiveWallet } from \"./useActiveWallet.js\";\r\n\r\n/**\r\n * A hook to get a call bundle's current status according to [EIP-5792](https://eips.ethereum.org/EIPS/eip-5792).\r\n *\r\n * @note This function is dependent on the wallet's support for EIP-5792 and could throw an error if it's not supported.\r\n *\r\n * @returns a React Query object.\r\n * @beta\r\n * @example\r\n * ```tsx\r\n * import { useCallsStatus } from \"thirdweb/react\";\r\n * const { data: status, isLoading } = useCallsStatus({ bundleId, client });\r\n * ```\r\n * @extension EIP5792\r\n */\r\nexport function useCallsStatus(options: {\r\n  bundleId: string;\r\n  client: ThirdwebClient;\r\n  queryOptions?: {\r\n    enabled?: boolean;\r\n    retry?: number;\r\n  };\r\n}): UseQueryResult<GetCallsStatusResponse> {\r\n  const { client, bundleId } = options;\r\n  const wallet = useActiveWallet();\r\n\r\n  return useQuery({\r\n    queryKey: [\r\n      \"getCapabilities\",\r\n      wallet?.getChain()?.id || -1,\r\n      wallet?.id,\r\n    ] as const,\r\n    queryFn: async () => {\r\n      if (!wallet) {\r\n        throw new Error(\"Failed to get calls status, no wallet connected\");\r\n      }\r\n      return getCallsStatus({ wallet, client, bundleId });\r\n    },\r\n    retry: false,\r\n    enabled: !!bundleId && wallet !== undefined,\r\n    ...options.queryOptions,\r\n  });\r\n}\r\n", "import { useMutation } from \"@tanstack/react-query\";\r\nimport { isEcosystemWallet } from \"../../../../wallets/ecosystem/is-ecosystem-wallet.js\";\r\nimport type { AuthArgsType } from \"../../../../wallets/in-app/core/authentication/types.js\";\r\nimport type { Ecosystem } from \"../../../../wallets/in-app/core/wallet/types.js\";\r\nimport { linkProfile } from \"../../../../wallets/in-app/web/lib/auth/index.js\";\r\nimport { useAdminWallet } from \"../../../core/hooks/wallets/useAdminWallet.js\";\r\n\r\n/**\r\n * Links a web2 or web3 profile to the connected in-app or ecosystem account.\r\n * **When a profile is linked to the account, that profile can then be used to sign into the same account.**\r\n *\r\n * @example\r\n *\r\n * ### Linking a social profile\r\n *\r\n * ```jsx\r\n * import { useLinkProfile } from \"thirdweb/react\";\r\n *\r\n * const { mutate: linkProfile } = useLinkProfile();\r\n *\r\n * const onClick = () => {\r\n *   linkProfile({\r\n *     client,\r\n *     strategy: \"discord\", // or \"google\", \"x\", \"telegram\", etc\r\n *   });\r\n * };\r\n * ```\r\n *\r\n * ### Linking an email\r\n *\r\n * ```jsx\r\n * import { useLinkProfile } from \"thirdweb/react\";\r\n * import { preAuthenticate } from \"thirdweb/wallets\";\r\n *\r\n * const { mutate: linkProfile } = useLinkProfile();\r\n *\r\n * // send a verification email first\r\n * const sendEmail = async () => {\r\n *   const email = await preAuthenticate({\r\n *     client,\r\n *     strategy: \"email\",\r\n *     email: \"john.doe@example.com\",\r\n *   });\r\n * };\r\n *\r\n * // then link the profile with the verification code\r\n * const onClick = (code: string) => {\r\n *   linkProfile({\r\n *     client,\r\n *     strategy: \"email\",\r\n *     email: \"john.doe@example.com\",\r\n *     verificationCode: code,\r\n *   });\r\n * };\r\n * ```\r\n *\r\n * The same process can be used for phone and email, simply swap out the `strategy` parameter.\r\n *\r\n * ### Linking a wallet\r\n *\r\n * ```jsx\r\n * import { useLinkProfile } from \"thirdweb/react\";\r\n *\r\n * const { mutate: linkProfile } = useLinkProfile();\r\n *\r\n * const onClick = () => {\r\n *   linkProfile({\r\n *     client,\r\n *     strategy: \"wallet\",\r\n *     wallet: createWallet(\"io.metamask\"), // autocompletion for 400+ wallet ids\r\n *     chain: sepolia, // any chain works, needed for SIWE signature\r\n *   });\r\n * };\r\n * ```\r\n *\r\n * @wallet\r\n */\r\nexport function useLinkProfile() {\r\n  const wallet = useAdminWallet();\r\n  return useMutation({\r\n    mutationKey: [\"profiles\"],\r\n    mutationFn: async (options: AuthArgsType) => {\r\n      const ecosystem: Ecosystem | undefined =\r\n        wallet && isEcosystemWallet(wallet)\r\n          ? { id: wallet.id, partnerId: wallet.getConfig()?.partnerId }\r\n          : undefined;\r\n      const optionsWithEcosystem = { ...options, ecosystem } as AuthArgsType;\r\n      return linkProfile(optionsWithEcosystem);\r\n    },\r\n  });\r\n}\r\n", "import { randomBytesHex } from \"./random.js\";\r\n\r\n// biome-ignore lint/suspicious/noExplicitAny: the whoel point here is to accept anything\r\ntype AnyFunction = (...args: any[]) => any;\r\n\r\nconst functionIdCache = new Map<AnyFunction, string>();\r\n\r\n/**\r\n * Retrieves the unique identifier for a given function.\r\n * If the function has been previously cached, the cached identifier is returned.\r\n * Otherwise, a new identifier is generated using the function's string representation.\r\n * @param fn - The function for which to retrieve the identifier.\r\n * @returns The unique identifier for the function.\r\n * @internal\r\n */\r\nexport function getFunctionId(fn: AnyFunction) {\r\n  if (functionIdCache.has(fn)) {\r\n    // biome-ignore lint/style/noNonNullAssertion: the `has` above ensures that this will always be set\r\n    return functionIdCache.get(fn)!;\r\n  }\r\n  const id = randomBytesHex();\r\n  functionIdCache.set(fn, id);\r\n  return id;\r\n}\r\n", "import {\r\n  type UseQueryResult,\r\n  queryOptions as defineQuery,\r\n  useQuery,\r\n} from \"@tanstack/react-query\";\r\nimport type { Abi, AbiFunction, ExtractAbiFunctionNames } from \"abitype\";\r\nimport type { ThirdwebContract } from \"../../../../contract/contract.js\";\r\nimport {\r\n  type ReadContractOptions,\r\n  type ReadContractResult,\r\n  readContract,\r\n} from \"../../../../transaction/read-contract.js\";\r\nimport type {\r\n  BaseTransactionOptions,\r\n  ParseMethod,\r\n} from \"../../../../transaction/types.js\";\r\nimport type { PreparedMethod } from \"../../../../utils/abi/prepare-method.js\";\r\nimport { getFunctionId } from \"../../../../utils/function-id.js\";\r\nimport { stringify } from \"../../../../utils/json.js\";\r\n\r\ntype PickedQueryOptions = {\r\n  enabled?: boolean;\r\n  refetchInterval?: number;\r\n  retry?: number;\r\n};\r\n\r\n/**\r\n * A hook to read state from a contract that automatically updates when the contract changes.\r\n *\r\n * You can use raw read calls or read [extensions](https://portal.thirdweb.com/react/v5/extensions) to read from a contract.\r\n *\r\n * @param options - The options for reading from a contract\r\n * @returns a UseQueryResult object.\r\n * @example\r\n * ```jsx\r\n * import { getContract } from \"thirdweb\";\r\n * import { sepolia } from \"thirdweb/chains\";\r\n * import { useReadContract } from \"thirdweb/react\";\r\n *\r\n * const contract = getContract({\r\n *   client,\r\n *   address: \"0x...\",\r\n *   chain: sepolia,\r\n * });\r\n *\r\n * const { data, isLoading } = useReadContract({\r\n *   contract,\r\n *   method: \"function tokenURI(uint256 tokenId) returns (string)\"\r\n *   params: [1n],\r\n * });\r\n * ```\r\n * @contract\r\n */\r\nexport function useReadContract<\r\n  const abi extends Abi,\r\n  const method extends abi extends { length: 0 }\r\n    ? AbiFunction | string\r\n    : ExtractAbiFunctionNames<abi>,\r\n>(\r\n  options: ReadContractOptions<abi, method> & {\r\n    queryOptions?: PickedQueryOptions;\r\n  },\r\n): UseQueryResult<\r\n  ReadContractResult<PreparedMethod<ParseMethod<abi, method>>[2]>\r\n>;\r\n/**\r\n * A hook to read state from a contract that automatically updates when the contract changes.\r\n * You can use raw read calls or read [extensions](https://portal.thirdweb.com/react/v5/extensions) to read from a contract.\r\n *\r\n * @param extension - An extension to call.\r\n * @param options - The read extension params.\r\n * @returns a UseQueryResult object.\r\n * @example\r\n *\r\n * Read a contract extension let you do complex contract queries with less code.\r\n *\r\n * ```jsx\r\n * import { useReadContract } from \"thirdweb/react\";\r\n * import { getOwnedNFTs } form \"thirdweb/extensions/erc721\";\r\n *\r\n * const { data, isLoading } = useReadContract(getOwnedNFTs, { contract, owner: address });\r\n * ```\r\n */\r\nexport function useReadContract<\r\n  const abi extends Abi,\r\n  const params extends object,\r\n  result,\r\n>(\r\n  extension: (options: BaseTransactionOptions<params, abi>) => Promise<result>,\r\n  options: BaseTransactionOptions<params, abi> & {\r\n    queryOptions?: PickedQueryOptions;\r\n  },\r\n): UseQueryResult<result>;\r\n\r\nexport function useReadContract<\r\n  const abi extends Abi,\r\n  const method extends abi extends {\r\n    length: 0;\r\n  }\r\n    ?\r\n        | AbiFunction\r\n        | `function ${string}`\r\n        | ((contract: ThirdwebContract<abi>) => Promise<AbiFunction>)\r\n    : ExtractAbiFunctionNames<abi>,\r\n  const params extends object,\r\n  result,\r\n>(\r\n  extensionOrOptions:\r\n    | ((options: BaseTransactionOptions<params, abi>) => Promise<result>)\r\n    | (ReadContractOptions<abi, method> & {\r\n        queryOptions?: PickedQueryOptions;\r\n      }),\r\n  options?: BaseTransactionOptions<params, abi> & {\r\n    queryOptions?: PickedQueryOptions;\r\n  },\r\n) {\r\n  // extension case\r\n  if (typeof extensionOrOptions === \"function\") {\r\n    if (!options) {\r\n      throw new Error(\r\n        `Missing second argument for \"useReadContract(<extension>, <options>)\" hook.`,\r\n      ) as never;\r\n    }\r\n    const { queryOptions, contract, ...params } = options;\r\n\r\n    const query = defineQuery({\r\n      queryKey: [\r\n        \"readContract\",\r\n        contract.chain.id,\r\n        contract.address,\r\n        getFunctionId(extensionOrOptions),\r\n        stringify(params),\r\n      ] as const,\r\n      // @ts-expect-error - TODO: clean up the type issues here\r\n      queryFn: () => extensionOrOptions({ ...params, contract }),\r\n      ...queryOptions,\r\n    });\r\n\r\n    // TODO - FIX LATER\r\n    // biome-ignore lint/correctness/useHookAtTopLevel: <explanation>\r\n    return useQuery(query);\r\n  }\r\n  // raw tx case\r\n  if (\"method\" in extensionOrOptions) {\r\n    const { queryOptions, ...tx } = extensionOrOptions;\r\n\r\n    const query = defineQuery({\r\n      queryKey: [\r\n        \"readContract\",\r\n        tx.contract.chain.id,\r\n        tx.contract.address,\r\n        tx.method,\r\n        stringify(tx.params),\r\n      ] as const,\r\n      queryFn: () => readContract(extensionOrOptions),\r\n      ...queryOptions,\r\n    });\r\n\r\n    // TODO - FIX LATER\r\n    // biome-ignore lint/correctness/useHookAtTopLevel: <explanation>\r\n    return useQuery(query);\r\n  }\r\n\r\n  throw new Error(\r\n    `Invalid \"useReadContract\" options. Expected either a read extension or a transaction object.`,\r\n  ) as never;\r\n}\r\n", "import {\r\n  type UseQueryResult,\r\n  useQuery,\r\n  useQueryClient,\r\n} from \"@tanstack/react-query\";\r\nimport type { Abi, AbiEvent } from \"abitype\";\r\nimport { useEffect, useMemo, useRef } from \"react\";\r\nimport { getContractEvents } from \"../../../../event/actions/get-events.js\";\r\nimport type { ParseEventLogsResult } from \"../../../../event/actions/parse-logs.js\";\r\nimport {\r\n  type WatchContractEventsOptions,\r\n  watchContractEvents,\r\n} from \"../../../../event/actions/watch-events.js\";\r\nimport type { PreparedEvent } from \"../../../../event/prepare-event.js\";\r\nimport { eth_blockNumber } from \"../../../../rpc/actions/eth_blockNumber.js\";\r\nimport { getRpcClient } from \"../../../../rpc/rpc.js\";\r\n\r\ntype UseContractEventsOptions<\r\n  abi extends Abi,\r\n  abiEvents extends PreparedEvent<AbiEvent>[],\r\n> = Omit<WatchContractEventsOptions<abi, abiEvents, true>, \"onEvents\"> & {\r\n  blockRange?: number;\r\n  enabled?: boolean;\r\n  watch?: boolean;\r\n};\r\n\r\n/**\r\n * Watches contract events and returns the parsed logs.\r\n * @param options - The options for watching contract events.\r\n * @param options.contract - The contract to watch events for.\r\n * @param options.events - The events to watch. Shuould be an array of [prepared events](https://portal.thirdweb.com/references/typescript/v5/prepareEvent).\r\n * @param options.blockRange - The number of blocks to search for events.\r\n * @param options.enabled - Whether to enable the query.\r\n * @param options.watch - Whether to watch for new events.\r\n * @returns The contract events of the watched contract events.\r\n * @example\r\n *\r\n * ### Using event extensions\r\n *\r\n * The `thirdweb/extesions` export contains event definitions for many popular contracts.\r\n * You can use these event definitions to watch for specific events with a type-safe API.\r\n *\r\n * ```jsx\r\n * import { useContractEvents } from \"thirdweb/react\";\r\n * import { tokensClaimedEvent } from \"thirdweb/extensions/erc721\";\r\n *\r\n * const account = useActiveAccount();\r\n * const contractEvents = useContractEvents({\r\n *  contract,\r\n *  events: [tokensClaimedEvent({ claimer: account?.address })],\r\n * });\r\n * ```\r\n *\r\n * ### Using custom events\r\n *\r\n * You can also watch for custom events by passing an array of [prepared events](https://portal.thirdweb.com/references/typescript/v5/prepareEvent).\r\n *\r\n * ```jsx\r\n * import { useContractEvents } from \"thirdweb/react\";\r\n * import { prepareEvent } from \"thirdweb\";\r\n *\r\n * const myEvent = prepareEvent({\r\n *  signature: \"event MyEvent(uint256 myArg)\",\r\n * });\r\n *\r\n * const contractEvents = useContractEvents({\r\n *  contract,\r\n *  events: [myEvent],\r\n * });\r\n * ```\r\n *\r\n * @contract\r\n */\r\nexport function useContractEvents<\r\n  const abi extends Abi,\r\n  const abiEvents extends PreparedEvent<AbiEvent>[],\r\n>(\r\n  options: UseContractEventsOptions<abi, abiEvents>,\r\n): UseQueryResult<ParseEventLogsResult<abiEvents, true>, Error> {\r\n  const {\r\n    contract,\r\n    events,\r\n    blockRange = 2000,\r\n    enabled = true,\r\n    watch = true,\r\n  } = options;\r\n  const latestBlockNumber = useRef<bigint>(); // We use this to keep track of the latest block number when new pollers are spawned\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const eventsKey = useMemo(\r\n    () =>\r\n      events?.reduce((acc, curr) => {\r\n        // we can use the event hash as a unique identifier?\r\n        return `${acc}${curr.hash}_`;\r\n      }, \"\") || \"__all__\",\r\n    [events],\r\n  );\r\n\r\n  const queryKey = useMemo(\r\n    () => [contract.chain.id, contract.address, \"logs\", eventsKey] as const,\r\n    [contract.address, contract.chain, eventsKey],\r\n  );\r\n\r\n  const query = useQuery({\r\n    queryKey,\r\n    queryFn: async () => {\r\n      const rpcRequest = getRpcClient(contract);\r\n      const currentBlockNumber = await eth_blockNumber(rpcRequest);\r\n      latestBlockNumber.current = currentBlockNumber;\r\n      const initialEvents = await getContractEvents({\r\n        contract,\r\n        events: events,\r\n        fromBlock: currentBlockNumber - BigInt(blockRange),\r\n      });\r\n      return initialEvents;\r\n    },\r\n    enabled,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!enabled || !watch) {\r\n      // don't watch if not enabled or if watch is false\r\n      return;\r\n    }\r\n\r\n    // the return is important here because it will unwatch the events\r\n    return watchContractEvents<abi, abiEvents>({\r\n      contract,\r\n      onEvents: (newEvents) => {\r\n        if (newEvents.length > 0 && newEvents[0]) {\r\n          latestBlockNumber.current = newEvents[0].blockNumber; // Update the latest block number to avoid duplicate events if a new poller is spawned during this block\r\n        }\r\n        // biome-ignore lint/suspicious/noExplicitAny: TODO: fix any\r\n        queryClient.setQueryData(queryKey, (oldEvents: any = []) => [\r\n          ...oldEvents,\r\n          ...newEvents,\r\n        ]);\r\n      },\r\n      events,\r\n      latestBlockNumber: latestBlockNumber.current,\r\n    });\r\n  }, [contract, enabled, events, queryClient, queryKey, watch]);\r\n\r\n  return query;\r\n}\r\n", "import { type UseMutationResult, useMutation } from \"@tanstack/react-query\";\r\nimport type { Abi, AbiFunction } from \"abitype\";\r\nimport {\r\n  type SimulateOptions,\r\n  simulateTransaction,\r\n} from \"../../../../transaction/actions/simulate.js\";\r\n\r\n/**\r\n * A hook to simulate a transaction.\r\n * @returns A mutation object to simulate a transaction.\r\n * @example\r\n * ```jsx\r\n * import { useSimulateTransaction } from \"thirdweb/react\";\r\n * const { mutate: simulateTx } = useSimulateTransaction();\r\n *\r\n * // later\r\n * const result = await simulateTx(tx);\r\n * ```\r\n * @transaction\r\n */\r\nexport function useSimulateTransaction<\r\n  const abi extends Abi,\r\n  const abiFn extends AbiFunction,\r\n>(): UseMutationResult<\r\n  Awaited<ReturnType<typeof simulateTransaction>>,\r\n  Error,\r\n  SimulateOptions<abi, abiFn>\r\n> {\r\n  return useMutation({\r\n    mutationFn: (options) => simulateTransaction(options),\r\n  });\r\n}\r\n", "import { type UseMutationResult, useMutation } from \"@tanstack/react-query\";\r\nimport { sendBatchTransaction } from \"../../../../transaction/actions/send-batch-transaction.js\";\r\nimport type { WaitForReceiptOptions } from \"../../../../transaction/actions/wait-for-tx-receipt.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport { useActiveAccount } from \"../wallets/useActiveAccount.js\";\r\n\r\n/**\r\n * A hook to send a transaction.\r\n * @returns A mutation object to send a transaction.\r\n * @example\r\n * ```jsx\r\n * import { useSendBatchTransaction } from \"thirdweb/react\";\r\n * const { mutate: sendBatch, data: transactionResult } = useSendBatchTransaction();\r\n *\r\n * // later\r\n * sendBatch([tx1, tx2]);\r\n * ```\r\n * @transaction\r\n */\r\nexport function useSendBatchTransaction(): UseMutationResult<\r\n  WaitForReceiptOptions,\r\n  Error,\r\n  PreparedTransaction[]\r\n> {\r\n  const account = useActiveAccount();\r\n  return useMutation({\r\n    mutationFn: async (transactions) => {\r\n      if (!account) {\r\n        throw new Error(\"No active account\");\r\n      }\r\n      return await sendBatchTransaction({\r\n        transactions,\r\n        account,\r\n      });\r\n    },\r\n  });\r\n}\r\n", "import { type UseMutationResult, useMutation } from \"@tanstack/react-query\";\r\nimport type { GaslessOptions } from \"../../../../transaction/actions/gasless/types.js\";\r\nimport { sendAndConfirmTransaction } from \"../../../../transaction/actions/send-and-confirm-transaction.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport type { TransactionReceipt } from \"../../../../transaction/types.js\";\r\nimport { useActiveAccount } from \"../wallets/useActiveAccount.js\";\r\n\r\n/**\r\n * Configuration for the `useSendTransaction` hook.\r\n */\r\ntype SendAndConfirmTransactionConfig = {\r\n  /**\r\n   * Configuration for gasless transactions.\r\n   * Refer to [`GaslessOptions`](https://portal.thirdweb.com/references/typescript/v5/GaslessOptions) for more details.\r\n   */\r\n  gasless?: GaslessOptions;\r\n};\r\n\r\n/**\r\n * A hook to send a transaction.\r\n * @returns A mutation object to send a transaction.\r\n * @example\r\n * ```jsx\r\n * import { useSendAndConfirmTransaction } from \"thirdweb/react\";\r\n * const { mutate: sendAndConfirmTx, data: transactionReceipt } = useSendAndConfirmTransaction();\r\n *\r\n * // later\r\n * sendAndConfirmTx(tx);\r\n * ```\r\n *\r\n *\r\n * ### Gasless usage with [thirdweb Engine](https://portal.thirdweb.com/engine)\r\n * ```tsx\r\n * import { useSendAndConfirmTransaction } from \"thirdweb/react\";\r\n * const mutation = useSendAndConfirmTransaction({\r\n *   gasless: {\r\n *     provider: \"engine\",\r\n *     relayerUrl: \"https://thirdweb.engine-***.thirdweb.com/relayer/***\",\r\n *     relayerForwarderAddress: \"0x...\",\r\n *   }\r\n * });\r\n * ```\r\n *\r\n * ### Gasless usage with OpenZeppelin\r\n * ```tsx\r\n * import { useSendAndConfirmTransaction } from \"thirdweb/react\";\r\n * const mutation = useSendAndConfirmTransaction({\r\n *   gasless: {\r\n *     provider: \"openzeppelin\",\r\n *     relayerUrl: \"https://...\",\r\n *     relayerForwarderAddress: \"0x...\",\r\n *   }\r\n * });\r\n * ```\r\n * @transaction\r\n */\r\nexport function useSendAndConfirmTransaction(\r\n  config: SendAndConfirmTransactionConfig = {},\r\n): UseMutationResult<TransactionReceipt, Error, PreparedTransaction> {\r\n  const account = useActiveAccount();\r\n  const { gasless } = config;\r\n  return useMutation({\r\n    mutationFn: async (transaction) => {\r\n      if (!account) {\r\n        throw new Error(\"No active account\");\r\n      }\r\n      return await sendAndConfirmTransaction({\r\n        transaction,\r\n        account,\r\n        gasless,\r\n      });\r\n    },\r\n  });\r\n}\r\n", "import { type UseMutationResult, useMutation } from \"@tanstack/react-query\";\r\nimport {\r\n  type EstimateGasResult,\r\n  estimateGas,\r\n} from \"../../../../transaction/actions/estimate-gas.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport { useActiveAccount } from \"../wallets/useActiveAccount.js\";\r\n\r\n/**\r\n * A hook to estimate the gas for a given transaction.\r\n * @returns A mutation object to estimate gas.\r\n * @example\r\n * ```jsx\r\n * import { useEstimateGas } from \"thirdweb/react\";\r\n * const { mutate: estimateGas, data: gasEstimate } = useEstimateGas();\r\n *\r\n * // later\r\n * const estimatedGas = await estimateGas(tx);\r\n * ```\r\n * @transaction\r\n */\r\nexport function useEstimateGas(): UseMutationResult<\r\n  EstimateGasResult,\r\n  Error,\r\n  PreparedTransaction\r\n> {\r\n  const account = useActiveAccount();\r\n  return useMutation({\r\n    mutationFn: (transaction) => estimateGas({ transaction, account }),\r\n  });\r\n}\r\n", "import { type UseMutationResult, useMutation } from \"@tanstack/react-query\";\r\nimport {\r\n  type EstimateGasCostResult,\r\n  estimateGasCost,\r\n} from \"../../../../transaction/actions/estimate-gas-cost.js\";\r\nimport type { PreparedTransaction } from \"../../../../transaction/prepare-transaction.js\";\r\nimport { useActiveAccount } from \"../wallets/useActiveAccount.js\";\r\n\r\n/**\r\n * A hook to estimate the gas cost in ether and wei for a given transaction.\r\n * @returns A mutation object to estimate gas cost.\r\n * @example\r\n * ```jsx\r\n * import { useEstimateGasCost } from \"thirdweb/react\";\r\n * const { mutate: estimateGasCost, data: gasEstimate } = useEstimateGas();\r\n *\r\n * // later\r\n * const estimatedGas = await estimateGasCost(tx);\r\n * console.log(\"gas cost in ether\", estimatedGas.ether);\r\n * ```\r\n * @transaction\r\n */\r\nexport function useEstimateGasCost(): UseMutationResult<\r\n  EstimateGasCostResult,\r\n  Error,\r\n  PreparedTransaction\r\n> {\r\n  const account = useActiveAccount();\r\n  return useMutation({\r\n    mutationFn: (transaction) => estimateGasCost({ transaction, account }),\r\n  });\r\n}\r\n", "import { useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport type { Chain } from \"../../../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\r\nimport { eth_blockNumber } from \"../../../../rpc/actions/eth_blockNumber.js\";\r\nimport { getRpcClient } from \"../../../../rpc/rpc.js\";\r\nimport { watchBlockNumber } from \"../../../../rpc/watchBlockNumber.js\";\r\n\r\nexport type UseBlockNumberOptions = {\r\n  client: ThirdwebClient;\r\n  chain: Chain;\r\n  enabled?: boolean;\r\n  watch?: boolean;\r\n};\r\n\r\n/**\r\n * Hook that watches for changes in the block number on a given chain.\r\n * @param options - The options for the hook.\r\n * @returns The latest block number.\r\n * @example\r\n * ```jsx\r\n * import { useBlockNumber } from \"thirdweb/react\";\r\n * const blockNumber = useBlockNumber({client, chain});\r\n * ```\r\n * @utils\r\n */\r\nexport function useBlockNumber(options: UseBlockNumberOptions) {\r\n  const { client, chain, enabled = true, watch = true } = options;\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const queryKey = useMemo(() => [chain.id, \"blockNumber\"] as const, [chain]);\r\n  const query = useQuery({\r\n    // TODO: technically client should be part of the queryKey here...\r\n\r\n    queryKey: queryKey,\r\n    queryFn: async () => {\r\n      const rpcRequest = getRpcClient({ client, chain });\r\n      return await eth_blockNumber(rpcRequest);\r\n    },\r\n    enabled,\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!enabled || !watch) {\r\n      // don't watch if not enabled or not watching\r\n      return;\r\n    }\r\n    return watchBlockNumber({\r\n      client,\r\n      chain,\r\n      onNewBlockNumber: (newBlockNumber) => {\r\n        queryClient.setQueryData(queryKey, newBlockNumber);\r\n      },\r\n    });\r\n  }, [client, chain, enabled, queryClient, queryKey, watch]);\r\n\r\n  return query.data;\r\n}\r\n", "import { type UseQueryResult, useQuery } from \"@tanstack/react-query\";\r\nimport type { Abi } from \"abitype\";\r\nimport type { BaseTransactionOptions } from \"../../../transaction/types.js\";\r\nimport { getFunctionId } from \"../../../utils/function-id.js\";\r\nimport { stringify } from \"../../../utils/json.js\";\r\n\r\nconst CONTRACT_QUERY_CACHE = new WeakMap();\r\n\r\n/**\r\n * Creates a `useQuery` hook for a contract call.\r\n * @param readCall - A function that performs the contract function call and returns the result.\r\n * @returns An object containing the created `useRead` hook.\r\n * @example\r\n * ```jsx\r\n * import { createContractQuery } from \"thirdweb/react\";\r\n * import { totalSupply } from \"thirdweb/extensions/erc20\";\r\n * const useTotalSupply = createContractQuery(totalSupply);\r\n * const { data, isLoading } = useTotalSupply({contract})\r\n * ```\r\n * @transaction\r\n */\r\nexport function createContractQuery<\r\n  opts extends object,\r\n  result,\r\n  abi extends Abi,\r\n>(\r\n  readCall: (options: BaseTransactionOptions<opts, abi>) => Promise<result>,\r\n): (\r\n  options: BaseTransactionOptions<opts, abi> & {\r\n    queryOptions?: Partial<{ enabled: boolean }>;\r\n  },\r\n) => UseQueryResult<result, Error> {\r\n  if (CONTRACT_QUERY_CACHE.has(readCall)) {\r\n    return CONTRACT_QUERY_CACHE.get(readCall) as (\r\n      options: BaseTransactionOptions<opts, abi>,\r\n    ) => UseQueryResult<result, Error>;\r\n  }\r\n  function useRead(\r\n    options: BaseTransactionOptions<opts, abi> & {\r\n      queryOptions?: Partial<{ enabled: boolean }>;\r\n    },\r\n  ) {\r\n    const { contract, queryOptions, ...params } = options;\r\n\r\n    return useQuery({\r\n      queryKey: [\r\n        \"readContract\",\r\n        contract.chain.id,\r\n        contract.address,\r\n        getFunctionId(readCall),\r\n        stringify(params),\r\n      ] as const,\r\n      queryFn: () => readCall(options),\r\n      ...queryOptions,\r\n    });\r\n  }\r\n  CONTRACT_QUERY_CACHE.set(readCall, useRead);\r\n  return useRead;\r\n}\r\n", "import { useQueryClient } from \"@tanstack/react-query\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function useInvalidateContractQuery() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return ({\r\n    chainId,\r\n    contractAddress,\r\n  }: {\r\n    chainId: number;\r\n    contractAddress: string;\r\n  }) => {\r\n    queryClient.invalidateQueries({\r\n      queryKey: [\"readContract\", chainId, contractAddress],\r\n    });\r\n  };\r\n}\r\n", "import {\r\n  type UseQueryOptions,\r\n  type UseQueryResult,\r\n  useQuery,\r\n} from \"@tanstack/react-query\";\r\nimport {\r\n  type BuyWithCryptoHistoryData,\r\n  type BuyWithCryptoHistoryParams,\r\n  getBuyWithCryptoHistory,\r\n} from \"../../../../pay/buyWithCrypto/getHistory.js\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type BuyWithCryptoHistoryQueryOptions = Omit<\r\n  UseQueryOptions<BuyWithCryptoHistoryData>,\r\n  \"queryFn\" | \"queryKey\" | \"enabled\"\r\n>;\r\n\r\n/**\r\n * Hook to get the \"Buy with crypto\" transaction history for a given wallet address.\r\n *\r\n * This hook is a React Query wrapper of the [`getBuyWithCryptoHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithCryptoHistory) function.\r\n * You can also use that function directly\r\n * @param params - object of type [`BuyWithCryptoHistoryParams`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoHistoryParams)\r\n * @param queryParams - options to configure the react query\r\n * @returns A React Query object which contains the data of type [`BuyWithCryptoHistoryData`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoHistoryData)\r\n * @example\r\n * ```tsx\r\n * import { useBuyWithCryptoHistory } from \"thirdweb/react\";\r\n *\r\n * function Component() {\r\n *  const buyWithCryptoHistory = useBuyWithCryptoHistory(params);\r\n *  return <div> ... </div>\r\n * }\r\n * ```\r\n * @buyCrypto\r\n */\r\nexport function useBuyWithCryptoHistory(\r\n  params?: BuyWithCryptoHistoryParams,\r\n  queryParams?: BuyWithCryptoHistoryQueryOptions,\r\n): UseQueryResult<BuyWithCryptoHistoryData> {\r\n  return useQuery({\r\n    ...queryParams,\r\n    queryKey: [\"getBuyWithCryptoHistory\", params],\r\n    queryFn: () => {\r\n      if (!params) {\r\n        throw new Error(\"Swap params are required\");\r\n      }\r\n      return getBuyWithCryptoHistory(params);\r\n    },\r\n    enabled: !!params,\r\n  });\r\n}\r\n", "import type { ThirdwebClient } from \"../../client/client.js\";\r\nimport { getClientFetch } from \"../../utils/fetch.js\";\r\nimport { getPayBuyWithFiatHistoryEndpoint } from \"../utils/definitions.js\";\r\nimport type { BuyWithFiatStatus } from \"./getStatus.js\";\r\n\r\n/**\r\n * The parameters for [`getBuyWithFiatHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithFiatHistory) function\r\n * @buyCrypto\r\n */\r\nexport type BuyWithFiatHistoryParams = {\r\n  /**\r\n   * A client is the entry point to the thirdweb SDK. It is required for all other actions.\r\n   *\r\n   * You can create a client using the `createThirdwebClient` function.\r\n   * Refer to the [Creating a Client](https://portal.thirdweb.com/typescript/v5/client) documentation for more information.\r\n   */\r\n  client: ThirdwebClient;\r\n  /**\r\n   * The address of the wallet to get the wallet history for\r\n   */\r\n  walletAddress: string;\r\n  /**\r\n   * The number of results to return in a single page. The default value is `10`.\r\n   */\r\n  count: number;\r\n  /**\r\n   * index of the first result to return. The default value is `0`.\r\n   *\r\n   * If you want to start the list from nth item, you can set the start value to (n-1).\r\n   */\r\n  start: number;\r\n};\r\n\r\n/**\r\n * The results for [`getBuyWithFiatHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithFiatHistory) function\r\n * @buyCrypto\r\n */\r\nexport type BuyWithFiatHistoryData = {\r\n  page: BuyWithFiatStatus[];\r\n  hasNextPage: boolean;\r\n};\r\n\r\n/**\r\n * Get the \"Buy with fiat\" transaction history for a given wallet address\r\n * @param params Object of type [`BuyWithFiatHistoryParams`](https://portal.thirdweb.com/references/typescript/v5/BuyWithFiatHistoryParams)\r\n * @example\r\n *\r\n * ```ts\r\n * import { createThirdwebClient } from \"thirdweb\";\r\n * import { getBuyWithFiatHistory } from \"thirdweb/pay\";\r\n *\r\n * const client = createThirdwebClient({ clientId: \"...\" });\r\n *\r\n * // get the 10 latest \"Buy with fiat\" transactions dony by the wallet\r\n * const history = await getBuyWithFiatHistory({\r\n *  client: client,\r\n *  walletAddress: '0x...',\r\n *  start: 0,\r\n *  count: 10,\r\n * })\r\n * ```\r\n * @returns Object of type [`BuyWithFiatHistoryData`](https://portal.thirdweb.com/references/typescript/v5/BuyWithFiatHistoryData)\r\n * @buyCrypto\r\n */\r\nexport async function getBuyWithFiatHistory(\r\n  params: BuyWithFiatHistoryParams,\r\n): Promise<BuyWithFiatHistoryData> {\r\n  try {\r\n    const queryParams = new URLSearchParams();\r\n    queryParams.append(\"walletAddress\", params.walletAddress);\r\n    queryParams.append(\"start\", params.start.toString());\r\n    queryParams.append(\"count\", params.count.toString());\r\n\r\n    const queryString = queryParams.toString();\r\n    const url = `${getPayBuyWithFiatHistoryEndpoint()}?${queryString}`;\r\n\r\n    const response = await getClientFetch(params.client)(url);\r\n\r\n    // Assuming the response directly matches the BuyWithFiatStatus response interface\r\n    if (!response.ok) {\r\n      response.body?.cancel();\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n\r\n    const data: BuyWithFiatHistoryData = (await response.json()).result;\r\n    return data;\r\n  } catch (error) {\r\n    throw new Error(`Fetch failed: ${error}`);\r\n  }\r\n}\r\n", "import {\r\n  type UseQueryOptions,\r\n  type UseQueryResult,\r\n  useQuery,\r\n} from \"@tanstack/react-query\";\r\nimport {\r\n  type BuyWithFiatHistoryData,\r\n  type BuyWithFiatHistoryParams,\r\n  getBuyWithFiatHistory,\r\n} from \"../../../../pay/buyWithFiat/getHistory.js\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type BuyWithFiatHistoryQueryOptions = Omit<\r\n  UseQueryOptions<BuyWithFiatHistoryData>,\r\n  \"queryFn\" | \"queryKey\" | \"enabled\"\r\n>;\r\n\r\n/**\r\n * Hook to get the \"Buy with Fiat\" transaction history for a given wallet address.\r\n *\r\n * This hook is a React Query wrapper of the [`getBuyWithFiatHistory`](https://portal.thirdweb.com/references/typescript/v5/getBuyWithFiatHistory) function.\r\n * You can also use that function directly\r\n * @param params - object of type [`BuyWithFiatHistoryParams`](https://portal.thirdweb.com/references/typescript/v5/BuyWithFiatHistoryParams)\r\n * @param queryParams - options to configure the react query\r\n * @returns A React Query object which contains the data of type [`BuyWithFiatHistoryData`](https://portal.thirdweb.com/references/typescript/v5/BuyWithFiatHistoryData)\r\n * @example\r\n * ```tsx\r\n * import { useBuyWithFiatHistory } from \"thirdweb/react\";\r\n *\r\n * function Component() {\r\n *  const historyQuery = useBuyWithFiatHistory(params);\r\n *  return <div> ... </div>\r\n * }\r\n * ```\r\n * @buyCrypto\r\n */\r\nexport function useBuyWithFiatHistory(\r\n  params?: BuyWithFiatHistoryParams,\r\n  queryParams?: BuyWithFiatHistoryQueryOptions,\r\n): UseQueryResult<BuyWithFiatHistoryData> {\r\n  return useQuery({\r\n    ...queryParams,\r\n    queryKey: [\"buyWithFiatHistory\", params],\r\n    queryFn: () => {\r\n      if (!params) {\r\n        throw new Error(\"params are required\");\r\n      }\r\n      return getBuyWithFiatHistory(params);\r\n    },\r\n    enabled: !!params,\r\n  });\r\n}\r\n", "import {\r\n  type UseQueryOptions,\r\n  type UseQueryResult,\r\n  useQuery,\r\n} from \"@tanstack/react-query\";\r\nimport type { BuyWithCryptoQuote } from \"../../../../pay/buyWithCrypto/getQuote.js\";\r\nimport {\r\n  type GetPostOnRampQuoteParams,\r\n  getPostOnRampQuote,\r\n} from \"../../../../pay/buyWithFiat/getPostOnRampQuote.js\";\r\n\r\n/**\r\n * @internal\r\n */\r\nexport type PostOnRampQuoteQueryOptions = Omit<\r\n  UseQueryOptions<BuyWithCryptoQuote>,\r\n  \"queryFn\" | \"queryKey\" | \"enabled\"\r\n>;\r\n\r\n/**\r\n * When buying a token with fiat currency - It only involes doing on-ramp if the on-ramp provider supports buying the given destination token directly.\r\n *\r\n * If the on-ramp provider does not support buying the destination token directly, user can be sent an intermediate token with fiat currency from the on-ramp provider which\r\n * can be swapped to destination token onchain.\r\n *\r\n * `usePostOnRampQuote` hook is used to get the quote for swapping the on-ramp token to destination token.\r\n *\r\n * When you get a \"Buy with Fiat\" status of type `\"CRYPTO_SWAP_REQUIRED\"` from the [`useBuyWithFiatStatus`](https://portal.thirdweb.com/references/typescript/v5/useBuyWithFiatStatus) hook,\r\n * you can use `usePostOnRampQuote` hook to get the quote of type [`BuyWithCryptoQuote`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoQuote) for swapping the on-ramp token to destination token to complete the step-2 of the process.\r\n *\r\n * Once you have the quote, you can start the Swap process by following the same steps as mentioned in the [`useBuyWithCryptoQuote`](https://portal.thirdweb.com/references/typescript/v5/useBuyWithCryptoQuote) documentation.\r\n *\r\n * @param params - object of type [`GetPostOnRampQuoteParams`](https://portal.thirdweb.com/references/typescript/v5/GetPostOnRampQuoteParams)\r\n * @returns Object of type [`BuyWithCryptoQuote`](https://portal.thirdweb.com/references/typescript/v5/BuyWithCryptoQuote) which contains the information about the quote such as processing fees, estimated time, converted token amounts, etc.\r\n * @buyCrypto\r\n */\r\nexport function usePostOnRampQuote(\r\n  params?: GetPostOnRampQuoteParams,\r\n  queryOptions?: PostOnRampQuoteQueryOptions,\r\n): UseQueryResult<BuyWithCryptoQuote> {\r\n  return useQuery({\r\n    ...queryOptions,\r\n    queryKey: [\"getPostOnRampQuote\", params],\r\n    queryFn: async () => {\r\n      if (!params) {\r\n        throw new Error(\"No params provided\");\r\n      }\r\n      return getPostOnRampQuote(params);\r\n    },\r\n    enabled: !!params,\r\n  });\r\n}\r\n", "\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport type { Chain } from \"../../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../../client/client.js\";\r\nimport type { Wallet } from \"../../../wallets/interfaces/wallet.js\";\r\nimport type { SmartWalletOptions } from \"../../../wallets/smart/types.js\";\r\nimport type { AppMetadata } from \"../../../wallets/types.js\";\r\nimport type { WalletId } from \"../../../wallets/wallet-types.js\";\r\nimport { CustomThemeProvider } from \"../../core/design-system/CustomThemeProvider.js\";\r\nimport type { Theme } from \"../../core/design-system/index.js\";\r\nimport type { SiweAuthOptions } from \"../../core/hooks/auth/useSiweAuth.js\";\r\nimport type {\r\n  ConnectButton_connectModalOptions,\r\n  PayUIOptions,\r\n} from \"../../core/hooks/connection/ConnectButtonProps.js\";\r\nimport { useConnectionManager } from \"../../core/providers/connection-manager.js\";\r\nimport type { SupportedTokens } from \"../../core/utils/defaultTokens.js\";\r\nimport { EmbedContainer } from \"./ConnectWallet/Modal/ConnectEmbed.js\";\r\nimport { useConnectLocale } from \"./ConnectWallet/locale/getConnectLocale.js\";\r\nimport BuyScreen from \"./ConnectWallet/screens/Buy/BuyScreen.js\";\r\nimport { ExecutingTxScreen } from \"./TransactionButton/ExecutingScreen.js\";\r\nimport { DynamicHeight } from \"./components/DynamicHeight.js\";\r\nimport { Spinner } from \"./components/Spinner.js\";\r\nimport type { LocaleId } from \"./types.js\";\r\n\r\n/**\r\n * Props of [`PayEmbed`](https://portal.thirdweb.com/references/typescript/v5/PayEmbed) component\r\n */\r\nexport type PayEmbedProps = {\r\n  /**\r\n   * Override the default tokens shown in PayEmbed uI\r\n   * @component\r\n   * By default, PayEmbed shows a few popular tokens for Pay supported chains\r\n   * @example\r\n   *\r\n   * `supportedTokens` prop allows you to override this list as shown below.\r\n   *\r\n   * ```tsx\r\n   * import { PayEmbed } from 'thirdweb/react';\r\n   * import { NATIVE_TOKEN_ADDRESS } from 'thirdweb';\r\n   *\r\n   * function Example() {\r\n   *   return (\r\n   * \t\t<PayEmbed\r\n   * \t\t\tsupportedTokens={{\r\n   *        // Override the tokens for Base Mainnet ( chaid id 84532 )\r\n   * \t\t\t\t84532: [\r\n   * \t\t\t\t\t{\r\n   * \t\t\t\t\t\taddress: NATIVE_TOKEN_ADDRESS, // use NATIVE_TOKEN_ADDRESS for native token\r\n   * \t\t\t\t\t\tname: 'Base ETH',\r\n   * \t\t\t\t\t\tsymbol: 'ETH',\r\n   * \t\t\t\t\t\ticon: 'https://...',\r\n   * \t\t\t\t\t},\r\n   *          {\r\n   * \t\t\t\t\t\taddress: '0x...', // token contract address\r\n   * \t\t\t\t\t\tname: 'Dai Stablecoin',\r\n   * \t\t\t\t\t\tsymbol: 'DAI',\r\n   * \t\t\t\t\t\ticon: 'https://...',\r\n   * \t\t\t\t\t},\r\n   * \t\t\t\t],\r\n   * \t\t\t}}\r\n   * \t\t/>\r\n   * \t);\r\n   * }\r\n   * ```\r\n   */\r\n  supportedTokens?: SupportedTokens;\r\n  /**\r\n   * A client is the entry point to the thirdweb SDK.\r\n   * It is required for all other actions.\r\n   * You can create a client using the `createThirdwebClient` function. Refer to the [Creating a Client](https://portal.thirdweb.com/typescript/v5/client) documentation for more information.\r\n   *\r\n   * You must provide a `clientId` or `secretKey` in order to initialize a client. Pass `clientId` if you want for client-side usage and `secretKey` for server-side usage.\r\n   *\r\n   * ```tsx\r\n   * import { createThirdwebClient } from \"thirdweb\";\r\n   *\r\n   * const client = createThirdwebClient({\r\n   *  clientId: \"<your_client_id>\",\r\n   * })\r\n   * ```\r\n   */\r\n  client: ThirdwebClient;\r\n  /**\r\n   * By default - ConnectButton UI uses the `en-US` locale for english language users.\r\n   *\r\n   * You can customize the language used in the ConnectButton UI by setting the `locale` prop.\r\n   *\r\n   * Refer to the [`LocaleId`](https://portal.thirdweb.com/references/typescript/v5/LocaleId) type for supported locales.\r\n   */\r\n  locale?: LocaleId;\r\n  /**\r\n   * Customize the Pay UI options. Refer to the [`PayUIOptions`](https://portal.thirdweb.com/references/typescript/v5/PayUIOptions) type for more details.\r\n   */\r\n  payOptions?: PayUIOptions;\r\n\r\n  /**\r\n   * Set the theme for the `PayEmbed` component. By default it is set to `\"dark\"`\r\n   *\r\n   * theme can be set to either `\"dark\"`, `\"light\"` or a custom theme object.\r\n   * You can also import [`lightTheme`](https://portal.thirdweb.com/references/typescript/v5/lightTheme)\r\n   * or [`darkTheme`](https://portal.thirdweb.com/references/typescript/v5/darkTheme)\r\n   * functions from `thirdweb/react` to use the default themes as base and overrides parts of it.\r\n   * @example\r\n   * ```ts\r\n   * import { lightTheme } from \"thirdweb/react\";\r\n   *\r\n   * const customTheme = lightTheme({\r\n   *  colors: {\r\n   *    modalBg: 'red'\r\n   *  }\r\n   * })\r\n   *\r\n   * function Example() {\r\n   *  return <PayEmbed client={client} theme={customTheme} />\r\n   * }\r\n   * ```\r\n   */\r\n  theme?: \"light\" | \"dark\" | Theme;\r\n\r\n  /**\r\n   * Customize the options for \"Connect\" Button showing in the PayEmbed UI when the user is not connected to a wallet.\r\n   *\r\n   * Refer to the [`PayEmbedConnectOptions`](https://portal.thirdweb.com/references/typescript/v5/PayEmbedConnectOptions) type for more details.\r\n   */\r\n  connectOptions?: PayEmbedConnectOptions;\r\n\r\n  /**\r\n   * All wallet IDs included in this array will be hidden from wallet selection when connected.\r\n   */\r\n  hiddenWallets?: WalletId[];\r\n\r\n  style?: React.CSSProperties;\r\n\r\n  className?: string;\r\n};\r\n\r\n/**\r\n * Embed thirdweb Pay UI for Buy tokens using Crypto or Credit Card.\r\n *\r\n * PayEmbed also renders a \"Connect\" button if the user is not connected to a wallet. You can customize the options for \"Connect\" button using the `connectOptions` prop.\r\n *\r\n * @param props - Props of type [`PayEmbedProps`](https://portal.thirdweb.com/references/typescript/v5/PayEmbedProps) to configure the PayEmbed component.\r\n *\r\n * @example\r\n * ```tsx\r\n * <PayEmbed\r\n *   client={client}\r\n *   connectOptions={{\r\n *     connectModal: {\r\n *       size: 'compact',\r\n *     }\r\n *   }}\r\n *   payOptions={{\r\n *     buyWithCrypto: false,\r\n *   }}\r\n *  />\r\n * ```\r\n */\r\nexport function PayEmbed(props: PayEmbedProps) {\r\n  const localeQuery = useConnectLocale(props.locale || \"en_US\");\r\n  const [screen, setScreen] = useState<\"buy\" | \"execute-tx\">(\"buy\");\r\n  const theme = props.theme || \"dark\";\r\n  const connectionManager = useConnectionManager();\r\n\r\n  // Add props.chain and props.chains to defined chains store\r\n  useEffect(() => {\r\n    if (props.connectOptions?.chain) {\r\n      connectionManager.defineChains([props.connectOptions?.chain]);\r\n    }\r\n  }, [props.connectOptions?.chain, connectionManager]);\r\n\r\n  useEffect(() => {\r\n    if (props.connectOptions?.chains) {\r\n      connectionManager.defineChains(props.connectOptions?.chains);\r\n    }\r\n  }, [props.connectOptions?.chains, connectionManager]);\r\n\r\n  let content = null;\r\n  const metadata =\r\n    props.payOptions && \"metadata\" in props.payOptions\r\n      ? props.payOptions.metadata\r\n      : null;\r\n\r\n  if (!localeQuery.data) {\r\n    content = (\r\n      <div\r\n        style={{\r\n          minHeight: \"350px\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n        }}\r\n      >\r\n        <Spinner size=\"xl\" color=\"secondaryText\" />\r\n      </div>\r\n    );\r\n  } else {\r\n    content = (\r\n      <>\r\n        {screen === \"buy\" && (\r\n          <BuyScreen\r\n            title={metadata?.name || \"Buy\"}\r\n            isEmbed={true}\r\n            supportedTokens={props.supportedTokens}\r\n            theme={theme}\r\n            client={props.client}\r\n            connectLocale={localeQuery.data}\r\n            hiddenWallets={props.hiddenWallets}\r\n            payOptions={\r\n              props.payOptions || {\r\n                mode: \"fund_wallet\",\r\n              }\r\n            }\r\n            onDone={() => {\r\n              if (props.payOptions?.mode === \"transaction\") {\r\n                setScreen(\"execute-tx\");\r\n              }\r\n            }}\r\n            connectOptions={props.connectOptions}\r\n            onBack={undefined}\r\n          />\r\n        )}\r\n\r\n        {screen === \"execute-tx\" &&\r\n          props.payOptions?.mode === \"transaction\" &&\r\n          props.payOptions.transaction && (\r\n            <ExecutingTxScreen\r\n              tx={props.payOptions.transaction}\r\n              closeModal={() => {\r\n                setScreen(\"buy\");\r\n              }}\r\n              onBack={() => {\r\n                setScreen(\"buy\");\r\n              }}\r\n              onTxSent={() => {}}\r\n            />\r\n          )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <CustomThemeProvider theme={theme}>\r\n      <EmbedContainer\r\n        modalSize=\"compact\"\r\n        style={props.style}\r\n        className={props.className}\r\n      >\r\n        <DynamicHeight>{content}</DynamicHeight>\r\n      </EmbedContainer>\r\n    </CustomThemeProvider>\r\n  );\r\n}\r\n\r\n/**\r\n * Connection options for the `PayEmbed` component\r\n *\r\n * @example\r\n * ```tsx\r\n * <PayEmbed client={client} connectOptions={{\r\n *    connectModal: {\r\n *      size: 'compact',\r\n *      title: \"Sign in\",\r\n *    }\r\n *  }}\r\n * />\r\n * ```\r\n */\r\nexport type PayEmbedConnectOptions = {\r\n  /**\r\n   * Configurations for the `ConnectButton`'s Modal that is shown for connecting a wallet\r\n   * Refer to the [`ConnectButton_connectModalOptions`](https://portal.thirdweb.com/references/typescript/v5/ConnectButton_connectModalOptions) type for more details\r\n   */\r\n  connectModal?: ConnectButton_connectModalOptions;\r\n\r\n  /**\r\n   * Configure options for WalletConnect\r\n   *\r\n   * By default WalletConnect uses the thirdweb's default project id.\r\n   * Setting your own project id is recommended.\r\n   *\r\n   * You can create a project id by signing up on [walletconnect.com](https://walletconnect.com/)\r\n   */\r\n  walletConnect?: {\r\n    projectId?: string;\r\n  };\r\n\r\n  /**\r\n   * Enable Account abstraction for all wallets. This will connect to the users's smart account based on the connected personal wallet and the given options.\r\n   *\r\n   * This allows to sponsor gas fees for your user's transaction using the thirdweb account abstraction infrastructure.\r\n   *\r\n   */\r\n  accountAbstraction?: SmartWalletOptions;\r\n\r\n  /**\r\n   * Array of wallets to show in Connect Modal. If not provided, default wallets will be used.\r\n   */\r\n  wallets?: Wallet[];\r\n  /**\r\n   * When the user has connected their wallet to your site, this configuration determines whether or not you want to automatically connect to the last connected wallet when user visits your site again in the future.\r\n   *\r\n   * By default it is set to `{ timeout: 15000 }` meaning that autoConnect is enabled and if the autoConnection does not succeed within 15 seconds, it will be cancelled.\r\n   *\r\n   * If you want to disable autoConnect, set this prop to `false`.\r\n   *\r\n   * If you want to customize the timeout, you can assign an object with a `timeout` key to this prop.\r\n   * ```\r\n   */\r\n  autoConnect?:\r\n    | {\r\n        timeout: number;\r\n      }\r\n    | boolean;\r\n\r\n  /**\r\n   * Metadata of the app that will be passed to connected wallet. Setting this is highly recommended.\r\n   */\r\n  appMetadata?: AppMetadata;\r\n\r\n  /**\r\n   * The [`Chain`](https://portal.thirdweb.com/references/typescript/v5/Chain) object of the blockchain you want the wallet to connect to\r\n   *\r\n   * If a `chain` is not specified, Wallet will be connected to whatever is the default set in the wallet.\r\n   *\r\n   * If a `chain` is specified, Wallet will be prompted to switch to given chain after connection if it is not already connected to it.\r\n   * This ensures that the wallet is connected to the correct blockchain before interacting with your app.\r\n   *\r\n   * The `ConnectButton` also shows a \"Switch Network\" button until the wallet is connected to the specified chain. Clicking on the \"Switch Network\" button triggers the wallet to switch to the specified chain.\r\n   *\r\n   * You can create a `Chain` object using the [`defineChain`](https://portal.thirdweb.com/references/typescript/v5/defineChain) function.\r\n   * At minimum, you need to pass the `id` of the blockchain to `defineChain` function to create a `Chain` object.\r\n   * ```\r\n   */\r\n  chain?: Chain;\r\n\r\n  /**\r\n   * Array of chains that your app supports.\r\n   *\r\n   * This is only relevant if your app is a multi-chain app and works across multiple blockchains.\r\n   * If your app only works on a single blockchain, you should only specify the `chain` prop.\r\n   *\r\n   * Given list of chains will used in various ways:\r\n   * - They will be displayed in the network selector in the `ConnectButton`'s details modal post connection\r\n   * - They will be sent to wallet at the time of connection if the wallet supports requesting multiple chains ( example: WalletConnect ) so that users can switch between the chains post connection easily\r\n   *\r\n   * You can create a `Chain` object using the [`defineChain`](https://portal.thirdweb.com/references/typescript/v5/defineChain) function.\r\n   * At minimum, you need to pass the `id` of the blockchain to `defineChain` function to create a `Chain` object.\r\n   *\r\n   * ```tsx\r\n   * import { defineChain } from \"thirdweb/react\";\r\n   *\r\n   * const polygon = defineChain({\r\n   *   id: 137,\r\n   * });\r\n   * ```\r\n   */\r\n  chains?: Chain[];\r\n\r\n  /**\r\n   * Wallets to show as recommended in the `ConnectButton`'s Modal\r\n   */\r\n  recommendedWallets?: Wallet[];\r\n\r\n  /**\r\n   * By default, ConnectButton modal shows a \"All Wallets\" button that shows a list of 350+ wallets.\r\n   *\r\n   * You can disable this button by setting `showAllWallets` prop to `false`\r\n   */\r\n  showAllWallets?: boolean;\r\n\r\n  /**\r\n   * Enable SIWE (Sign in with Ethererum) by passing an object of type `SiweAuthOptions` to\r\n   * enforce the users to sign a message after connecting their wallet to authenticate themselves.\r\n   *\r\n   * Refer to the [`SiweAuthOptions`](https://portal.thirdweb.com/references/typescript/v5/SiweAuthOptions) for more details\r\n   */\r\n  auth?: SiweAuthOptions;\r\n};\r\n", "import { useCallback, useContext, useMemo, useState } from \"react\";\r\nimport type { Chain } from \"../../../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../../../client/client.js\";\r\nimport type { Wallet } from \"../../../../wallets/interfaces/wallet.js\";\r\nimport type { SmartWalletOptions } from \"../../../../wallets/smart/types.js\";\r\nimport type { AppMetadata } from \"../../../../wallets/types.js\";\r\nimport type { Theme } from \"../../../core/design-system/index.js\";\r\nimport { SetRootElementContext } from \"../../../core/providers/RootElementContext.js\";\r\nimport { WalletUIStatesProvider } from \"../../providers/wallet-ui-states-provider.js\";\r\nimport { canFitWideModal } from \"../../utils/canFitWideModal.js\";\r\nimport { getDefaultWallets } from \"../../wallets/defaultWallets.js\";\r\nimport type { LocaleId } from \"../types.js\";\r\nimport ConnectModal from \"./Modal/ConnectModal.js\";\r\nimport { getConnectLocale } from \"./locale/getConnectLocale.js\";\r\nimport type { ConnectLocale } from \"./locale/types.js\";\r\nimport type { WelcomeScreen } from \"./screens/types.js\";\r\n\r\n/**\r\n * hook that allows you to open the Connect UI in a Modal to prompt the user to connect wallet.\r\n * @example\r\n * ```tsx\r\n * import { createThirdwebClient } from \"thirdweb\";\r\n * import { useConnectModal } from \"thirdweb/react\";\r\n *\r\n * const client = createThirdwebClient({\r\n *  clientId: \"<your_client_id>\",\r\n * });\r\n *\r\n * function Example() {\r\n *   const { connect, isConnecting } = useConnectModal();\r\n *\r\n *   async function handleConnect() {\r\n *      const wallet = await connect({ client }); // opens the connect modal\r\n *      console.log('connected to', wallet);\r\n *   }\r\n *\r\n *   return <button onClick={handleConnect}> Connect </button>\r\n * }\r\n * ```\r\n *\r\n * The returned `connect` method takes an object of type [UseConnectModalOptions](https://portal.thirdweb.com/references/typescript/v5/ConnectButtonProps)\r\n * as an argument to customize the Connect Modal UI. Refer to [UseConnectModalOptions](https://portal.thirdweb.com/references/typescript/v5/ConnectButtonProps) to see the available options.\r\n *\r\n * @walletConnection\r\n */\r\nexport function useConnectModal() {\r\n  const setRootEl = useContext(SetRootElementContext);\r\n  const [isConnecting, setIsConnecting] = useState(false);\r\n\r\n  const connect = useCallback(\r\n    (props: UseConnectModalOptions) => {\r\n      function cleanup() {\r\n        setIsConnecting(false);\r\n        setRootEl(undefined);\r\n      }\r\n\r\n      return new Promise<Wallet>((resolve, reject) => {\r\n        setIsConnecting(true);\r\n        getConnectLocale(props.locale || \"en_US\")\r\n          .then((locale) => {\r\n            setRootEl(\r\n              <Modal\r\n                {...props}\r\n                onConnect={(w) => {\r\n                  resolve(w);\r\n                  cleanup();\r\n                }}\r\n                onClose={() => {\r\n                  reject();\r\n                  cleanup();\r\n                }}\r\n                connectLocale={locale}\r\n              />,\r\n            );\r\n          })\r\n          .catch(() => {\r\n            reject();\r\n            cleanup();\r\n          });\r\n      });\r\n    },\r\n    [setRootEl],\r\n  );\r\n\r\n  return { connect, isConnecting };\r\n}\r\n\r\nfunction Modal(\r\n  props: UseConnectModalOptions & {\r\n    onConnect: (wallet: Wallet) => void;\r\n    onClose: () => void;\r\n    connectLocale: ConnectLocale;\r\n  },\r\n) {\r\n  const wallets = useMemo(\r\n    () =>\r\n      props.wallets ||\r\n      getDefaultWallets({\r\n        appMetadata: props.appMetadata,\r\n        chains: props.chains,\r\n      }),\r\n    [props.wallets, props.appMetadata, props.chains],\r\n  );\r\n\r\n  const size = useMemo(() => {\r\n    return !canFitWideModal() || wallets.length === 1\r\n      ? \"compact\"\r\n      : props.size || \"wide\";\r\n  }, [props.size, wallets.length]);\r\n  const meta = useMemo(() => {\r\n    return {\r\n      privacyPolicyUrl: props.privacyPolicyUrl,\r\n      showThirdwebBranding: props.showThirdwebBranding,\r\n      termsOfServiceUrl: props.termsOfServiceUrl,\r\n      title: props.title,\r\n      titleIconUrl: props.titleIcon,\r\n    };\r\n  }, [\r\n    props.privacyPolicyUrl,\r\n    props.showThirdwebBranding,\r\n    props.termsOfServiceUrl,\r\n    props.title,\r\n    props.titleIcon,\r\n  ]);\r\n\r\n  return (\r\n    <WalletUIStatesProvider theme={props.theme} isOpen={true}>\r\n      <ConnectModal\r\n        onClose={props.onClose}\r\n        shouldSetActive={props.setActive === undefined ? true : props.setActive}\r\n        accountAbstraction={props.accountAbstraction}\r\n        // TODO: not set up in `useConnectModal` for some reason?\r\n        auth={undefined}\r\n        chain={props.chain}\r\n        client={props.client}\r\n        connectLocale={props.connectLocale}\r\n        meta={meta}\r\n        size={size}\r\n        welcomeScreen={props.welcomeScreen}\r\n        localeId={props.locale || \"en_US\"}\r\n        onConnect={props.onConnect}\r\n        recommendedWallets={props.recommendedWallets}\r\n        showAllWallets={props.showAllWallets}\r\n        wallets={wallets}\r\n        chains={props.chains}\r\n        walletConnect={props.walletConnect}\r\n      />\r\n    </WalletUIStatesProvider>\r\n  );\r\n}\r\n\r\n/**\r\n * Options for configuring Connect Modal for [`useConnectModal`](https://portal.thirdweb.com/references/typescript/v5/useConnectModal) hook\r\n * @connectWallet\r\n */\r\nexport type UseConnectModalOptions = {\r\n  /**\r\n   * Whether to set the connected wallet as active wallet or not\r\n   *\r\n   * By default, It is set to `true`\r\n   *\r\n   * You can set it to `false` and use the retunred wallet from the `connect` method if you want to connect wallet without setting it as active wallet\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * function Example() {\r\n   *  const { connect } = useConnectModal();\r\n   *  return <button> onClick={async () => {\r\n   *  const wallet = await connect({ setActive: false, client });\r\n   * }}>\r\n   *  Connect\r\n   * </button>\r\n   * }\r\n   * ```\r\n   */\r\n  setActive?: boolean;\r\n\r\n  /**\r\n   * A client is the entry point to the thirdweb SDK.\r\n   * It is required for all other actions.\r\n   * You can create a client using the `createThirdwebClient` function. Refer to the [Creating a Client](https://portal.thirdweb.com/typescript/v5/client) documentation for more information.\r\n   *\r\n   * You must provide a `clientId` or `secretKey` in order to initialize a client. Pass `clientId` if you want for client-side usage and `secretKey` for server-side usage.\r\n   *\r\n   * ```tsx\r\n   * import { createThirdwebClient } from \"thirdweb\";\r\n   *\r\n   * const client = createThirdwebClient({\r\n   *  clientId: \"<your_client_id>\",\r\n   * })\r\n   * ```\r\n   */\r\n  client: ThirdwebClient;\r\n\r\n  /**\r\n   * By default - Connect Modal UI uses the `en-US` locale for english language users.\r\n   *\r\n   * You can customize the language used in the Connect Modal UI by setting the `locale` prop.\r\n   *\r\n   * Refer to the [`LocaleId`](https://portal.thirdweb.com/references/typescript/v5/LocaleId) type for supported locales.\r\n   */\r\n  locale?: LocaleId;\r\n\r\n  /**\r\n   * Array of supported wallets. If not provided, default wallets will be used.\r\n   * @example\r\n   * ```tsx\r\n   * import { AutoConnect } from \"thirdweb/react\";\r\n   * import { createWallet, inAppWallet } from \"thirdweb/wallets\";\r\n   *\r\n   * const wallets = [\r\n   *   inAppWallet(),\r\n   *   createWallet(\"io.metamask\"),\r\n   *   createWallet(\"com.coinbase.wallet\"),\r\n   *   createWallet(\"me.rainbow\"),\r\n   * ];\r\n   *\r\n   * function Example() {\r\n   *  const { connect } = useConnectModal();\r\n   *  return <button> onClick={() => connect({ wallets, client })}> Connect </button>\r\n   * }\r\n   * ```\r\n   *\r\n   * If no wallets are specified. The component will show All the EIP-6963 compliant installed wallet extensions, as well as below default wallets:\r\n   *\r\n   * ```tsx\r\n   * const defaultWallets = [\r\n   *  inAppWallet(),\r\n   *  createWallet(\"io.metamask\"),\r\n   *  createWallet(\"com.coinbase.wallet\"),\r\n   *  createWallet(\"me.rainbow\"),\r\n   *  createWallet(\"io.zerion.wallet\"),\r\n   * ]\r\n   * ```\r\n   *\r\n   * Connect Modal also shows a \"All wallets\" button at the end of wallet list which allows user to connect to any of the 350+ wallets\r\n   */\r\n  wallets?: Wallet[];\r\n\r\n  /**\r\n   * Metadata of the app that will be passed to connected wallet. Setting this is highly recommended.\r\n   *\r\n   * Some wallets display this information to the user when they connect to your app.\r\n   * @example\r\n   * ```ts\r\n   * {\r\n   *   name: \"My App\",\r\n   *   url: \"https://my-app.com\",\r\n   *   description: \"some description about your app\",\r\n   *   logoUrl: \"https://path/to/my-app/logo.svg\",\r\n   * };\r\n   * ```\r\n   */\r\n  appMetadata?: AppMetadata;\r\n\r\n  /**\r\n   * The [`Chain`](https://portal.thirdweb.com/references/typescript/v5/Chain) object of the blockchain you want the wallet to connect to\r\n   *\r\n   * If a `chain` is not specified, Wallet will be connected to whatever is the default set in the wallet.\r\n   *\r\n   * If a `chain` is specified, Wallet will be prompted to switch to given chain after connection if it is not already connected to it.\r\n   * This ensures that the wallet is connected to the correct blockchain before interacting with your app.\r\n   *\r\n   * You can create a `Chain` object using the [`defineChain`](https://portal.thirdweb.com/references/typescript/v5/defineChain) function.\r\n   * At minimum, you need to pass the `id` of the blockchain to `defineChain` function to create a `Chain` object.\r\n   * ```\r\n   */\r\n  chain?: Chain;\r\n\r\n  /**\r\n   * Array of chains that your app supports.\r\n   *\r\n   * This is only relevant if your app is a multi-chain app and works across multiple blockchains.\r\n   * If your app only works on a single blockchain, you should only specify the `chain` prop.\r\n   *\r\n   * Given list of chains will be sent to wallet at the time of connection if the wallet supports requesting multiple chains ( example: WalletConnect ) so that users can switch between the chains post connection easily\r\n   *\r\n   * You can create a `Chain` object using the [`defineChain`](https://portal.thirdweb.com/references/typescript/v5/defineChain) function.\r\n   * At minimum, you need to pass the `id` of the blockchain to `defineChain` function to create a `Chain` object.\r\n   *\r\n   * ```tsx\r\n   * import { defineChain } from \"thirdweb/react\";\r\n   *\r\n   * const polygon = defineChain({\r\n   *   id: 137,\r\n   * });\r\n   * ```\r\n   */\r\n  chains?: Chain[];\r\n\r\n  /**\r\n   * Set the theme for the Connect Modal. By default it is set to `\"dark\"`\r\n   *\r\n   * theme can be set to either `\"dark\"`, `\"light\"` or a custom theme object.\r\n   * You can also import [`lightTheme`](https://portal.thirdweb.com/references/typescript/v5/lightTheme)\r\n   * or [`darkTheme`](https://portal.thirdweb.com/references/typescript/v5/darkTheme)\r\n   * functions from `thirdweb/react` to use the default themes as base and overrides parts of it.\r\n   * @example\r\n   * ```ts\r\n   * import { lightTheme } from \"thirdweb/react\";\r\n   *\r\n   * const customTheme = lightTheme({\r\n   *  colors: {\r\n   *    modalBg: 'red'\r\n   *  }\r\n   * })\r\n   * ```\r\n   */\r\n  theme?: \"dark\" | \"light\" | Theme;\r\n\r\n  /**\r\n   * Configure options for WalletConnect\r\n   *\r\n   * By default WalletConnect uses the thirdweb's default project id.\r\n   * Setting your own project id is recommended.\r\n   *\r\n   * You can create a project id by signing up on [walletconnect.com](https://walletconnect.com/)\r\n   */\r\n  walletConnect?: {\r\n    projectId?: string;\r\n  };\r\n\r\n  /**\r\n   * Enable Account abstraction for all wallets. This will connect to the users's smart account based on the connected personal wallet and the given options.\r\n   *\r\n   * This allows to sponsor gas fees for your user's transaction using the thirdweb account abstraction infrastructure.\r\n   *\r\n   * ```tsx\r\n   * * function Example() {\r\n   *  const { connect } = useConnectModal();\r\n   *\r\n   * async function handleConnect() {\r\n   *  await connect({\r\n   *    client,\r\n   *    accountAbstraction: {\r\n   *      factoryAddress: \"0x123...\",\r\n   *      chain: sepolia,\r\n   *      sponsorGas: true\r\n   *    }\r\n   *  })\r\n   * }\r\n   *\r\n   *  return (\r\n   *  <button> onClick={handleConnect}>\r\n   *    Connect\r\n   *  </button>\r\n   * )\r\n   *\r\n   * }\r\n   * ```\r\n   */\r\n  accountAbstraction?: SmartWalletOptions;\r\n\r\n  /**\r\n   * Wallets to show as recommended in the Connect Modal\r\n   */\r\n  recommendedWallets?: Wallet[];\r\n\r\n  /**\r\n   * By default, Connect modal shows a \"All Wallets\" button that shows a list of 350+ wallets.\r\n   *\r\n   * You can disable this button by setting `showAllWallets` prop to `false`\r\n   */\r\n  showAllWallets?: boolean;\r\n\r\n  /**\r\n   * Title to show in Connect Modal\r\n   *\r\n   * The default is `\"Connect\"`\r\n   */\r\n  title?: string;\r\n\r\n  /**\r\n   * Replace the default thirdweb icon next to Modal title with your own icon\r\n   *\r\n   * Set to empty string (`\"\"`) to hide the icon\r\n   */\r\n  titleIcon?: string;\r\n\r\n  /**\r\n   * Set the size of the connect modal on desktop - `\"compact\"` or `\"wide\"`\r\n   *\r\n   * Modal size is always `compact` on mobile\r\n   *\r\n   * By default it is `\"wide\"` for desktop.\r\n   */\r\n  size?: \"compact\" | \"wide\";\r\n\r\n  /**\r\n   * URL of the \"terms of service\" page\r\n   *\r\n   * If provided, Modal will show a Terms of Service message at the bottom with below link\r\n   */\r\n  termsOfServiceUrl?: string;\r\n\r\n  /**\r\n   * URL of the \"privacy policy\" page\r\n   *\r\n   * If provided, Modal will show a Privacy Policy message at the bottom with below link\r\n   */\r\n  privacyPolicyUrl?: string;\r\n\r\n  /**\r\n   * Customize the welcome screen. This prop is only applicable when modal size prop is set to \"wide\". On \"wide\" Modal size, a welcome screen is shown on the right side of the modal.\r\n   *\r\n   * This screen can be customized in two ways\r\n   *\r\n   * #### 1. Customize Metadata and Image\r\n   * ```tsx\r\n   * const welcomeScreen = {\r\n   *  title: \"your title\",\r\n   *  subtitle: \"your subtitle\",\r\n   *  img: {\r\n   *   src: \"https://your-image-url.png\",\r\n   *   width: 300,\r\n   *   height: 50,\r\n   *  },\r\n   * }\r\n   * ```\r\n   *\r\n   * #### 2. Render Custom Component\r\n   *\r\n   * ```tsx\r\n   * const welcomeScreen = () => <YourCustomComponent />\r\n   * ```\r\n   */\r\n  welcomeScreen?: WelcomeScreen;\r\n\r\n  /**\r\n   * By default Connect Modal shows \"Powered by Thirdweb\" branding at the bottom of the Modal.\r\n   *\r\n   * If you want to hide the branding, set this prop to `false`\r\n   */\r\n  showThirdwebBranding?: boolean;\r\n};\r\n", "\"use client\";\r\n\r\nimport {\r\n  type ThirdwebContract,\r\n  getContract,\r\n} from \"../../../../../../contract/contract.js\";\r\nimport { getContractMetadata } from \"../../../../../../extensions/common/read/getContractMetadata.js\";\r\nimport { getNFT } from \"../../../../../../extensions/erc1155/read/getNFT.js\";\r\nimport type { PreparedTransaction } from \"../../../../../../transaction/prepare-transaction.js\";\r\nimport type { BaseTransactionOptions } from \"../../../../../../transaction/types.js\";\r\nimport type { Account } from \"../../../../../../wallets/interfaces/wallet.js\";\r\nimport { useReadContract } from \"../../../../../core/hooks/contract/useReadContract.js\";\r\nimport { useSendAndConfirmTransaction } from \"../../../../../core/hooks/transaction/useSendAndConfirmTransaction.js\";\r\nimport { useActiveAccount } from \"../../../../../core/hooks/wallets/useActiveAccount.js\";\r\nimport { TransactionButton } from \"../../../TransactionButton/index.js\";\r\nimport type {\r\n  ClaimButtonProps,\r\n  ClaimParams,\r\n  Erc20ClaimParams,\r\n  Erc721ClaimParams,\r\n  Erc1155ClaimParams,\r\n} from \"./types.js\";\r\n\r\n/**\r\n * This button is used to claim tokens (NFT or ERC20) from a given thirdweb Drop contract.\r\n *\r\n * there are 3 type of Drop contract: NFT Drop (DropERC721), Edition Drop (DropERC1155) and Token Drop (DropERC20)\r\n *\r\n * Learn more: https://thirdweb.com/explore/drops\r\n *\r\n *\r\n * Note: This button only works with thirdweb Drop contracts.\r\n * For custom contract, please use [`TransactionButton`](https://portal.thirdweb.com/references/typescript/v5/TransactionButton)\r\n * @param props\r\n * @returns A wrapper for TransactionButton\r\n *\r\n * @component\r\n * @example\r\n *\r\n * Example for claiming NFT from an NFT Drop contract\r\n * ```tsx\r\n * import { ClaimButton } from \"thirdweb/react\";\r\n * import { ethereum } from \"thirdweb/chains\";\r\n *\r\n * <ClaimButton\r\n *   contractAddress=\"0x...\" // contract address of the NFT Drop\r\n *   chain={ethereum}\r\n *   client={client}\r\n *   claimParams={{\r\n *     type: \"ERC721\",\r\n *     quantity: 1n, // claim 1 token\r\n *   }}\r\n * >\r\n *   Claim now\r\n * </ClaimButton>\r\n * ```\r\n *\r\n * For Edition Drop (ERC1155)\r\n * ```tsx\r\n * <ClaimButton\r\n *   contractAddress=\"0x...\" // contract address of the Edition Drop\r\n *   chain={ethereum}\r\n *   client={client}\r\n *   claimParams={{\r\n *     type: \"ERC1155\",\r\n *     quantity: 1n,\r\n *     tokenId: 0n,\r\n *   }}\r\n * >\r\n *   Claim now\r\n * </ClaimButton>\r\n * ```\r\n *\r\n * For Token Drop (ERC20)\r\n * ```tsx\r\n * <ClaimButton\r\n *   contractAddress=\"0x...\" // contract address of the Token Drop\r\n *   chain={ethereum}\r\n *   client={client}\r\n *   claimParams={{\r\n *     type: \"ERC20\",\r\n *     quantity: \"100\", // claim 100 ERC20 tokens\r\n *     // instead of `quantity`, you can also use `quantityInWei` (bigint)\r\n *   }}\r\n * >\r\n *   Claim now\r\n * </ClaimButton>\r\n * ```\r\n *\r\n * Attach custom Pay metadata\r\n * ```tsx\r\n * <ClaimButton\r\n *   payModal={{\r\n *     metadata: {\r\n *       name: \"Van Gogh Starry Night\",\r\n *       image: \"https://unsplash.com/starry-night.png\"\r\n *     }\r\n *   }}\r\n * >...</ClaimButton>\r\n *\r\n * ```\r\n *\r\n * Since this button uses the `TransactionButton`, it can take in any props that can be passed\r\n * to the [`TransactionButton`](https://portal.thirdweb.com/references/typescript/v5/TransactionButton)\r\n *\r\n *\r\n * For error handling & callbacks on transaction-sent and transaction-confirmed,\r\n * please refer to the TransactionButton docs.\r\n */\r\nexport function ClaimButton(props: ClaimButtonProps) {\r\n  const { children, contractAddress, client, chain, claimParams, payModal } =\r\n    props;\r\n  const defaultPayModalMetadata = payModal ? payModal.metadata : undefined;\r\n  const contract = getContract({\r\n    address: contractAddress,\r\n    client,\r\n    chain,\r\n  });\r\n\r\n  const { data: payMetadata } = useReadContract(getPayMetadata, {\r\n    contract,\r\n    tokenId: claimParams.type === \"ERC1155\" ? claimParams.tokenId : undefined,\r\n    queryOptions: {\r\n      enabled: !defaultPayModalMetadata,\r\n    },\r\n  });\r\n  const account = useActiveAccount();\r\n  const { mutateAsync } = useSendAndConfirmTransaction();\r\n  return (\r\n    <TransactionButton\r\n      payModal={{\r\n        metadata: defaultPayModalMetadata || payMetadata,\r\n        ...payModal,\r\n      }}\r\n      transaction={async () => {\r\n        if (!account) {\r\n          throw new Error(\"No account detected\");\r\n        }\r\n        const [claimTx, { getApprovalForTransaction }] = await Promise.all([\r\n          getClaimTransaction({\r\n            contract,\r\n            account,\r\n            claimParams,\r\n          }),\r\n          import(\r\n            \"../../../../../../extensions/erc20/write/getApprovalForTransaction.js\"\r\n          ),\r\n        ]);\r\n        const approveTx = await getApprovalForTransaction({\r\n          transaction: claimTx,\r\n          account,\r\n        });\r\n        if (approveTx) {\r\n          await mutateAsync(approveTx);\r\n        }\r\n        return claimTx;\r\n      }}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </TransactionButton>\r\n  );\r\n}\r\n\r\n/**\r\n * We can only get the image and name for Edition Drop\r\n * For NFT Drop and Token Drop we fall back to the name & image of the contract\r\n * @internal\r\n */\r\nasync function getPayMetadata(\r\n  options: BaseTransactionOptions<{ tokenId?: bigint }>,\r\n): Promise<{ name?: string; image?: string }> {\r\n  const { contract, tokenId } = options;\r\n  const [contractMetadata, nft] = await Promise.all([\r\n    getContractMetadata(options),\r\n    tokenId ? getNFT({ contract, tokenId }) : undefined,\r\n  ]);\r\n  if (tokenId) {\r\n    return {\r\n      image: nft?.metadata?.image,\r\n      name: nft?.metadata?.name,\r\n    };\r\n  }\r\n  return {\r\n    image: contractMetadata?.image,\r\n    name: contractMetadata?.name,\r\n  };\r\n}\r\n\r\n/**\r\n * @internal Export for test\r\n */\r\nasync function getClaimTransaction({\r\n  contract,\r\n  account,\r\n  claimParams,\r\n}: {\r\n  contract: ThirdwebContract;\r\n  account: Account | undefined;\r\n  claimParams: ClaimParams;\r\n}): Promise<PreparedTransaction> {\r\n  switch (claimParams.type) {\r\n    case \"ERC721\":\r\n      return await getERC721ClaimTo({ contract, account, claimParams });\r\n    case \"ERC1155\":\r\n      return await getERC1155ClaimTo({ contract, account, claimParams });\r\n    case \"ERC20\": {\r\n      return await getERC20ClaimTo({ contract, account, claimParams });\r\n    }\r\n    default:\r\n      throw new Error(\r\n        \"Invalid contract type. Must be either NFT Drop (ERC721), Edition Drop (ERC1155) or Token Drop (ERC20)\",\r\n      );\r\n  }\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport async function getERC721ClaimTo({\r\n  contract,\r\n  account,\r\n  claimParams,\r\n}: {\r\n  contract: ThirdwebContract;\r\n  account: Account | undefined;\r\n  claimParams: Erc721ClaimParams;\r\n}) {\r\n  const { claimTo } = await import(\r\n    \"../../../../../../extensions/erc721/drops/write/claimTo.js\"\r\n  );\r\n\r\n  return claimTo({\r\n    contract,\r\n    to: claimParams.to || account?.address || \"\",\r\n    quantity: claimParams.quantity,\r\n    from: claimParams.from,\r\n  });\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport async function getERC1155ClaimTo({\r\n  contract,\r\n  account,\r\n  claimParams,\r\n}: {\r\n  contract: ThirdwebContract;\r\n  account: Account | undefined;\r\n  claimParams: Erc1155ClaimParams;\r\n}) {\r\n  const { claimTo } = await import(\r\n    \"../../../../../../extensions/erc1155/drops/write/claimTo.js\"\r\n  );\r\n\r\n  return claimTo({\r\n    contract,\r\n    to: claimParams.to || account?.address || \"\",\r\n    quantity: claimParams.quantity,\r\n    tokenId: claimParams.tokenId,\r\n    from: claimParams.from,\r\n  });\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport async function getERC20ClaimTo({\r\n  contract,\r\n  account,\r\n  claimParams,\r\n}: {\r\n  contract: ThirdwebContract;\r\n  account: Account | undefined;\r\n  claimParams: Erc20ClaimParams;\r\n}) {\r\n  // Ideally we should check if the contract is ERC20 using `isERC20`\r\n  // however TokenDrop doesn't have `supportsInterface` so it doesn't work\r\n  const { claimTo } = await import(\r\n    \"../../../../../../extensions/erc20/drops/write/claimTo.js\"\r\n  );\r\n\r\n  if (\"quantity\" in claimParams) {\r\n    return claimTo({\r\n      contract,\r\n      to: claimParams.to || account?.address || \"\",\r\n      quantity: claimParams.quantity,\r\n      from: claimParams.from,\r\n    });\r\n  }\r\n  if (\"quantityInWei\" in claimParams) {\r\n    return claimTo({\r\n      contract,\r\n      to: claimParams.to || account?.address || \"\",\r\n      quantityInWei: claimParams.quantityInWei,\r\n      from: claimParams.from,\r\n    });\r\n  }\r\n  throw new Error(\"Missing quantity or quantityInWei\");\r\n}\r\n", "\"use client\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport type { Chain } from \"../../../../../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../../../../../client/client.js\";\r\nimport { getContract } from \"../../../../../../contract/contract.js\";\r\nimport { getListing } from \"../../../../../../extensions/marketplace/direct-listings/read/getListing.js\";\r\nimport type { BaseTransactionOptions } from \"../../../../../../transaction/types.js\";\r\nimport { useReadContract } from \"../../../../../core/hooks/contract/useReadContract.js\";\r\nimport type { TransactionButtonProps } from \"../../../../../core/hooks/transaction/transaction-button-utils.js\";\r\nimport { useSendAndConfirmTransaction } from \"../../../../../core/hooks/transaction/useSendAndConfirmTransaction.js\";\r\nimport { useActiveAccount } from \"../../../../../core/hooks/wallets/useActiveAccount.js\";\r\nimport { TransactionButton } from \"../../../TransactionButton/index.js\";\r\n\r\nexport type BuyDirectListingButtonProps = Omit<\r\n  TransactionButtonProps,\r\n  \"transaction\"\r\n> & {\r\n  /**\r\n   * The contract address of the Marketplace v3 contract.\r\n   */\r\n  contractAddress: string;\r\n\r\n  /**\r\n   * The chain which the Drop contract is deployed on\r\n   */\r\n  chain: Chain;\r\n\r\n  /**\r\n   * thirdweb Client\r\n   */\r\n  client: ThirdwebClient;\r\n\r\n  /**\r\n   * ID of the marketplace's DirectListing\r\n   */\r\n  listingId: bigint;\r\n\r\n  /**\r\n   * Qty to buy (optional)\r\n   *\r\n   * - For ERC721 listing: the `quantity` is always hard-coded to 1n - passing this props doesn't do anything\r\n   *\r\n   * - For ERC1155 listing: the `quantity` defaults to the quantity of the listing if not specified.\r\n   *\r\n   * The component will also throw an error if  you pass a `quantity` and it's greater than the listing's quantity\r\n   */\r\n  quantity?: bigint;\r\n};\r\n\r\n/**\r\n * This button is used with thirdweb Marketplace v3 contract, for buying NFT(s) from a listing.\r\n *\r\n * Under the hood, it prepares a transaction using the [`buyFromListing` extension](https://portal.thirdweb.com/references/typescript/v5/marketplace/buyFromListing)\r\n * and then pass it to a <TransactionButton />\r\n *\r\n * Since it uses the TransactionButton, it can take in any props that can be passed\r\n * to the [`TransactionButton`](https://portal.thirdweb.com/references/typescript/v5/TransactionButton)\r\n *\r\n *\r\n * @param props\r\n * @returns <TransactionButton />\r\n *\r\n * @example\r\n * ```tsx\r\n * import { BuyDirectListingButton } from \"thirdweb/react\";\r\n *\r\n * <BuyDirectListingButton\r\n *   contractAddress=\"0x...\" // contract address of the marketplace v3\r\n *   chain={...} // the chain which the marketplace contract is deployed on\r\n *   client={...} // thirdweb client\r\n *   listingId={100n} // the listingId or the item you want to buy\r\n *   quantity={1n} // optional - see the docs to learn more\r\n * >\r\n *   Buy NFT\r\n * </BuyDirectListingButton>\r\n * ```\r\n *\r\n * For error handling & callbacks on transaction-sent and transaction-confirmed,\r\n * please refer to the TransactionButton docs.\r\n * @component\r\n */\r\nexport function BuyDirectListingButton(props: BuyDirectListingButtonProps) {\r\n  const {\r\n    contractAddress,\r\n    listingId,\r\n    children,\r\n    chain,\r\n    client,\r\n    quantity,\r\n    payModal,\r\n  } = props;\r\n  const defaultPayModalMetadata = payModal ? payModal.metadata : undefined;\r\n  const account = useActiveAccount();\r\n  const contract = getContract({\r\n    address: contractAddress,\r\n    client,\r\n    chain,\r\n  });\r\n\r\n  const { data: payMetadata } = useReadContract(getPayMetadata, {\r\n    contract,\r\n    listingId,\r\n    queryOptions: {\r\n      enabled: !defaultPayModalMetadata,\r\n    },\r\n  });\r\n\r\n  const { mutateAsync } = useSendAndConfirmTransaction();\r\n\r\n  const prepareBuyTransaction = useCallback(async () => {\r\n    if (!account) {\r\n      throw new Error(\"No account detected\");\r\n    }\r\n    const [listing, { getApprovalForTransaction }, { buyFromListing }] =\r\n      await Promise.all([\r\n        getListing({\r\n          contract,\r\n          listingId,\r\n        }),\r\n        import(\r\n          \"../../../../../../extensions/erc20/write/getApprovalForTransaction.js\"\r\n        ),\r\n        import(\r\n          \"../../../../../../extensions/marketplace/direct-listings/write/buyFromListing.js\"\r\n        ),\r\n      ]);\r\n    if (!listing) {\r\n      throw new Error(`Could not retrieve listing with ID: ${listingId}`);\r\n    }\r\n\r\n    let _quantity = 1n;\r\n    // For ERC721 the quantity should always be 1n. We throw an error if user passes a different props\r\n    if (listing.asset.type === \"ERC721\") {\r\n      if (typeof quantity === \"bigint\" && (quantity !== 1n || quantity < 0n)) {\r\n        throw new Error(\r\n          \"Invalid quantity. This is an ERC721 listing & quantity is always `1n`\",\r\n        );\r\n      }\r\n    } else if (listing.asset.type === \"ERC1155\") {\r\n      if (typeof quantity === \"bigint\") {\r\n        if (quantity > listing.quantity) {\r\n          throw new Error(\r\n            `quantity exceeds available amount. Available: ${listing.quantity.toString()}`,\r\n          );\r\n        }\r\n        if (quantity < 0n) {\r\n          throw new Error(\"Invalid quantity. Should be at least 1n\");\r\n        }\r\n        _quantity = quantity;\r\n      }\r\n      _quantity = listing.quantity;\r\n    }\r\n\r\n    const buyTx = buyFromListing({\r\n      contract,\r\n      listingId,\r\n      quantity: _quantity,\r\n      recipient: account?.address || \"\",\r\n    });\r\n\r\n    const approveTx = await getApprovalForTransaction({\r\n      transaction: buyTx,\r\n      account,\r\n    });\r\n\r\n    if (approveTx) {\r\n      await mutateAsync(approveTx);\r\n    }\r\n\r\n    return buyTx;\r\n  }, [account, contract, quantity, listingId, mutateAsync]);\r\n\r\n  return (\r\n    <TransactionButton\r\n      payModal={{\r\n        metadata: defaultPayModalMetadata || payMetadata,\r\n        ...payModal,\r\n      }}\r\n      transaction={() => prepareBuyTransaction()}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </TransactionButton>\r\n  );\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nasync function getPayMetadata(\r\n  options: BaseTransactionOptions<{ listingId: bigint }>,\r\n): Promise<{ name?: string; image?: string }> {\r\n  const listing = await getListing(options);\r\n  if (!listing) {\r\n    return { name: undefined, image: undefined };\r\n  }\r\n  return {\r\n    name: listing.asset?.metadata?.name,\r\n    image: listing.asset?.metadata?.image,\r\n  };\r\n}\r\n", "\"use client\";\r\n\r\nimport { useCallback } from \"react\";\r\nimport type { Chain } from \"../../../../../../chains/types.js\";\r\nimport type { ThirdwebClient } from \"../../../../../../client/client.js\";\r\nimport { getContract } from \"../../../../../../contract/contract.js\";\r\nimport { isERC721 } from \"../../../../../../extensions/erc721/read/isERC721.js\";\r\nimport { isERC1155 } from \"../../../../../../extensions/erc1155/read/isERC1155.js\";\r\nimport {\r\n  type CreateListingParams,\r\n  createListing,\r\n} from \"../../../../../../extensions/marketplace/direct-listings/write/createListing.js\";\r\nimport type { BaseTransactionOptions } from \"../../../../../../transaction/types.js\";\r\nimport { useReadContract } from \"../../../../../core/hooks/contract/useReadContract.js\";\r\nimport type { TransactionButtonProps } from \"../../../../../core/hooks/transaction/transaction-button-utils.js\";\r\nimport { useSendAndConfirmTransaction } from \"../../../../../core/hooks/transaction/useSendAndConfirmTransaction.js\";\r\nimport { useActiveAccount } from \"../../../../../core/hooks/wallets/useActiveAccount.js\";\r\nimport { TransactionButton } from \"../../../TransactionButton/index.js\";\r\n\r\nexport type CreateDirectListingButtonProps = Omit<\r\n  TransactionButtonProps,\r\n  \"transaction\"\r\n> &\r\n  CreateListingParams & {\r\n    contractAddress: string;\r\n    chain: Chain;\r\n    client: ThirdwebClient;\r\n  };\r\n\r\n/**\r\n * This button is used to create Direct listings for the thirdweb Marketplace v3 contract\r\n *\r\n * It uses the [`TransactionButton`](https://portal.thirdweb.com/references/typescript/v5/TransactionButton)\r\n * and the [`createListing` extension](https://portal.thirdweb.com/references/typescript/v5/marketplace/createListing) under the hood\r\n * which means it inherits all the props of those 2 components.\r\n *\r\n * @example\r\n * ```tsx\r\n * import { CreateDirectListingButton } from \"thirdweb/react\";\r\n *\r\n * <CreateDirectListingButton\r\n *   contractAddress=\"0x...\" // contract address for the marketplace-v3\r\n *   chain={...} // the chain which the marketplace contract is deployed on\r\n *\r\n *   // These props below are the same props for `createListing`\r\n *   // to get the full list, check the docs link above\r\n *   tokenId={0n}\r\n *   assetContractAddress=\"0x...\" // The NFT contract address whose NFT(s) you want to sell\r\n *   pricePerToken={\"0.1\"} // sell for 0.1 <native token>\r\n * >\r\n *   Sell NFT\r\n * </CreateDirectListingButton>\r\n * ```\r\n *\r\n * For error handling & callbacks on transaction-sent and transaction-confirmed,\r\n * please refer to the TransactionButton docs.\r\n * @component\r\n */\r\nexport function CreateDirectListingButton(\r\n  props: CreateDirectListingButtonProps,\r\n) {\r\n  const {\r\n    contractAddress,\r\n    chain,\r\n    client,\r\n    children,\r\n    payModal,\r\n    assetContractAddress,\r\n    tokenId,\r\n  } = props;\r\n  const marketplaceContract = getContract({\r\n    address: contractAddress,\r\n    chain,\r\n    client,\r\n  });\r\n  const account = useActiveAccount();\r\n  const defaultPayModalMetadata = payModal ? payModal.metadata : undefined;\r\n  const nftContract = getContract({\r\n    address: assetContractAddress,\r\n    chain,\r\n    client,\r\n  });\r\n  const { data: payMetadata } = useReadContract(getPayMetadata, {\r\n    contract: nftContract,\r\n    tokenId,\r\n    queryOptions: {\r\n      enabled: !defaultPayModalMetadata,\r\n    },\r\n  });\r\n  const { mutateAsync } = useSendAndConfirmTransaction();\r\n\r\n  const prepareTransaction = useCallback(async () => {\r\n    if (!account) {\r\n      throw new Error(\"No account detected\");\r\n    }\r\n    const [is721, is1155] = await Promise.all([\r\n      isERC721({ contract: nftContract }),\r\n      isERC1155({ contract: nftContract }),\r\n    ]);\r\n    if (!is1155 && !is721) {\r\n      throw new Error(\"Asset must either be ERC721 or ERC1155\");\r\n    }\r\n    // Check for token approval\r\n    if (is1155) {\r\n      const [{ isApprovedForAll }, { setApprovalForAll }] = await Promise.all([\r\n        import(\r\n          \"../../../../../../extensions/erc1155/__generated__/IERC1155/read/isApprovedForAll.js\"\r\n        ),\r\n        import(\r\n          \"../../../../../../extensions/erc1155/__generated__/IERC1155/write/setApprovalForAll.js\"\r\n        ),\r\n      ]);\r\n      const isApproved = await isApprovedForAll({\r\n        contract: nftContract,\r\n        operator: marketplaceContract.address,\r\n        owner: account.address,\r\n      });\r\n      if (!isApproved) {\r\n        const transaction = setApprovalForAll({\r\n          contract: nftContract,\r\n          operator: marketplaceContract.address,\r\n          approved: true,\r\n        });\r\n        await mutateAsync(transaction);\r\n      }\r\n    } else {\r\n      const [{ isApprovedForAll }, { setApprovalForAll }, { getApproved }] =\r\n        await Promise.all([\r\n          import(\r\n            \"../../../../../../extensions/erc721/__generated__/IERC721A/read/isApprovedForAll.js\"\r\n          ),\r\n          import(\r\n            \"../../../../../../extensions/erc721/__generated__/IERC721A/write/setApprovalForAll.js\"\r\n          ),\r\n          import(\r\n            \"../../../../../../extensions/erc721/__generated__/IERC721A/read/getApproved.js\"\r\n          ),\r\n        ]);\r\n      const [isApproved, tokenApproved] = await Promise.all([\r\n        isApprovedForAll({\r\n          contract: nftContract,\r\n          operator: marketplaceContract.address,\r\n          owner: account.address,\r\n        }),\r\n        getApproved({ contract: nftContract, tokenId: props.tokenId }),\r\n      ]);\r\n\r\n      if (\r\n        !isApproved &&\r\n        tokenApproved.toLowerCase() !==\r\n          marketplaceContract.address.toLowerCase()\r\n      ) {\r\n        const transaction = setApprovalForAll({\r\n          contract: nftContract,\r\n          operator: marketplaceContract.address,\r\n          approved: true,\r\n        });\r\n        await mutateAsync(transaction);\r\n      }\r\n    }\r\n    const listingTx = createListing({\r\n      contract: marketplaceContract,\r\n      ...props,\r\n    });\r\n\r\n    return listingTx;\r\n  }, [marketplaceContract, props, account, mutateAsync, nftContract]);\r\n\r\n  return (\r\n    <TransactionButton\r\n      transaction={() => prepareTransaction()}\r\n      payModal={{\r\n        metadata: defaultPayModalMetadata || payMetadata,\r\n        ...payModal,\r\n      }}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </TransactionButton>\r\n  );\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nasync function getPayMetadata(\r\n  options: BaseTransactionOptions<{\r\n    tokenId: bigint;\r\n  }>,\r\n): Promise<{ name?: string; image?: string }> {\r\n  const [\r\n    { getContractMetadata },\r\n    { getNFT: getERC721 },\r\n    { getNFT: getERC1155 },\r\n  ] = await Promise.all([\r\n    import(\"../../../../../../extensions/common/read/getContractMetadata.js\"),\r\n    import(\"../../../../../../extensions/erc721/read/getNFT.js\"),\r\n    import(\"../../../../../../extensions/erc1155/read/getNFT.js\"),\r\n  ]);\r\n  const [is721, is1155, contractMetadata] = await Promise.all([\r\n    isERC721(options),\r\n    isERC1155(options),\r\n    getContractMetadata(options),\r\n  ]);\r\n  if (is721) {\r\n    const nft = await getERC721(options);\r\n    return {\r\n      image: nft?.metadata?.image,\r\n      name: nft?.metadata?.name,\r\n    };\r\n  }\r\n\r\n  if (is1155) {\r\n    const nft = await getERC1155(options);\r\n    return {\r\n      image: nft?.metadata?.image,\r\n      name: nft?.metadata?.name,\r\n    };\r\n  }\r\n\r\n  return {\r\n    image: contractMetadata?.image,\r\n    name: contractMetadata?.name,\r\n  };\r\n}\r\n", "import type { AbiParameterToPrimitiveType } from \"abitype\";\r\nimport type {\r\n  BaseTransactionOptions,\r\n  WithOverrides,\r\n} from \"../../../../../transaction/types.js\";\r\nimport { prepareContractCall } from \"../../../../../transaction/prepare-contract-call.js\";\r\nimport { encodeAbiParameters } from \"../../../../../utils/abi/encodeAbiParameters.js\";\r\nimport { once } from \"../../../../../utils/promise/once.js\";\r\nimport { detectMethod } from \"../../../../../utils/bytecode/detectExtension.js\";\r\n\r\n/**\r\n * Represents the parameters for the \"createListing\" function.\r\n */\r\nexport type CreateListingParams = WithOverrides<{\r\n  params: AbiParameterToPrimitiveType<{\r\n    type: \"tuple\";\r\n    name: \"_params\";\r\n    components: [\r\n      { type: \"address\"; name: \"assetContract\" },\r\n      { type: \"uint256\"; name: \"tokenId\" },\r\n      { type: \"uint256\"; name: \"quantity\" },\r\n      { type: \"address\"; name: \"currency\" },\r\n      { type: \"uint256\"; name: \"pricePerToken\" },\r\n      { type: \"uint128\"; name: \"startTimestamp\" },\r\n      { type: \"uint128\"; name: \"endTimestamp\" },\r\n      { type: \"bool\"; name: \"reserved\" },\r\n    ];\r\n  }>;\r\n}>;\r\n\r\nexport const FN_SELECTOR = \"0x746415b5\" as const;\r\nconst FN_INPUTS = [\r\n  {\r\n    type: \"tuple\",\r\n    name: \"_params\",\r\n    components: [\r\n      {\r\n        type: \"address\",\r\n        name: \"assetContract\",\r\n      },\r\n      {\r\n        type: \"uint256\",\r\n        name: \"tokenId\",\r\n      },\r\n      {\r\n        type: \"uint256\",\r\n        name: \"quantity\",\r\n      },\r\n      {\r\n        type: \"address\",\r\n        name: \"currency\",\r\n      },\r\n      {\r\n        type: \"uint256\",\r\n        name: \"pricePerToken\",\r\n      },\r\n      {\r\n        type: \"uint128\",\r\n        name: \"startTimestamp\",\r\n      },\r\n      {\r\n        type: \"uint128\",\r\n        name: \"endTimestamp\",\r\n      },\r\n      {\r\n        type: \"bool\",\r\n        name: \"reserved\",\r\n      },\r\n    ],\r\n  },\r\n] as const;\r\nconst FN_OUTPUTS = [\r\n  {\r\n    type: \"uint256\",\r\n    name: \"listingId\",\r\n  },\r\n] as const;\r\n\r\n/**\r\n * Checks if the `createListing` method is supported by the given contract.\r\n * @param availableSelectors An array of 4byte function selectors of the contract. You can get this in various ways, such as using \"whatsabi\" or if you have the ABI of the contract available you can use it to generate the selectors.\r\n * @returns A boolean indicating if the `createListing` method is supported.\r\n * @extension MARKETPLACE\r\n * @example\r\n * ```ts\r\n * import { isCreateListingSupported } from \"thirdweb/extensions/marketplace\";\r\n *\r\n * const supported = isCreateListingSupported([\"0x...\"]);\r\n * ```\r\n */\r\nexport function isCreateListingSupported(availableSelectors: string[]) {\r\n  return detectMethod({\r\n    availableSelectors,\r\n    method: [FN_SELECTOR, FN_INPUTS, FN_OUTPUTS] as const,\r\n  });\r\n}\r\n\r\n/**\r\n * Encodes the parameters for the \"createListing\" function.\r\n * @param options - The options for the createListing function.\r\n * @returns The encoded ABI parameters.\r\n * @extension MARKETPLACE\r\n * @example\r\n * ```ts\r\n * import { encodeCreateListingParams } from \"thirdweb/extensions/marketplace\";\r\n * const result = encodeCreateListingParams({\r\n *  params: ...,\r\n * });\r\n * ```\r\n */\r\nexport function encodeCreateListingParams(options: CreateListingParams) {\r\n  return encodeAbiParameters(FN_INPUTS, [options.params]);\r\n}\r\n\r\n/**\r\n * Encodes the \"createListing\" function into a Hex string with its parameters.\r\n * @param options - The options for the createListing function.\r\n * @returns The encoded hexadecimal string.\r\n * @extension MARKETPLACE\r\n * @example\r\n * ```ts\r\n * import { encodeCreateListing } from \"thirdweb/extensions/marketplace\";\r\n * const result = encodeCreateListing({\r\n *  params: ...,\r\n * });\r\n * ```\r\n */\r\nexport function encodeCreateListing(options: CreateListingParams) {\r\n  // we do a \"manual\" concat here to avoid the overhead of the \"concatHex\" function\r\n  // we can do this because we know the specific formats of the values\r\n  return (FN_SELECTOR +\r\n    encodeCreateListingParams(options).slice(\r\n      2,\r\n    )) as `${typeof FN_SELECTOR}${string}`;\r\n}\r\n\r\n/**\r\n * Prepares a transaction to call the \"createListing\" function on the contract.\r\n * @param options - The options for the \"createListing\" function.\r\n * @returns A prepared transaction object.\r\n * @extension MARKETPLACE\r\n * @example\r\n * ```ts\r\n * import { sendTransaction } from \"thirdweb\";\r\n * import { createListing } from \"thirdweb/extensions/marketplace\";\r\n *\r\n * const transaction = createListing({\r\n *  contract,\r\n *  params: ...,\r\n *  overrides: {\r\n *    ...\r\n *  }\r\n * });\r\n *\r\n * // Send the transaction\r\n * await sendTransaction({ transaction, account });\r\n * ```\r\n */\r\nexport function createListing(\r\n  options: BaseTransactionOptions<\r\n    | CreateListingParams\r\n    | {\r\n        asyncParams: () => Promise<CreateListingParams>;\r\n      }\r\n  >,\r\n) {\r\n  const asyncOptions = once(async () => {\r\n    return \"asyncParams\" in options ? await options.asyncParams() : options;\r\n  });\r\n\r\n  return prepareContractCall({\r\n    contract: options.contract,\r\n    method: [FN_SELECTOR, FN_INPUTS, FN_OUTPUTS] as const,\r\n    params: async () => {\r\n      const resolvedOptions = await asyncOptions();\r\n      return [resolvedOptions.params] as const;\r\n    },\r\n    value: async () => (await asyncOptions()).overrides?.value,\r\n    accessList: async () => (await asyncOptions()).overrides?.accessList,\r\n    gas: async () => (await asyncOptions()).overrides?.gas,\r\n    gasPrice: async () => (await asyncOptions()).overrides?.gasPrice,\r\n    maxFeePerGas: async () => (await asyncOptions()).overrides?.maxFeePerGas,\r\n    maxPriorityFeePerGas: async () =>\r\n      (await asyncOptions()).overrides?.maxPriorityFeePerGas,\r\n    nonce: async () => (await asyncOptions()).overrides?.nonce,\r\n    extraGas: async () => (await asyncOptions()).overrides?.extraGas,\r\n    erc20Value: async () => (await asyncOptions()).overrides?.erc20Value,\r\n  });\r\n}\r\n", "import type { Address } from \"abitype\";\r\nimport {\r\n  NATIVE_TOKEN_ADDRESS,\r\n  isNativeTokenAddress,\r\n} from \"../../../../constants/addresses.js\";\r\nimport { getContract } from \"../../../../contract/contract.js\";\r\nimport { eth_getBlockByNumber } from \"../../../../rpc/actions/eth_getBlockByNumber.js\";\r\nimport { getRpcClient } from \"../../../../rpc/rpc.js\";\r\nimport type { BaseTransactionOptions } from \"../../../../transaction/types.js\";\r\nimport { toUnits } from \"../../../../utils/units.js\";\r\nimport { isERC721 } from \"../../../erc721/read/isERC721.js\";\r\nimport { isERC1155 } from \"../../../erc1155/read/isERC1155.js\";\r\nimport * as CreateListing from \"../../__generated__/IDirectListings/write/createListing.js\";\r\n\r\n/**\r\n * @extension MARKETPLACE\r\n */\r\nexport type CreateListingParams = {\r\n  /**\r\n   * The contract address of the asset being listed\r\n   */\r\n  assetContractAddress: Address;\r\n  /**\r\n   * The ID of the token being listed\r\n   */\r\n  tokenId: bigint;\r\n  /**\r\n   * The quantity of tokens to list\r\n   *\r\n   * For ERC721s, this value can be omitted.\r\n   * @default 1\r\n   */\r\n  quantity?: bigint;\r\n  /**\r\n   * The contract address of the currency to accept for the listing\r\n   * @default NATIVE_TOKEN_ADDRESS\r\n   */\r\n  currencyContractAddress?: Address;\r\n  /**\r\n   * The start time of the listing\r\n   * @default new Date()\r\n   */\r\n  startTimestamp?: Date;\r\n  /**\r\n   * The end time of the listing\r\n   * @default new Date() + 10 years\r\n   */\r\n  endTimestamp?: Date;\r\n  /**\r\n   * Whether the listing is reserved to be bought from a specific set of buyers\r\n   * @default false\r\n   */\r\n  isReservedListing?: boolean;\r\n} & (\r\n  | {\r\n      /**\r\n       * The price per token (in Ether)\r\n       */\r\n      pricePerToken: string;\r\n    }\r\n  | {\r\n      /**\r\n       * The price per token (in wei)\r\n       */\r\n      pricePerTokenWei: string;\r\n    }\r\n);\r\n\r\n/**\r\n * Creates a direct listing.\r\n * @param options The options for creating the direct listing.\r\n * @returns The result of creating the direct listing.\r\n * @extension MARKETPLACE\r\n * @example\r\n * ```typescript\r\n * import { createListing } from \"thirdweb/extensions/marketplace\";\r\n * import { sendTransaction } from \"thirdweb\";\r\n *\r\n * const transaction = createListing({\r\n *   assetContractAddress: \"0x...\", // the NFT contract address that you want to sell\r\n *   tokenId={0n}, // the token id you want to sell\r\n *   pricePerToken=\"0.1\" // sell for 0.1 <native token>\r\n * });\r\n *\r\n * await sendTransaction({ transaction, account });\r\n * ```\r\n */\r\nexport function createListing(\r\n  options: BaseTransactionOptions<CreateListingParams>,\r\n) {\r\n  return CreateListing.createListing({\r\n    contract: options.contract,\r\n    asyncParams: async () => {\r\n      const assetContract = getContract({\r\n        ...options.contract,\r\n        address: options.assetContractAddress,\r\n      });\r\n\r\n      const rpcClient = getRpcClient(options.contract);\r\n\r\n      const [assetIsERC721, assetIsERC1155, lastestBlock] = await Promise.all([\r\n        isERC721({ contract: assetContract }),\r\n        isERC1155({ contract: assetContract }),\r\n        eth_getBlockByNumber(rpcClient, { blockTag: \"latest\" }),\r\n      ]);\r\n\r\n      // validate valid asset\r\n      if (!assetIsERC721 && !assetIsERC1155) {\r\n        throw new Error(\"AssetContract must implement ERC 1155 or ERC 721.\");\r\n      }\r\n\r\n      // validate the timestamps\r\n      let startTimestamp = BigInt(\r\n        Math.floor((options.startTimestamp ?? new Date()).getTime() / 1000),\r\n      );\r\n      const endTimestamp = BigInt(\r\n        Math.floor(\r\n          (\r\n            options.endTimestamp ??\r\n            new Date(Date.now() + 10 * 365 * 24 * 60 * 60 * 1000)\r\n          ).getTime() / 1000,\r\n        ),\r\n      );\r\n\r\n      if (startTimestamp <= lastestBlock.timestamp) {\r\n        // set the start time to the next block if it is in the past\r\n        startTimestamp = lastestBlock.timestamp + 1n;\r\n      }\r\n      if (startTimestamp >= endTimestamp) {\r\n        throw new Error(\"Start time must be before end time.\");\r\n      }\r\n\r\n      // valdiate quantity\r\n      let quantity: bigint;\r\n      if (assetIsERC721) {\r\n        // force quantity to 1 for ERC721s\r\n        quantity = 1n;\r\n      } else {\r\n        // otherwise use the provided quantity or default to 1\r\n        quantity = options.quantity ?? 1n;\r\n      }\r\n\r\n      // validate price\r\n      const currencyAddress =\r\n        options.currencyContractAddress ?? NATIVE_TOKEN_ADDRESS;\r\n      let pricePerToken: bigint;\r\n      if (\"pricePerToken\" in options) {\r\n        // for native token, we know decimals are 18\r\n        if (isNativeTokenAddress(currencyAddress)) {\r\n          pricePerToken = toUnits(options.pricePerToken, 18);\r\n        } else {\r\n          // otherwise get the decimals of the currency\r\n          const currencyContract = getContract({\r\n            ...options.contract,\r\n            address: currencyAddress,\r\n          });\r\n          const { decimals } = await import(\"../../../erc20/read/decimals.js\");\r\n          const currencyDecimals = await decimals({\r\n            contract: currencyContract,\r\n          });\r\n          pricePerToken = toUnits(options.pricePerToken, currencyDecimals);\r\n        }\r\n      } else {\r\n        pricePerToken = BigInt(options.pricePerTokenWei);\r\n      }\r\n\r\n      return {\r\n        params: {\r\n          assetContract: options.assetContractAddress,\r\n          tokenId: options.tokenId,\r\n          currency: options.currencyContractAddress ?? NATIVE_TOKEN_ADDRESS,\r\n          quantity,\r\n          pricePerToken,\r\n          startTimestamp,\r\n          endTimestamp,\r\n          reserved: options.isReservedListing ?? false,\r\n        },\r\n        overrides: {\r\n          extraGas: 50_000n, // add extra gas to account for router call\r\n        },\r\n      } as const;\r\n    },\r\n  });\r\n}\r\n\r\n/**\r\n * Checks if the `createListing` method is supported by the given contract.\r\n * @param availableSelectors An array of 4byte function selectors of the contract. You can get this in various ways, such as using \"whatsabi\" or if you have the ABI of the contract available you can use it to generate the selectors.\r\n * @returns A boolean indicating if the `createListing` method is supported.\r\n * @extension MARKETPLACE\r\n * @example\r\n * ```ts\r\n * import { isCreateAuctionSupported } from \"thirdweb/extensions/marketplace\";\r\n *\r\n * const supported = isCreateAuctionSupported([\"0x...\"]);\r\n * ```\r\n */\r\nexport function isCreateListingSupported(availableSelectors: string[]) {\r\n  return CreateListing.isCreateListingSupported(availableSelectors);\r\n}\r\n", "\"use client\";\r\n\r\nimport { useSuspenseQuery } from \"@tanstack/react-query\";\r\nimport { createContext, useContext } from \"react\";\r\nimport type { ThirdwebContract } from \"../../../../../contract/contract.js\";\r\nimport { getNFT as getNFT721 } from \"../../../../../extensions/erc721/read/getNFT.js\";\r\nimport { getNFT as getNFT1155 } from \"../../../../../extensions/erc1155/read/getNFT.js\";\r\nimport type { NFT as NFTType } from \"../../../../../utils/nft/parseNft.js\";\r\nimport { MediaRenderer } from \"../../MediaRenderer/MediaRenderer.js\";\r\nimport type { MediaRendererProps } from \"../../MediaRenderer/types.js\";\r\n\r\n/**\r\n * Props for the <NFT> component\r\n * @component\r\n */\r\ntype NFTProviderProps = {\r\n  /**\r\n   * The NFT contract address. Accepts both ERC721 and ERC1155 contracts\r\n   */\r\n  contract: ThirdwebContract;\r\n  /**\r\n   * The tokenId whose info you want to display\r\n   */\r\n  tokenId: bigint;\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const NFTProviderContext = /* @__PURE__ */ createContext<\r\n  NFTProviderProps | undefined\r\n>(undefined);\r\n\r\n/**\r\n * A React context provider component that supplies NFT-related data to its child components.\r\n *\r\n * This component serves as a wrapper around the `NFTProviderContext.Provider` and passes\r\n * the provided NFT data down to all of its child components through the context API.\r\n *\r\n *\r\n * @component\r\n * @param {React.PropsWithChildren<NFTProviderProps>} props - The props for the NFT provider\r\n *\r\n * @example\r\n * ```tsx\r\n * import { getContract } from \"thirdweb\";\r\n * import { NFT } from \"thirdweb/react\";\r\n *\r\n * const contract = getContract({\r\n *   address: \"0x...\",\r\n *   chain: ethereum,\r\n *   client: yourThirdwebClient,\r\n * });\r\n *\r\n * <NFT contract={contract} tokenId={0n}>\r\n *   <Suspense fallback={\"Loading media...\"}>\r\n *     <NFT.Media />\r\n *     <NFT.Description />\r\n *   </Suspense>\r\n * </NFT>\r\n * ```\r\n */\r\nexport function NFT(props: React.PropsWithChildren<NFTProviderProps>) {\r\n  return (\r\n    <NFTProviderContext.Provider value={props}>\r\n      {props.children}\r\n    </NFTProviderContext.Provider>\r\n  );\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nfunction useNFTContext() {\r\n  const ctx = useContext(NFTProviderContext);\r\n  if (!ctx) {\r\n    throw new Error(\r\n      \"NFTProviderContext not found. Make sure you are using NFT.Media, NFT.Description, etc. inside a <NFT /> component\",\r\n    );\r\n  }\r\n  return ctx;\r\n}\r\n\r\n/**\r\n * @component\r\n * The props for the <NFT.Media /> component\r\n * It is similar to the [`MediaRendererProps`](https://portal.thirdweb.com/references/typescript/v5/MediaRendererProps)\r\n * (excluding `src`, `poster` and `client`) that you can\r\n * use to style the NFT.Media\r\n */\r\nexport type NFTMediaProps = Omit<\r\n  MediaRendererProps,\r\n  \"src\" | \"poster\" | \"client\"\r\n>;\r\n\r\n/**\r\n * This component fetches and displays an NFT's media. It uses thirdweb [`MediaRenderer`](https://portal.thirdweb.com/react/v5/components/MediaRenderer) under the hood\r\n * so you can style it just like how you would style a MediaRenderer.\r\n * @returns A MediaRenderer component\r\n *\r\n * Since this component has an internal loading state (for when the NFT media is being fetched),\r\n * you must wrap it with React.Suspense to make it work.\r\n *\r\n * @component\r\n * @example\r\n * ### Basic usage\r\n * ```tsx\r\n * import { getContract } from \"thirdweb\";\r\n * import { NFT } from \"thirdweb/react\";\r\n *\r\n * const nftContract = getContract({\r\n *   address: \"0x...\",\r\n *   chain: ethereum,\r\n *   client: yourThirdwebClient,\r\n * });\r\n *\r\n * <NFT contract={nftContract} tokenId={0n}>\r\n *   This will show the media for tokenId #0 from the `nftContract` collection\r\n *   <Suspense fallback={\"Loading media...\"}>\r\n *     <NFT.Media />\r\n *   </Suspense>\r\n * </NFT>\r\n * ```\r\n *\r\n * ### Basic stylings\r\n * You can style NFT.Media with the `style` and `className` props.\r\n * ```tsx\r\n * <NFT.Media style={{ borderRadius: \"8px\" }} className=\"mx-auto\" />\r\n * ```\r\n */\r\nNFT.Media = (props: NFTMediaProps) => {\r\n  const { contract, tokenId } = useNFTContext();\r\n  const nftQuery = useSuspenseQuery({\r\n    queryKey: [\r\n      \"__nft_info_internal__\",\r\n      contract.chain.id,\r\n      contract.address,\r\n      tokenId.toString(),\r\n    ],\r\n    queryFn: () => getNFTInfo({ contract, tokenId }),\r\n  });\r\n  const animation_url = nftQuery.data?.metadata.animation_url;\r\n  const image =\r\n    nftQuery.data?.metadata.image || nftQuery.data?.metadata.image_url;\r\n\r\n  return (\r\n    <MediaRenderer\r\n      client={contract.client}\r\n      src={animation_url || image}\r\n      poster={image}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\n/**\r\n * This component fetches and displays an NFT's name. It takes in a `className` and `style` props\r\n * so you can style it just like how you would style a <span> element.\r\n * @returns A <span> element containing the name of the NFT\r\n *\r\n * Since this component has an internal loading state (for when the NFT media is being fetched),\r\n * you must wrap it with React.Suspense to make it work.\r\n *\r\n * @component\r\n * @example\r\n * ### Basic usage\r\n * ```tsx\r\n * import { getContract } from \"thirdweb\";\r\n * import { NFT } from \"thirdweb/react\";\r\n *\r\n * const nftContract = getContract({\r\n *   address: \"0x...\",\r\n *   chain: ethereum,\r\n *   client: yourThirdwebClient,\r\n * });\r\n *\r\n * <NFT contract={nftContract} tokenId={0n}>\r\n *   This will show the name for tokenId #0 from the `nftContract` collection\r\n *   <Suspense fallback={\"Loading nft name...\"}>\r\n *     <NFT.Name className=\"mx-auto\" style={{ color: \"red\" }} />\r\n *   </Suspense>\r\n * </NFT>\r\n * ```\r\n */\r\nNFT.Name = (props: { className?: string; style?: React.CSSProperties }) => {\r\n  const { contract, tokenId } = useNFTContext();\r\n  const nftQuery = useSuspenseQuery({\r\n    queryKey: [\r\n      \"__nft_info_internal__\",\r\n      contract.chain.id,\r\n      contract.address,\r\n      tokenId.toString(),\r\n    ],\r\n    queryFn: () => getNFTInfo({ contract, tokenId }),\r\n  });\r\n  const name = nftQuery.data?.metadata.name || \"\";\r\n  return <span {...props}>{name}</span>;\r\n};\r\n\r\n/**\r\n * This component fetches and displays an NFT's description. It takes in a `className` and `style` props\r\n * so you can style it just like how you would style a <span> element.\r\n * @returns A <span> element containing the description of the NFT\r\n *\r\n * Since this component has an internal loading state (for when the NFT media is being fetched),\r\n * you must wrap it with React.Suspense to make it work.\r\n *\r\n * @component\r\n * @example\r\n * ### Basic usage\r\n * ```tsx\r\n * import { getContract } from \"thirdweb\";\r\n * import { NFT } from \"thirdweb/react\";\r\n *\r\n * const nftContract = getContract({\r\n *   address: \"0x...\",\r\n *   chain: ethereum,\r\n *   client: yourThirdwebClient,\r\n * });\r\n *\r\n * <NFT contract={nftContract} tokenId={0n}>\r\n *   This will show the description for tokenId #0 from the `nftContract` collection\r\n *   <Suspense fallback={\"Loading description...\"}>\r\n *     <NFT.Description className=\"mx-auto\" style={{ color: \"red\" }} />\r\n *   </Suspense>\r\n * </NFT>\r\n * ```\r\n */\r\nNFT.Description = (props: {\r\n  className: string;\r\n  style: React.CSSProperties;\r\n}) => {\r\n  const { contract, tokenId } = useNFTContext();\r\n  const nftQuery = useSuspenseQuery({\r\n    queryKey: [\r\n      \"__nft_info_internal__\",\r\n      contract.chain.id,\r\n      contract.address,\r\n      tokenId.toString(),\r\n    ],\r\n    queryFn: () => getNFTInfo({ contract, tokenId }),\r\n  });\r\n  const description = nftQuery.data?.metadata.description || \"\";\r\n  return <span {...props}>{description}</span>;\r\n};\r\n\r\n/**\r\n * @internal\r\n */\r\nexport async function getNFTInfo(options: NFTProviderProps): Promise<NFTType> {\r\n  const nft = await Promise.allSettled([\r\n    getNFT721(options),\r\n    getNFT1155(options),\r\n  ]).then(([possibleNFT721, possibleNFT1155]) => {\r\n    // getNFT extension always return an NFT object\r\n    // so we need to check if the tokenURI exists\r\n    if (\r\n      possibleNFT721.status === \"fulfilled\" &&\r\n      possibleNFT721.value.tokenURI\r\n    ) {\r\n      return possibleNFT721.value;\r\n    }\r\n    if (\r\n      possibleNFT1155.status === \"fulfilled\" &&\r\n      possibleNFT1155.value.tokenURI\r\n    ) {\r\n      return possibleNFT1155.value;\r\n    }\r\n    throw new Error(\"Failed to load NFT metadata\");\r\n  });\r\n  return nft;\r\n}\r\n"],
  "mappings": "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",
  "names": ["import_react", "_jsx", "_jsxs", "_Fragment", "import_react", "import_react", "import_react", "_jsxs", "_jsx", "_Fragment", "_jsx", "_jsx", "sendTransaction", "_jsx", "_jsxs", "import_react", "import_react", "_jsx", "_jsxs", "_jsx", "queryOptions", "import_react", "import_react", "queryOptions", "queryOptions", "import_react", "_a", "_b", "_jsx", "_jsxs", "_Fragment", "import_react", "_jsx", "Modal", "_jsx", "getNFT", "import_react", "getPayMetadata", "_jsx", "import_react", "createListing", "getPayMetadata", "createListing", "_jsx", "getContractMetadata", "import_react", "_jsx", "getNFT"]
}
